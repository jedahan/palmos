<html>
<!-- Mirrored from users.fuw.edu.pl/~michalj/palmos/FeatureManager.html by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 17 Feb 2015 19:10:01 GMT -->
<head><title>Feature Manager</title></head><body bgcolor="#ffffff"><TABLE WIDTH="100%">  <TR>    <TD WIDTH=25%><a href="ErrorManager.html"><IMG SRC="images/prev.html" BORDER=0 ALT="Previous Page"></TD>    <TD WIDTH=25%><a href="ReferenceTOC.html"><IMG SRC="images/content.gif" BORDER=0 ALT="Table of Contents"></TD>    <TD WIDTH=25%><a href="ReferenceIX.html"><IMG SRC="images/index.gif" BORDER=0 ALT="Index"></TD>    <TD WIDTH=25%><a href="FileStreaming.html"><IMG SRC="images/next.html" BORDER=0 ALT="Next Page"></TD>  </TR></TABLE><br><center><B>Palm OS SDK Reference</B></center><hr><br><a name="924904"> </a><h1><IMG SRC="images/PCPplain.gif" ALT="Palm Logo" WIDTH="45" HEIGHT="44"> <a name="924903"> </a>29 Feature Manager</h1><dl><a name="924905"> </a><p></p><dt>This chapter provides reference material for the feature manager. The feature manager API is declared in the header file <code>FeatureMgr.h</code>. <a name="924907"> </a><p></p><dt>For more information on the feature manager, see the section <a href="SystemFeatures.html#925109">"Features"</a> in the <em>Palm OS Programmer's Companion</em>. <a name="924911"> </a><p></p><dt>To learn how to use the predefined Palm OS<sup>&#174;</sup> features to test for the existence of certain OS features, see the <a href="CompatibilityApdx.html#483126">"Compatibility Guide"</a> appendix. </dl><a name="924916"> </a><h2> Feature Manager Functions</h2><a name="924918"> </a><br> <br> <br><h3> FtrGet</h3><dl><dl><a name="924919"> </a><h4>Purpose </h4><dl><a name="924920"> </a><p></p><dt>Get a feature.</dl><a name="924921"> </a><h4>Prototype </h4><dl><a name="924923"> </a><dt><code>Err FtrGet (UInt32&nbsp;creator, UInt16&nbsp;featureNum, UInt32&nbsp;*valueP)</code></dl></dl><dl><a name="924924"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="924925"> </a><CODE><code>-&gt; creator</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Creator ID, which must be registered with Palm Computing<sup>&#174;</sup>. This is usually the same as the creator ID for the application that owns this feature. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="924926"> </a><CODE><code>-&gt; featureNum</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Feature number of the feature.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="924927"> </a><CODE><code>&lt;- valueP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Value of the feature is returned here.<br></TD></TR></TABLE></dl><dl><a name="924928"> </a><h4>Result </h4><dl><a name="924930"> </a><p></p><dt>Returns 0 if no error, or <code>ftrErrNoSuchFtr</code> if the specified feature number doesn't exist for the specified creator.</dl></dl><dl><a name="924931"> </a><h4>Comments </h4><dl><a name="924932"> </a><p></p><dt>The value of the feature is application-dependent.</dl><a name="924933"> </a><h4>See Also </h4><dl><a name="924937"> </a><p></p><dt><code><a href="FeatureManager.html#925063"></code>FtrSet<code></a> </code></dl></dl></dl><a name="924939"> </a><br> <br> <br><h3> FtrGetByIndex</h3><dl><dl><a name="924940"> </a><h4>Purpose </h4><dl><a name="924942"> </a><p></p><dt>Get a feature by index. </dl><a name="924943"> </a><h4>Prototype </h4><dl><a name="924945"> </a><dt><code>Err FtrGetByIndex (UInt16&nbsp;index, Boolean&nbsp;romTable, UInt32&nbsp;*creatorP, UInt16&nbsp;*numP, UInt32&nbsp;*valueP)</code></dl></dl><dl><a name="924946"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="924947"> </a><CODE><code>-&gt; index</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Index of feature.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="924948"> </a><CODE><code>-&gt; romTable</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>If <code>true</code>, index into ROM table; otherwise, index into RAM table.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="924949"> </a><CODE><code>&lt;- creatorP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Feature creator is returned here.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="924950"> </a><CODE><code>&lt;- numP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Feature number is returned here.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="924951"> </a><CODE><code>&lt;- valueP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Feature value is returned here.<br></TD></TR></TABLE></dl><dl><a name="924952"> </a><h4>Result </h4><dl><a name="924954"> </a><p></p><dt>Returns 0 if no error, or <code>ftrErrNoSuchFeature</code> if the index is out of range.</dl></dl><dl><a name="924955"> </a><h4>Comments </h4><dl><a name="924956"> </a><p></p><dt>This function is intended for system use only. It is used by shell commands. Most applications don't need it.<a name="924958"> </a><p></p><dt>Until the caller gets back <code>ftrErrNoSuchFeature</code>, it should pass indices for each table (ROM, RAM) starting at 0 and incrementing. Note that in Palm OS 3.1 and higher, the RAM feature table serves the entire system. At system startup, the values in the ROM feature table are copied into the RAM feature table. </dl></dl></dl><a name="924961"> </a><br> <br> <br><h3> FtrPtrFree</h3><dl><dl><a name="924962"> </a><h4>Purpose </h4><dl><a name="924966"> </a><p></p><dt>Release memory previous allocated with <code><a href="FeatureManager.html#924984"></code>FtrPtrNew<code></a></code>.</dl><a name="924967"> </a><h4>Prototype </h4><dl><a name="924968"> </a><dt><code>Err FtrPtrFree (UInt32&nbsp;creator, UInt16&nbsp;featureNum)</code></dl></dl><dl><a name="924969"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="924970"> </a><CODE><code>-&gt; creator</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The creator ID for the feature. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="924971"> </a><CODE><code>-&gt; featureNum</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Feature number of the feature.<br></TD></TR></TABLE></dl><dl><a name="924972"> </a><h4>Result </h4><dl><a name="924974"> </a><p></p><dt>Returns 0 if no error, or <code>ftrErrNoSuchFtr</code> if an error occurs.</dl></dl><dl><a name="924975"> </a><h4>Comments </h4><dl><a name="924976"> </a><p></p><dt>This function unregisters the feature before freeing the memory associated with it. </dl><a name="924977"> </a><h4>Compatibility </h4><dl><a name="924981"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#484138">3.1 New Feature Set</a> is present.</dl></dl></dl><a name="924984"> </a><br> <br> <br><h3> FtrPtrNew</h3><dl><dl><a name="924985"> </a><h4>Purpose </h4><dl><a name="924986"> </a><p></p><dt>Allocate feature memory. </dl><a name="924987"> </a><h4>Prototype </h4><dl><a name="924988"> </a><dt><code>Err FtrPtrNew (UInt32&nbsp;creator, UInt16&nbsp;featureNum, UInt32&nbsp;size, void&nbsp;**newPtrP)</code></dl></dl><dl><a name="924989"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="924990"> </a><CODE><code>-&gt; creator</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Creator ID, which must be registered with Palm Computing. This is usually the same as the creator ID for the application that owns this feature. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="924991"> </a><CODE><code>-&gt; featureNum</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Feature number of the feature.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="924992"> </a><CODE><code>-&gt; size</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Size in bytes of the temporary memory to allocate. The maximum chunk size is 64K. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="924993"> </a><CODE><code>&lt;- newPtrP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to the memory chunk is returned here. <br></TD></TR></TABLE></dl><dl><a name="924994"> </a><h4>Result </h4><dl><a name="924996"> </a><p></p><dt>Returns 0 if no error,<code> memErrInvalidParam</code> if the value of <code>size</code> is 0, or <code>memErrNotEnoughSpace</code> if there is not enough space to allocate a chunk of the specified size.</dl></dl><dl><a name="924998"> </a><h4>Comments </h4><dl><a name="924999"> </a><p></p><dt>This function allocates a chunk of memory and stores a pointer to that chunk in the feature table. The same pointer is returned in <code>newPtrP</code>. The memory chunk remains allocated and locked until the next system reset or until you free the chunk with <code><a href="FeatureManager.html#924961"></code>FtrPtrFree<code></a></code>. <a name="925003"> </a><p></p><dt><code>FtrPtrNew</code> is useful if you want quick, efficient access to data that persists from one invocation of the application to the next. <code>FtrPtrNew</code> stores values on the storage heap rather than the dynamic heap, where free space is often extremely limited. The disadvantage to using feature memory is that writing to storage memory is slower than writing to dynamic memory. <a name="925813"> </a><blockquote><hr><strong>NOTE: &nbsp</strong><p></p>Starting with <code>Palm OS 3.5 FtrPtrNew</code> allows allocating chunks larger than 64k. Do keep in mind standard issues with allocating large chunks of memory: there might not be enough contiguous space, and it can impact system performance. <hr><br></blockquote><a name="925007"> </a><p></p><dt>You can obtain the pointer to the chunk using <code><a href="FeatureManager.html#924918"></code>FtrGet<code></a></code>. To write to the chunk, you <strong>must</strong> use <code><a href="DataAndResourceManager.html#927456"></code>DmWrite<code></a></code> because the chunk is in the storage heap, not the dynamic heap. <a name="925011"> </a><p></p><dt>For example, if you allocate a memory chunk in this way: </dl></dl><dl><a name="925013"> </a><br><code>FtrPtrNew(appCreator, <br>	 	 myFtrMemFtr, 32, &amp;ftrMem);</code><br><dl><a name="925014"> </a><p></p><dt>You can later access that memory and write to it using the following:</dl><a name="925015"> </a><br><code>void* data; </code><br></dl><dl><a name="925016"> </a><code>if (!FtrGet(appCreator, <br>	 	 myFtrMemFtr, (UInt32*)&amp;data))</code><br><a name="925017"> </a><code>&nbsp&nbsp&nbsp DmWrite(data, 0, &amp;someVal, sizeof(someVal));</code><br></dl><dl><a name="925018"> </a><h4>Compatibility </h4><dl><a name="925022"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#484138">3.1 New Feature Set</a> is present.</dl><a name="925023"> </a><h4>See Also </h4><dl><a name="925027"> </a><p></p><dt><code><a href="FeatureManager.html#925030"></code>FtrPtrResize<code></a></code> </dl></dl></dl><a name="925030"> </a><br> <br> <br><h3> FtrPtrResize</h3><dl><dl><a name="925031"> </a><h4>Purpose </h4><dl><a name="925032"> </a><p></p><dt>Resize feature memory.</dl><a name="925033"> </a><h4>Prototype </h4><dl><a name="925034"> </a><dt><code>Err FtrPtrResize (UInt32&nbsp;creator, UInt16&nbsp;featureNum, UInt32&nbsp;newSize, void&nbsp;**newPtrP)</code></dl></dl><dl><a name="925035"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925036"> </a><CODE><code>-&gt; creator</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The creator ID for the feature. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925037"> </a><CODE><code>-&gt; featureNum</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Feature number of the feature.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925038"> </a><CODE><code>-&gt; newSize</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>New size in bytes for the chunk. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925039"> </a><CODE><code>&lt;- newPtrP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to the memory chunk is returned here. <br></TD></TR></TABLE></dl><dl><a name="925040"> </a><h4>Result </h4><dl><a name="925042"> </a><p></p><dt>Returns 0 if no error, or <code>ftrErrNoSuchFtr</code> if the specified feature number doesn't exist for the specified creator, <code>memErrInvalidParam</code> if <code>newSize</code> is 0, or <code>memErrNotEnoughSpace</code> if there's not enough free space available to allocate a chunk of that size. </dl></dl><dl><a name="925045"> </a><h4>Comments </h4><dl><a name="925046"> </a><p></p><dt>Use this function to resize a chunk of memory previously allocated by <code><a href="FeatureManager.html#924984"></code>FtrPtrNew<code></a></code>. <a name="925050"> </a><p></p><dt>This function may move the chunk to a new location in order to resize it, so it is important to use the pointer returned by this function when accessing the memory chunk. The pointer in the feature table is automatically updated to be the same as the pointer returned by this function. <a name="925051"> </a><p></p><dt>If this function fails, the old memory pointer still exists and its data is unchanged. </dl><a name="925052"> </a><h4>Compatibility </h4><dl><a name="925056"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#484138">3.1 New Feature Set</a> is present.</dl><a name="925057"> </a><h4>See Also </h4><dl><a name="925061"> </a><p></p><dt><code><a href="MemoryManager.html#925103"></code>MemHandleResize<code></a></code> </dl></dl></dl><a name="925063"> </a><br> <br> <br><h3> FtrSet</h3><dl><dl><a name="925064"> </a><h4>Purpose </h4><dl><a name="925065"> </a><p></p><dt>Set a feature.</dl><a name="925066"> </a><h4>Prototype </h4><dl><a name="925068"> </a><dt><code>Err FtrSet (UInt32&nbsp;creator, UInt16&nbsp;featureNum, UInt32&nbsp;newValue)</code></dl></dl><dl><a name="925069"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925070"> </a><CODE><code>-&gt; creator</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Creator ID, which must be registered with Palm Computing. This is usually the same as the creator ID for the application that owns this feature. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925071"> </a><CODE><code>-&gt; featureNum</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Feature number for this feature.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925072"> </a><CODE><code>-&gt; newValue</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>New value.<br></TD></TR></TABLE></dl><dl><a name="925073"> </a><h4>Result </h4><dl><a name="925076"> </a><p></p><dt>Returns 0 if no error, or <code></code><code>memErrNotEnoughSpace</code> if the feature table must be resized to add a new feature and no space is available.</dl></dl><dl><a name="925077"> </a><h4>Comments </h4><dl><a name="925078"> </a><p></p><dt>The value of the feature is application-dependent.<a name="925079"> </a><p></p><dt>A feature that you define in this manner remains defined until the next system reset or until you explicitly undefine the feature with <code><a href="FeatureManager.html#925092"></code>FtrUnregister<code></a></code>.</dl><a name="925083"> </a><h4>See Also </h4><dl><a name="925090"> </a><p></p><dt><code><a href="FeatureManager.html#924918"></code>FtrGet<code></a></code>, <code><a href="FeatureManager.html#924984"></code>FtrPtrNew<code></a></code> </dl></dl></dl><a name="925092"> </a><br> <br> <br><h3> FtrUnregister</h3><dl><dl><a name="925093"> </a><h4>Purpose </h4><dl><a name="925094"> </a><p></p><dt>Unregister a feature.</dl><a name="925095"> </a><h4>Prototype </h4><dl><a name="925097"> </a><dt><code>Err FtrUnregister (UInt32&nbsp;creator, UInt16&nbsp;featureNum)</code></dl></dl><dl><a name="925098"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925099"> </a><CODE><code>-&gt; creator</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Creator ID for the feature.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925100"> </a><CODE><code>-&gt; featureNum</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Feature number of the feature.<br></TD></TR></TABLE></dl><dl><a name="925101"> </a><h4>Result </h4><dl><a name="925103"> </a><p></p><dt>Returns 0 if no error, or <code></code><code>ftrErrNoSuchFeature</code> if the specified feature number doesn't exist for the specified creator. <dl><a name="925115"> </a><p></p><dt><strong></strong></dl></dl></dl></dl><hr><br><center><B>Palm OS SDK Reference</B></center><br><TABLE WIDTH="100%">  <TR>    <TD WIDTH=10%>&nbsp</TD>    <TD WIDTH=20%><a href="ErrorManager.html"><IMG SRC="images/prev.html" BORDER=0 ALT="Previous Page"></TD>    <TD WIDTH=20%><a href="ReferenceTOC.html"><IMG SRC="images/content.gif" BORDER=0 ALT="Table of Contents"></TD>    <TD WIDTH=20%><a href="ReferenceIX.html"><IMG SRC="images/index.gif" BORDER=0 ALT="Index"></TD>    <TD WIDTH=20%><a href="FileStreaming.html"><IMG SRC="images/next.html" BORDER=0 ALT="Next Page"></TD>    <TD WIDTH=10%>&nbsp</TD>  </TR></TABLE><br><small><em>This is page 31 of 85 in this book</em></small><hr><br><address><a href="http://www.palmos.com/dev/">Palm Computing Platform Development Zone</a></address><i>Copyright &#169; 2000, Palm, Inc.   All rightsreserved.</i><!-- This file was created with Quadralay WebWorks Publisher 5.0.2 --><!-- --><!-- For more information on how this document, and how the rest of --><!-- this server was created, email devsupp@palm.com --><!-- --><!-- Last updated: 03/27/00 21:28:34 --></body>
<!-- Mirrored from users.fuw.edu.pl/~michalj/palmos/FeatureManager.html by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 17 Feb 2015 19:10:01 GMT -->
</html>