<html>
<!-- Mirrored from users.fuw.edu.pl/~michalj/palmos/Bitmap.html by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 17 Feb 2015 19:10:01 GMT -->
<head><title>Bitmaps</title></head><body bgcolor="#ffffff"><TABLE WIDTH="100%">  <TR>    <TD WIDTH=25%><a href="AlarmManager.html"><IMG SRC="images/prev.html" BORDER=0 ALT="Previous Page"></TD>    <TD WIDTH=25%><a href="ReferenceTOC.html"><IMG SRC="images/content.gif" BORDER=0 ALT="Table of Contents"></TD>    <TD WIDTH=25%><a href="ReferenceIX.html"><IMG SRC="images/index.gif" BORDER=0 ALT="Index"></TD>    <TD WIDTH=25%><a href="CharacterAttributes.html"><IMG SRC="images/next.html" BORDER=0 ALT="Next Page"></TD>  </TR></TABLE><br><center><B>Palm OS SDK Reference</B></center><hr><br><a name="1096944"> </a><h1><IMG SRC="images/PCPplain.gif" ALT="Palm Logo" WIDTH="45" HEIGHT="44"> <a name="924902"> </a>24 Bitmaps</h1><dl><a name="924905"> </a><p></p><dt>This chapter provides information about bitmaps by discussing these topics: <ul type="SQUARE"><a name="924909"> </a><br><li><a href="Bitmap.html#924922">Bitmap Data Structures</a> <br><a name="938174"> </a><br><li><a href="Bitmap.html#1102613">Bitmap Constants</a> <br><a name="924913"> </a><br><li><a href="Bitmap.html#1109265">Bitmap Resources</a> <br><a name="1124704"> </a><br><li><a href="Bitmap.html#1039737">Bitmap Functions</a> <br></ul><a name="1124706"> </a><p></p><dt>The header file <code>Bitmap.h</code> declares the API that this chapter describes. For more information on windows, see the section <a href="UserInterface.html#937218">"Bitmaps" </a> in the <em>Palm OS Programmer's Companion</em>. </dl><a name="924922"> </a><h2> Bitmap Data Structures</h2><a name="1102424"> </a><h3> BitmapCompressionType</h3><dl><a name="1102427"> </a><p></p><dt>The <code>BitmapCompressionType</code> enum specifies possible bitmap compression types. These are the possible values for the <code>compressionType</code> field of <code><a href="Bitmap.html#1102603"></code>BitmapType<code></a></code>. You can compress or uncompress a bitmap using a call to <code><a href="Bitmap.html#1103219"></code>BmpCompress<code></a></code>.<dl><a name="1102430"> </a><br><code>typedef enum {</code><br></dl><dl><a name="1102431"> </a><code>&nbsp&nbsp&nbsp BitmapCompressionTypeScanLine = 0,</code><br><a name="1102432"> </a><code>&nbsp&nbsp&nbsp BitmapCompressionTypeRLE,</code><br><a name="1102434"> </a><code>&nbsp&nbsp&nbsp BitmapCompressionTypeNone = 0xFF</code><br><a name="1102435"> </a><code>} BitmapCompressionType;</code><br></dl></dl><a name="1102428"> </a><h4> Value Descriptions</h4><p><a name="1102457"> </a> </p><p><div> <table border="3"><caption><B></B></caption><tr><td><a name="1102466"> </a><code>BitmapCompressionTypeScanLine</code> </td><td><a name="1102468"> </a>Use scan line compression. Scan line compression is compatible with Palm OS<sup>&#174;</sup> 2.0 and higher. </td></tr><tr><td><a name="1102470"> </a><code>BitmapCompressionTypeRLE</code> </td><td><a name="1102472"> </a>Use RLE compression. RLE compression is supported in Palm OS 3.5 only. </td></tr><tr><td><a name="1105595"> </a><code>BitmapCompressionTypeNone</code> </td><td><a name="1105597"> </a>No compression is used. <dl><a name="1121014"> </a><p></p><dt>This value should only be used as an argument to <code><a href="Bitmap.html#1103219"></code>BmpCompress<code></a></code>.</dl></td></tr></table><table><tr><td></table></div></p><a name="925134"> </a><h4> Compatibility</h4><dl><a name="1109461"> </a><p></p><dt>This type is only defined if <a href="CompatibilityApdx.html#486514">3.5 New Feature Set</a> is present. Earlier releases do support compressed bitmaps, but in scan line format only. </dl><a name="1109452"> </a><h3> BitmapFlagsType</h3><dl><a name="1102481"> </a><p></p><dt>The <code>BitmapFlagsType</code> bit field defines the <code>flags</code> field of <code><a href="Bitmap.html#1102603"></code>BitmapType<code></a></code>. It specifies the bitmap's attributes. <dl><a name="1102500"> </a><br><code>typedef struct BitmapFlagsType {</code><br></dl><dl><a name="1102501"> </a><code>&nbsp&nbsp&nbsp UInt16 compressed:1;</code><br><a name="1102502"> </a><code>&nbsp&nbsp&nbsp UInt16 hasColorTable:1;</code><br><a name="1102503"> </a><code>&nbsp&nbsp&nbsp UInt16 hasTransparency:1;</code><br><a name="1102504"> </a><code>&nbsp&nbsp&nbsp UInt16 indirect:1;</code><br><a name="1102505"> </a><code>&nbsp&nbsp&nbsp UInt16 forScreen:1;</code><br><a name="1102506"> </a><code>&nbsp&nbsp&nbsp UInt16 reserved:11;</code><br><a name="1102507"> </a><code>} BitmapFlagsType;</code><br></dl></dl><a name="1102515"> </a><h4> Field Descriptions</h4><p><a name="1102525"> </a> </p><p><div> <table border="3"><caption><B></B></caption><tr><td><a name="1105940"> </a><code>compressed</code> </td><td><a name="1105942"> </a>If <code>true</code>, the bitmap is compressed and the <code>compressionType</code> field specifies the compression used. If <code>false</code>, the bitmap is uncompressed. The <code><a href="Bitmap.html#1103219"></code>BmpCompress<code></a></code> function sets this field. </td></tr><tr><td><a name="1105944"> </a><code>hasColorTable</code> </td><td><a name="1105946"> </a>If <code>true</code>, the bitmap has its own color table. If <code>false</code>, the bitmap uses the system color table. You specify whether the bitmap has its own color table when you create the bitmap. </td></tr><tr><td><a name="1105948"> </a><code>hasTransparency</code> </td><td><a name="1105950"> </a>If <code>true</code>, the OS will not draw pixels that have a value equal to the <code>transparentIndex</code>. If <code>false</code>, the bitmap has no transparency value. You specify the transparent color when you create the bitmap using Constructor. </td></tr><tr><td><a name="1105952"> </a><code>indirect</code> </td><td><a name="1105954"> </a>If <code>true</code>, the address to the bitmap's data is stored where the bitmap itself would normally be stored. The actual bitmap data is stored elsewhere. If <code>false</code>, the bitmap data is stored directly following the bitmap header or directly following the bitmap's color table if it has one. <dl><a name="1114687"> </a><p></p><dt>Never set this flag. Only the display (screen) bitmap has the indirect bit set. </dl></td></tr><tr><td><a name="1105956"> </a><code>forScreen</code> </td><td><a name="1105958"> </a>If <code>true</code>, the bitmap is the bitmap for the display (screen) window. Never set this flag. </td></tr><tr><td><a name="1105960"> </a><code>reserved</code> </td><td><a name="1105962"> </a>Reserved for future use. </td></tr></table><table><tr><td></table></div></p><a name="1102473"> </a><h4> Compatibility</h4><dl><a name="1114391"> </a><p></p><dt>All flags other than <code>compressed</code> and <code>hasColorTable</code> are only defined if <a href="CompatibilityApdx.html#486514">3.5 New Feature Set</a> is present. Note that the size of this structure did not change. </dl><a name="1109193"> </a><h3> BitmapPtr</h3><dl><a name="1102604"> </a><p></p><dt>The <code>BitmapPtr</code> type defines a pointer to a <code><a href="Bitmap.html#1102603"></code>BitmapType<code></a></code> structure. <dl><a name="1102607"> </a><br><code>typedef BitmapType *BitmapPtr;</code><br></dl></dl><a name="1102603"> </a><h3> BitmapType</h3><dl><a name="1102546"> </a><p></p><dt>The <code>BitmapType</code> structure represents a bitmap. This structure defines both the bitmaps representing the window display and bitmap resources (<code>'Tbmp'</code> and <code>'tAIB'</code>) that you create using Constructor or some other application and load into your program. <dl><a name="1102552"> </a><br><code>typedef struct BitmapType {</code><br></dl><dl><a name="1102553"> </a><code>&nbsp&nbsp&nbsp Int16	 	 	 	 	 	 	 	 width;</code><br><a name="1102554"> </a><code>&nbsp&nbsp&nbsp Int16  	 	 	 	 	 	 	 	 height;</code><br><a name="1102555"> </a><code>&nbsp&nbsp&nbsp UInt16  	 	 	 	 	 	 	 	 rowBytes;</code><br><a name="1102556"> </a><code>&nbsp&nbsp&nbsp BitmapFlagsType	 	 	 	 	 	 	 	 flags;</code><br><a name="1102557"> </a><code>&nbsp&nbsp&nbsp UInt8	 	 	 	 	 	 	 	 pixelSize;</code><br><a name="1102558"> </a><code>&nbsp&nbsp&nbsp UInt8	 	 	 	 	 	 	 	 version;</code><br><a name="1102559"> </a><code>&nbsp&nbsp&nbsp UInt16	  	 	 	 	 	 	 	 nextDepthOffset;</code><br><a name="1102561"> </a><code>&nbsp&nbsp&nbsp UInt8	 	 	 	 	 	 	 	 transparentIndex;</code><br><a name="1102563"> </a><code>&nbsp&nbsp&nbsp UInt8	 	 	 	 	 	 	 	 compressionType;</code><br><a name="1102566"> </a><code>&nbsp&nbsp&nbsp UInt16	  	 	 	 	 	 	 	 reserved;</code><br><a name="1102577"> </a><code>} BitmapType;</code><br></dl></dl><a name="1102590"> </a><h4> Field Descriptions</h4><p><a name="1102600"> </a> </p><p><div> <table border="3"><caption><B></B></caption><tr><td><a name="1107524"> </a><code>width</code> </td><td><a name="1107526"> </a>The width of the bitmap in pixels. You specify this value when you create the bitmap. </td></tr><tr><td><a name="1107528"> </a><code>height</code> </td><td><a name="1107530"> </a>The height of the bitmap in pixels. You specify this value when you create the bitmap. </td></tr><tr><td><a name="1107532"> </a><code>rowBytes</code> </td><td><a name="1107534"> </a>The number of bytes stored for each row of the bitmap where <code>height</code> is the number of rows. </td></tr><tr><td><a name="1107536"> </a><code>flags</code> </td><td><a name="1107538"> </a>The bitmap's attributes. See <code><a href="Bitmap.html#1109452"></code>BitmapFlagsType<code></a></code>.</td></tr><tr><td><a name="1107540"> </a><code>pixelSize</code> </td><td><a name="1107542"> </a>The pixel depth. Currently supported pixel depths are 1, 2, 4, and 8-bit. You specify this value when you create the bitmap. </td></tr><tr><td><a name="1107544"> </a><code>version</code> </td><td><a name="1107546"> </a>The version of bitmap encoding used. See <a href="Bitmap.html#1102613">Bitmap Constants</a>. </td></tr><tr><td><a name="1107548"> </a><code>nextDepthOffset</code> </td><td><a name="1107550"> </a>For bitmap families, this field specifies the start of the next bitmap in the family. The value it contains is the number of 4-byte words to the next <code>BitmapType</code> from the beginning of this one. If the bitmap is not part of a bitmap family or it is the last bitmap in the family, the <code>nextDepthOffset</code> is 0. </td></tr><tr><td><a name="1107552"> </a><code>transparentIndex</code> </td><td><a name="1107554"> </a>The color index for the transparent color. Only used for version 2 bitmaps and only when the <code>transparent</code> flag is set in <code>flags</code>. You specify this value when you create the bitmap using Constructor. </td></tr><tr><td><a name="1107556"> </a><code>compressionType</code> </td><td><a name="1107558"> </a>The compression type used. Only used for version 2 bitmaps and only when the <code>compressed</code> flag is set in <code>flags</code>. See <code><a href="Bitmap.html#1102424"></code>BitmapCompressionType<code></a></code> for possible values. The <code><a href="Bitmap.html#1103219"></code>BmpCompress<code></a></code> function sets this field. </td></tr><tr><td><a name="1107560"> </a><code>reserved</code> </td><td><a name="1107562"> </a>Reserved for future use. Must be set to 0. </td></tr></table><table><tr><td></table></div></p><dl><a name="1117571"> </a><p></p><dt>Note the following about the <code>BitmapType</code> structure: <ul type="SQUARE"><a name="1117572"> </a><br><li>None of these fields contains the actual bitmap data. Instead, the bitmap data is stored immediately following this <code>BitmapType</code> header structure. If the bitmap has its own color table, the color table is stored in between the header and the data. You can retrieve a bitmap's data by passing its <code>BitmapType</code> structure to <code><a href="Bitmap.html#1103614"></code>BmpGetBits<code></a></code>, and you can retrieve its color table with <code><a href="Bitmap.html#1103771"></code>BmpGetColortable<code></a></code>.<br><a name="1117576"> </a><br><li>Unlike most other user interface structures, the <code>BitmapType</code> does not store the bitmap's location on the screen. The <code><a href="Window.html#950756"></code>WindowType<code></a></code> or the <code><a href="Form.html#947469"></code>FormBitmapType<code></a></code> with which this bitmap is associated contains that information. <br><a name="1117583"> </a><br><li>A bitmap may be part of a <strong>bitmap family</strong>. A bitmap family is a group of bitmaps, each containing the same drawing but at a different pixel depth (see <a href="Bitmap.html#1121458">Figure 24.1</a>). When requested to draw a bitmap family, the operating system chooses the version of the bitmap with the pixel depth closest to the display. When <code>BitmapType</code> represents a bitmap family, the <code>nextDepthOffset</code> field contains the offset from the start of this bitmap to the next bitmap in the family. <br></ul></dl><a name="1121458"> </a><h4>Figure 24.1	 Bitmap Family</h4><p><a name="1121544"> </a><img src="images/Bitmaps.gif"></p><a name="1102535"> </a><h4> Compatibility</h4><dl><a name="1109076"> </a><p></p><dt>The <code>transparentIndex</code> and <code>compressionType</code> flags are defined only if <a href="CompatibilityApdx.html#486514">3.5 New Feature Set</a> is present.</dl><a name="1109067"> </a><h3> ColorTableType</h3><dl><a name="1102659"> </a><p></p><dt>The <code>ColorTableType</code> structure defines a color table. Bitmaps can have color tables attached to them; however, doing so is not recommended for performance reasons. <dl><a name="1102676"> </a><br><code>typedef struct ColorTableType {</code><br></dl><dl><a name="1102678"> </a><code>&nbsp&nbsp&nbsp UInt16	 	 	 	 	 	 	 	 numEntries;</code><br><a name="1102679"> </a><code>&nbsp&nbsp&nbsp // RGBColorType	 	 	 	 	 	 	 	 entry[];</code><br><a name="1102681"> </a><code>} ColorTableType;</code><br></dl></dl><a name="1102694"> </a><h4> Field Descriptions</h4><p><a name="1102704"> </a> </p><p><div> <table border="3"><caption><B></B></caption><tr><td><a name="1102697"> </a><code>numEntries</code> </td><td><a name="1102699"> </a>The number of entries in table. High bits (<code>numEntries</code> &gt; 256) reserved.</td></tr></table><table><tr><td></table></div></p><dl><a name="1114847"> </a><p></p><dt>The color table entries themselves are of type <code><a href="Bitmap.html#1102652"></code>RGBColorType<code></a></code>, and there is one per <code>numEntries</code>. Use the macro <code><a href="Bitmap.html#1102723"></code>ColorTableEntries<code></a></code> to retrieve these entries. <a name="1115259"> </a><p></p><dt>Care should be taken not to confuse a full color table (which includes the count) with an array of RGB color values. Some routines operate on entire color tables; others operate on lists of color entries.</dl><a name="1109471"> </a><h4> Compatibility</h4><dl><a name="1115327"> </a><p></p><dt>This type is defined only if <a href="CompatibilityApdx.html#486514">3.5 New Feature Set</a> is present. </dl><a name="1102652"> </a><h3> RGBColorType</h3><dl><a name="1102621"> </a><p></p><dt>The <code>RGBColorType</code> structure defines a color. It is used as an entry in the color table. <code>RGBColorTypes</code> can also be created manually and passed to several user interface functions. <dl><a name="1102640"> </a><br><code>typedef struct RGBColorType {</code><br></dl><dl><a name="1102641"> </a><code>&nbsp&nbsp&nbsp UInt8 index;</code><br><a name="1102642"> </a><code>&nbsp&nbsp&nbsp UInt8 r;</code><br><a name="1102643"> </a><code>&nbsp&nbsp&nbsp UInt8 g;</code><br><a name="1102644"> </a><code>&nbsp&nbsp&nbsp UInt8 b;</code><br><a name="1102645"> </a><code>} RGBColorType;</code><br></dl></dl><a name="1102710"> </a><h4> Field Descriptions</h4><p><a name="1102720"> </a> </p><p><div> <table border="3"><caption><B></B></caption><tr><td><a name="1102713"> </a><code>index</code> </td><td><a name="1102715"> </a>The index of this color in the color table. Not all functions that use <code>RGBColorType</code> use the <code>index</code> field. <dl><a name="1123691"> </a><p></p><dt>In Palm OS<sup>&#174;</sup> 3.5, the maximum supported number of colors is 256. The number of possible RGB colors greatly exceeds this amount. For this reason, some drawing functions use a color look up table (CLUT). If the CLUT is used, the <code>index</code> field contains the index of an available color that is the closest match to the color specified by the <code>r</code>, <code>g</code>, and <code>b</code> fields. </dl></td></tr><tr><td><a name="1102717"> </a><code>r</code> </td><td><a name="1102719"> </a>Amount of red (0 to 255). </td></tr><tr><td><a name="1108401"> </a><code>g</code> </td><td><a name="1108403"> </a>Amount of green (0 to 255). </td></tr><tr><td><a name="1108405"> </a><code>b</code> </td><td><a name="1108407"> </a>Amount of blue (0 to 255). </td></tr></table><table><tr><td></table></div></p><a name="1109661"> </a><h4> Compatibility</h4><dl><a name="1115400"> </a><p></p><dt>This type is defined only if <a href="CompatibilityApdx.html#486514">3.5 New Feature Set</a> is present. </dl><a name="1102613"> </a><h2> Bitmap Constants</h2><p><a name="1039731"> </a> </p><p><div> <table border="3"><caption><B></B></caption><tr><th><a name="1040352"> </a><strong>Constant</strong></th><th><a name="1040354"> </a><strong>Value</strong></th><th><a name="1040356"> </a><strong>Description</strong></th></tr><tr><td><a name="1102369"> </a><code>BitmapVersionZero</code> </td><td><a name="1040360"> </a>0</td><td><a name="1040362"> </a>Uses the version 0 encoding of a bitmap. Version 0 encoding is supported in Palm OS<sup>&#174;</sup> 1.0 and later.</td></tr><tr><td><a name="1040364"> </a><code>BitmapVersionOne</code> </td><td><a name="1040366"> </a>1</td><td><a name="1040368"> </a>Uses the version 1 encoding of a bitmap. Version 1 encoding is supported in Palm OS 3.0 and later. <dl><a name="1121907"> </a><p></p><dt>PalmRez automatically creates version 1 bitmaps unless you've specified a transparency index or a compressed type when creating the bitmap in Constructor.</dl></td></tr><tr><td><a name="1040371"> </a><code>BitmapVersionTwo</code> </td><td><a name="1040373"> </a>2</td><td><a name="1040375"> </a>Uses the version 2 encoding of a bitmap. Palm OS 3.5 supports version 2 bitmaps. Version 2 bitmaps either use the transparency index or are compressed. If you programmatically create a bitmap using <code><a href="Bitmap.html#1102762"></code>BmpCreate<code></a></code>, a version 2 bitmap is created. </td></tr></table><table><tr><td></table></div></p><a name="1109265"> </a><h2> Bitmap Resources</h2><dl><a name="1118257"> </a><p></p><dt>You can create a bitmap resource and include it as part of your application's PRC file. Use the resource type <code>'Tbmp'</code> for most images and the resource type <code>'tAIB'</code> for application icons. Symbolically, these two resource types are <code>bitmapRsc</code> an <code>iconType</code>, respectively. <a name="1118581"> </a><p></p><dt>Note that if you are creating a bitmap or a bitmap family in Constructor, you create a <code>'tbmf'</code> resource (or <code>'taif'</code> resource for icons) and one or more 'PICT' images, and the PalmRez post linker converts them into a single <code>'Tbmp'</code> or <code>'tAIB'</code> resource. Note that the PalmRez post linker takes PICT images even on the Microsoft Windows operating system. </dl><a name="1039737"> </a><h2> Bitmap Functions</h2><a name="1104139"> </a><br> <br> <br><h3> BmpBitsSize</h3><dl><dl><a name="1104216"> </a><h4>Purpose </h4><dl><a name="1104255"> </a><p></p><dt>Return the size of the bitmap's data. </dl><a name="1104284"> </a><h4>Prototype </h4><dl><a name="1104315"> </a><dt><code>UInt16 BmpBitsSize (BitmapType&nbsp;*bitmapP)</code></dl></dl><dl><a name="1104320"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="1113985"> </a><CODE>-&gt; <code>bitmapP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to the bitmap. (See <code><a href="Bitmap.html#1102603"></code>BitmapType<code></a></code>.)<br></TD></TR></TABLE></dl><dl><a name="1104333"> </a><h4>Result </h4><dl><a name="1104360"> </a><p></p><dt>Returns the size in bytes of the bitmap's data, excluding the header and the color table. </dl></dl><dl><a name="1104365"> </a><h4>Comments </h4><dl><a name="1114252"> </a><p></p><dt>This function returns the bitmap's data size even if the bitmap's <code>indirect</code> flag is set. (See <code><a href="Bitmap.html#1109452"></code>BitmapFlagsType<code></a></code>.)<a name="1104372"> </a><p></p><dt>If the bitmap is compressed, this function returns the compressed size of the bitmap. </dl><a name="1104384"> </a><h4>Compatibility </h4><dl><a name="1104419"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#486514">3.5 New Feature Set</a> is present.</dl><a name="1104461"> </a><h4>See Also </h4><dl><a name="1104559"> </a><p></p><dt><code><a href="Bitmap.html#1104074"></code>BmpSize<code></a></code>, <code><a href="Bitmap.html#1104613"></code>BmpColortableSize<code></a></code>, <code><a href="Bitmap.html#1103614"></code>BmpGetBits<code></a></code> </dl></dl></dl><a name="1104613"> </a><br> <br> <br><h3> BmpColortableSize</h3><dl><dl><a name="1104630"> </a><h4>Purpose </h4><dl><a name="1104657"> </a><p></p><dt>Return the size of the bitmap's color table. </dl><a name="1104695"> </a><h4>Prototype </h4><dl><a name="1104742"> </a><dt><code>UInt16 BmpColortableSize (BitmapType&nbsp;*bitmapP)</code></dl></dl><dl><a name="1104811"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="1114289"> </a><CODE>-&gt; <code>bitmapP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to the bitmap. (See <code><a href="Bitmap.html#1102603"></code>BitmapType<code></a></code>.)<br></TD></TR></TABLE></dl><dl><a name="1104910"> </a><h4>Result </h4><dl><a name="1104934"> </a><p></p><dt>Returns the size in bytes of the bitmap's color table or 0 if the bitmap does not use its own color table. </dl></dl><dl><a name="1105125"> </a><h4>Compatibility </h4><dl><a name="1115583"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#486514">3.5 New Feature Set</a> is present.</dl><a name="1105257"> </a><h4>See Also </h4><dl><a name="1105340"> </a><p></p><dt><code><a href="Bitmap.html#1104139"></code>BmpBitsSize<code></a></code>, <code><a href="Bitmap.html#1104074"></code>BmpSize<code></a></code>, <code><a href="Bitmap.html#1103771"></code>BmpGetColortable<code></a></code> </dl></dl></dl><a name="1103219"> </a><br> <br> <br><h3> BmpCompress</h3><dl><dl><a name="1103244"> </a><h4>Purpose </h4><dl><a name="1103259"> </a><p></p><dt>Compress or uncompress a bitmap. </dl><a name="1103264"> </a><h4>Prototype </h4><dl><a name="1103271"> </a><dt><code>Err BmpCompress (BitmapType&nbsp;*bitmapP, BitmapCompressionType&nbsp;compType)</code></dl></dl><dl><a name="1103290"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="1103309"> </a><CODE>-&gt; <code>bitmapP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to the bitmap to compress. (See <code><a href="Bitmap.html#1102603"></code>BitmapType<code></a></code>.)<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="1111105"> </a><CODE>-&gt; <code>compType</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The type of compression to use. (See <code><a href="Bitmap.html#1102424"></code>BitmapCompressionType<code></a></code>.) If set to <code>BitmapCompressionTypeNone</code> and <code>bitmapP</code> is compressed, this function uncompresses the bitmap. <br></TD></TR></TABLE></dl><dl><a name="1111109"> </a><h4>Result </h4><dl><a name="1103387"> </a><p></p><dt>Returns one of the following values:<TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="1111853"> </a><CODE><code>errNone</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Success.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="1111950"> </a><CODE><code>sysErrParamErr</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Either the <code>compType</code> parameter does not specify a compression type or the bitmap is already compressed, is in the storage heap, or represents the screen. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="1112015"> </a><CODE><code>memErrNotEnoughSpace</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>There is not enough memory available to complete the operation. <br></TD></TR></TABLE></dl></dl><dl><a name="1103554"> </a><h4>Comments </h4><dl><a name="1111421"> </a><p></p><dt>This function performs the specified compression and resizes the bitmap's allocated memory. The bitmap must be in the dynamic heap. </dl><a name="1103318"> </a><h4>Compatibility </h4><dl><a name="1115648"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#486514">3.5 New Feature Set</a> is present.</dl></dl></dl><a name="1102762"> </a><br> <br> <br><h3> BmpCreate</h3><dl><dl><a name="1102763"> </a><h4>Purpose </h4><dl><a name="1102766"> </a><p></p><dt>Create a bitmap. </dl><a name="1102772"> </a><h4>Prototype </h4><dl><a name="1121921"> </a><dt><code>BitmapType&nbsp;*BmpCreate (Coord&nbsp;width, Coord&nbsp;height, UInt8&nbsp;depth, ColorTableType&nbsp;*colortableP, UInt16&nbsp;*error)</code></dl></dl><dl><a name="1102797"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="1102804"> </a><CODE>-&gt; <code>width</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The width of the bitmap in pixels. Must not be 0. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="1109962"> </a><CODE>-&gt; <code>height</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The height of the bitmap in pixels. Must not be 0. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="1109991"> </a><CODE>-&gt; <code>depth</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The pixel depth of the bitmap. Must be 1, 2, 4 or 8. This value is used as the <code>pixelSize</code> field of <code><a href="Bitmap.html#1102603"></code>BitmapType<code></a></code>.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="1109992"> </a><CODE>-&gt; <code>colortableP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>A pointer to the color table associated with the bitmap, or <code>NULL</code> if the bitmap should not include a color table. If specified, the number of colors in the color table must match the <code>depth</code> parameter. (2 for 1-bit, 4 for 2-bit, 16 for 4-bit, and 256 for 8-bit). <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="1110014"> </a><CODE>&lt;- <code>error</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Contains the error code if an error occurs. <br></TD></TR></TABLE></dl><dl><a name="1102809"> </a><h4>Result </h4><dl><a name="1102820"> </a><p></p><dt>Returns a pointer to the new bitmap structure (see <code><a href="Bitmap.html#1102603"></code>BitmapType<code></a></code>) or <code>NULL</code> if an error occurs. The parameter <code>error</code> contains one of the following:<TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="1110585"> </a><CODE><code>errNone</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Success.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="1110697"> </a><CODE><code>sysErrParamErr</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The <code>width</code>, <code>height</code>, <code>depth</code>, or <code>colorTableP</code> parameter is invalid. See the descriptions above for acceptable values. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="1110875"> </a><CODE><code>memErrNotEnoughSpace</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>There is not enough memory available to allocate the structure. <br></TD></TR></TABLE></dl></dl><dl><a name="1102825"> </a><h4>Comments </h4><dl><a name="1102832"> </a><p></p><dt>This function creates an uncompressed, non-transparent <code>BitmapVersionTwo</code> bitmap with the width, height, and depth that you specify. <a name="1115937"> </a><p></p><dt>If you pass a color table, the bitmap's <code>hasColorTable</code> flag is set. For performance reasons, attaching a custom color table to a bitmap is strongly discouraged. An alternative is to use the <code><a href="Window.html#999327"></code>WinPalette<code></a></code> command to change the color table as needed, draw the bitmap, and then undo your changes after you have finished displaying the bitmap. <a name="1116049"> </a><p></p><dt>The newly created bitmap contains no data. To create data for this bitmap, use the window drawing functions. First, you must use <code><a href="Window.html#925343"></code>WinCreateBitmapWindow<code></a></code> to create a offscreen window wrapper around the bitmap, then draw to that window:</dl></dl><dl><a name="1116588"> </a><br><code>BitmapType *bmpP;</code><br></dl><dl><a name="1116589"> </a><code>WinHandle win;</code><br><a name="1116604"> </a><code>Err error;</code><br><a name="1125196"> </a><code>RectangleType onScreenRect;</code><br><a name="1116590"> </a><code></code><br><a name="1116603"> </a><code>bmpP = BmpCreate(10, 10, 8, NULL, &amp;error);</code><br><a name="1116605"> </a><code>if (bmpP) {</code><br><a name="1116615"> </a><code>&nbsp&nbsp&nbsp win = WinCreateBitmapWindow(bmpP, &amp;error);</code><br><a name="1116616"> </a><code>&nbsp&nbsp&nbsp if (win) {</code><br><a name="1120834"> </a><code>&nbsp&nbsp&nbsp 	 WinSetDrawWindow(win);</code><br><a name="1116618"> </a><code>&nbsp&nbsp&nbsp 	 WinDrawLines(win, ...);</code><br><a name="1116697"> </a><code>&nbsp&nbsp&nbsp 	 /* etc */</code><br><a name="1125187"> </a><code>&nbsp&nbsp&nbsp 	 WinSetWindowBounds(win, onScreenRect);</code><br><a name="1116617"> </a><code>&nbsp&nbsp&nbsp }</code><br><a name="1116610"> </a><code>}</code><br><dl><a name="1116226"> </a><p></p><dt>You cannot use this function to create a bitmap written directly to a database; that is, you must create the bitmap on the dynamic heap first, then write it to the storage heap. <a name="1116766"> </a><p></p><dt>It's not necessary to use <code>BmpCreate</code> to load a bitmap stored in a resource. Instead, you simply load the resource and lock its handle. The returned pointer is a pointer to a <code>BitmapType</code>. For example: </dl></dl><dl><a name="1116296"> </a><br><code>MemHandle resH = </code><br></dl><dl><a name="1116405"> </a><code>&nbsp&nbsp&nbsp DmGetResource (bitmapRsc, rscID);</code><br><a name="1116297"> </a><code>BitmapType *bitmap = MemHandleLock (resH);</code><br></dl><dl><a name="1102928"> </a><h4>Compatibility </h4><dl><a name="1116702"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#486514">3.5 New Feature Set</a> is present.</dl><a name="1102839"> </a><h4>See Also </h4><dl><a name="1102908"> </a><p></p><dt><code><a href="Bitmap.html#1102992"></code>BmpDelete<code></a></code> </dl></dl></dl><a name="1102992"> </a><br> <br> <br><h3> BmpDelete</h3><dl><dl><a name="1103005"> </a><h4>Purpose </h4><dl><a name="1103028"> </a><p></p><dt>Delete a bitmap structure. </dl><a name="1103037"> </a><h4>Prototype </h4><dl><a name="1103052"> </a><dt><code>Err BmpDelete (BitmapType&nbsp;*bitmapP)</code></dl></dl><dl><a name="1103083"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="1122465"> </a><CODE>-&gt; <code>bitmapP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to the structure of the bitmap to be deleted. (See <code><a href="Bitmap.html#1102603"></code>BitmapType<code></a></code>.)<br></TD></TR></TABLE></dl><dl><a name="1103123"> </a><h4>Result </h4><dl><a name="1103166"> </a><p></p><dt>Returns <code>errNone</code> upon success, <code>sysErrParamErr</code> if the bitmap's <code>forScreen</code> flag is set or the bitmap resides in the storage heap. Returns one of the memory errors if the freeing the pointer fails. </dl></dl><dl><a name="1103187"> </a><h4>Comments </h4><dl><a name="1103210"> </a><p></p><dt>Only delete bitmaps that you've created using <code><a href="Bitmap.html#1102762"></code>BmpCreate<code></a></code>.<a name="1116753"> </a><p></p><dt>You cannot use this function on a bitmap located in a database. To delete a bitmap from a database, use the standard data manager calls. </dl><a name="1103211"> </a><h4>Compatibility </h4><dl><a name="1116824"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#486514">3.5 New Feature Set</a> is present.</dl></dl></dl><a name="1103614"> </a><br> <br> <br><h3> BmpGetBits</h3><dl><dl><a name="1103619"> </a><h4>Purpose </h4><dl><a name="1103634"> </a><p></p><dt>Retrieve the bitmap's data. </dl><a name="1103639"> </a><h4>Prototype </h4><dl><a name="1103652"> </a><dt><code>void *BmpGetBits (BitmapType&nbsp;*bitmapP)</code></dl></dl><dl><a name="1103663"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="1103694"> </a><CODE>-&gt; <code>bitmapP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to the bitmap's structure. (See <code><a href="Bitmap.html#1102603"></code>BitmapType<code></a></code>.)<br></TD></TR></TABLE></dl><dl><a name="1103707"> </a><h4>Result </h4><dl><a name="1103734"> </a><p></p><dt>Returns a pointer to the bitmap's data. </dl></dl><dl><a name="1103747"> </a><h4>Comments </h4><dl><a name="1103762"> </a><p></p><dt>This function returns the bitmap's data even if the bitmap's <code>indirect</code> flag is set. (See <code><a href="Bitmap.html#1109452"></code>BitmapFlagsType<code></a></code>.)</dl><a name="1103763"> </a><h4>Compatibility </h4><dl><a name="1116846"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#486514">3.5 New Feature Set</a> is present.</dl><a name="1117111"> </a><h4>See Also </h4><dl><a name="1117129"> </a><p></p><dt><code><a href="Bitmap.html#1104139"></code>BmpBitsSize<code></a></code> </dl></dl></dl><a name="1103771"> </a><br> <br> <br><h3> BmpGetColortable</h3><dl><dl><a name="1103777"> </a><h4>Purpose </h4><dl><a name="1103788"> </a><p></p><dt>Retrieve the bitmap's color table. </dl><a name="1103793"> </a><h4>Prototype </h4><dl><a name="1103800"> </a><dt><code>ColorTableType *BmpGetColortable (BitmapType&nbsp;*bitmapP)</code></dl></dl><dl><a name="1103813"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="1103824"> </a><CODE>-&gt; <code>bitmapP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>A pointer to the bitmap. See <code><a href="Bitmap.html#1102603"></code>BitmapType<code></a></code>. <br></TD></TR></TABLE></dl><dl><a name="1103852"> </a><h4>Result </h4><dl><a name="1103900"> </a><p></p><dt>Returns a pointer to the color table or <code>NULL</code> if the bitmap uses the system color table. </dl></dl><dl><a name="1103847"> </a><h4>Compatibility </h4><dl><a name="1117068"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#486514">3.5 New Feature Set</a> is present.</dl><a name="1103992"> </a><h4>See Also </h4><dl><a name="1104046"> </a><p></p><dt><code><a href="Bitmap.html#1104613"></code>BmpColortableSize<code></a></code> </dl></dl></dl><a name="1104074"> </a><br> <br> <br><h3> BmpSize</h3><dl><dl><a name="1104079"> </a><h4>Purpose </h4><dl><a name="1104094"> </a><p></p><dt>Return the size of the bitmap. </dl><a name="1104099"> </a><h4>Prototype </h4><dl><a name="1104112"> </a><dt><code>UInt16 BmpSize (BitmapType&nbsp;*bitmapP)</code></dl></dl><dl><a name="1113528"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="1113608"> </a><CODE>-&gt; <code>bitmapP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>A pointer to the bitmap. See <code><a href="Bitmap.html#1102603"></code>BitmapType<code></a></code>. <br></TD></TR></TABLE></dl><dl><a name="1113567"> </a><h4>Result </h4><dl><a name="1113647"> </a><p></p><dt>Returns the size in bytes of the bitmap, including its header and color table (if any). </dl></dl><dl><a name="1113684"> </a><h4>Comments </h4><dl><a name="1113690"> </a><p></p><dt>If the bitmap has its <code>indirect</code> flag set (see <code><a href="Bitmap.html#1109452"></code>BitmapFlagsType<code></a></code>), the bitmap data is not included in the size returned by this function. </dl><a name="1113704"> </a><h4>Compatibility </h4><dl><a name="1117161"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#486514">3.5 New Feature Set</a> is present.</dl><a name="1113716"> </a><h4>See Also </h4><dl><a name="1113719"> </a><p></p><dt><code><a href="Bitmap.html#1104139"></code>BmpBitsSize<code></a></code>, <code><a href="Bitmap.html#1104613"></code>BmpColortableSize<code></a></code> </dl></dl></dl><a name="1102723"> </a><br> <br> <br><h3> ColorTableEntries</h3><dl><dl><a name="1102726"> </a><h4>Purpose </h4><dl><a name="1102736"> </a><p></p><dt>Macro that returns the color table. </dl><a name="1102738"> </a><h4>Prototype </h4><dl><a name="1102740"> </a><dt><code>ColorTableEntries (ctP)</code></dl></dl><dl><a name="1102746"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="1102748"> </a><CODE>-&gt; <code>ctP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>A pointer to a <code><a href="Bitmap.html#1109067"></code>ColorTableType<code></a></code> structure. <br></TD></TR></TABLE></dl><dl><a name="1102750"> </a><h4>Result </h4><dl><a name="1102752"> </a><p></p><dt>Returns an array of <code><a href="Bitmap.html#1102652"></code>RGBColorType<code></a></code> structures, one for each entry in the color table. </dl></dl><dl><a name="1102754"> </a><h4>Comments </h4><dl><a name="1102756"> </a><p></p><dt>You can use this macro to retrieve the RGB values in use by a bitmap. For example: </dl></dl><dl><a name="1117248"> </a><br><code>BitmapType *bmpP;</code><br></dl><dl><a name="1117250"> </a><code>RGBColorType *tableP = </code><br><a name="1117251"> </a><code>&nbsp&nbsp&nbsp ColorTableEntries(BmpGetColorTable(bmpP));</code><br><dl><a name="1117249"> </a><p></p><dt>If you want to retrieve the RGB values in use by the system color table, you can simply use the <code><a href="Window.html#999327"></code>WinPalette<code></a></code> function instead of this macro:</dl></dl><dl><a name="1117198"> </a><br><code>RGBColorType table;</code><br></dl><dl><a name="1117192"> </a><code>Err e;</code><br><a name="1122636"> </a><code></code><br><a name="1122591"> </a><code>/* allocate space for table */</code><br><a name="1122600"> </a><code>e = WinPalette(winPaletteGet, 0, 256, &amp;table);</code><br></dl><dl><a name="1117260"> </a><h4>Compatibility </h4><dl><a name="1117264"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#486514">3.5 New Feature Set</a> is present.</dl><a name="1117255"> </a><h4>See Also </h4><dl><a name="1117257"> </a><p></p><dt><code><a href="Bitmap.html#1103771"></code>BmpGetColortable<code></a></code> <dl><a name="1118728"> </a><p></p><dt><strong></strong></dl></dl></dl></dl><hr><br><center><B>Palm OS SDK Reference</B></center><br><TABLE WIDTH="100%">  <TR>    <TD WIDTH=10%>&nbsp</TD>    <TD WIDTH=20%><a href="AlarmManager.html"><IMG SRC="images/prev.html" BORDER=0 ALT="Previous Page"></TD>    <TD WIDTH=20%><a href="ReferenceTOC.html"><IMG SRC="images/content.gif" BORDER=0 ALT="Table of Contents"></TD>    <TD WIDTH=20%><a href="ReferenceIX.html"><IMG SRC="images/index.gif" BORDER=0 ALT="Index"></TD>    <TD WIDTH=20%><a href="CharacterAttributes.html"><IMG SRC="images/next.html" BORDER=0 ALT="Next Page"></TD>    <TD WIDTH=10%>&nbsp</TD>  </TR></TABLE><br><small><em>This is page 26 of 85 in this book</em></small><hr><br><address><a href="http://www.palmos.com/dev/">Palm Computing Platform Development Zone</a></address><i>Copyright &#169; 2000, Palm, Inc.   All rightsreserved.</i><!-- This file was created with Quadralay WebWorks Publisher 5.0.2 --><!-- --><!-- For more information on how this document, and how the rest of --><!-- this server was created, email devsupp@palm.com --><!-- --><!-- Last updated: 03/27/00 21:28:27 --></body>
<!-- Mirrored from users.fuw.edu.pl/~michalj/palmos/Bitmap.html by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 17 Feb 2015 19:10:01 GMT -->
</html>