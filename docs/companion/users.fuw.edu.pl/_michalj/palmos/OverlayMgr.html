<html>
<!-- Mirrored from users.fuw.edu.pl/~michalj/palmos/OverlayMgr.html by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 17 Feb 2015 19:10:01 GMT -->
<head><title>Overlay Manager</title></head><body bgcolor="#ffffff"><TABLE WIDTH="100%">  <TR>    <TD WIDTH=25%><a href="NotifyMgr.html"><IMG SRC="images/prev.html" BORDER=0 ALT="Previous Page"></TD>    <TD WIDTH=25%><a href="ReferenceTOC.html"><IMG SRC="images/content.gif" BORDER=0 ALT="Table of Contents"></TD>    <TD WIDTH=25%><a href="ReferenceIX.html"><IMG SRC="images/index.gif" BORDER=0 ALT="Index"></TD>    <TD WIDTH=25%><a href="Password.html"><IMG SRC="images/next.html" BORDER=0 ALT="Next Page"></TD>  </TR></TABLE><br><center><B>Palm OS SDK Reference</B></center><hr><br><a name="924905"> </a><h1><IMG SRC="images/PCPplain.gif" ALT="Palm Logo" WIDTH="45" HEIGHT="44"> <a name="924903"> </a>37 Overlay Manager</h1><dl><a name="924906"> </a><p></p><dt>This chapter describes the overlay manager API as declared in the header file <code>OverlayMgr.h</code>. It discusses the following topics:<ul type="SQUARE"><a name="924910"> </a><br><li><a href="OverlayMgr.html#924930">Overlay Manager Data Structures</a><br><a name="924914"> </a><br><li><a href="OverlayMgr.html#991236">Overlay Manager Constants</a><br><a name="924918"> </a><br><li><a href="OverlayMgr.html#991252">Overlay Manager Functions</a><br></ul><a name="924925"> </a><p></p><dt>For more information on the overlay manager, see the section <a href="Localization.html#930283">"Using Overlays to Localize Resources" </a> in the <a href="Localization.html#924904">"Localized Applications"</a> chapter of the <em>Palm OS Programmer's Companion</em>. </dl><a name="924930"> </a><h2> Overlay Manager Data Structures</h2><a name="993056"> </a><h3> OmLocaleType</h3><dl><a name="993058"> </a><p></p><dt>The <code>OmLocaleType</code> struct specifies a locale. <dl><a name="993059"> </a><br><code>typedef struct {</code><br></dl><dl><a name="993060"> </a><code>&nbsp&nbsp&nbsp UInt16	 	 	 	 language;</code><br><a name="993061"> </a><code>&nbsp&nbsp&nbsp UInt16	 	 	 	 country;</code><br><a name="993062"> </a><code>} OmLocaleType;</code><br></dl></dl><a name="993063"> </a><h4> Field Descriptions</h4><p><a name="993073"> </a> </p><p><div> <table border="3"><caption><B></B></caption><tr><td><a name="993066"> </a><code>language</code> </td><td><a name="993991"> </a>The language spoken in the locale. This value is one of the <code>LanguageType</code> constants. </td></tr><tr><td><a name="993070"> </a><code>country</code> </td><td><a name="993072"> </a>The country or region where the language is spoken. This value is one of the <code>CountryType</code> constants. </td></tr></table><table><tr><td></table></div></p><a name="989997"> </a><h3> OmOverlayRscType</h3><dl><a name="1003549"> </a><p></p><dt>The <code>OmOverlayRscType</code> struct specifies an overlay of one resource. You create a resource overlay using the tools provided in the Palm OS<sup>&#174;</sup> SDK. <dl><a name="1003550"> </a><br><code>typedef struct {</code><br></dl><dl><a name="989999"> </a><code>&nbsp&nbsp&nbsp OmOverlayKind	 	 	 	 	 	 	 overlayType;</code><br><a name="990000"> </a><code>&nbsp&nbsp&nbsp UInt32	 	 	 	 	 	 	 rscType;</code><br><a name="990001"> </a><code>&nbsp&nbsp&nbsp UInt16	 	 	 	 	 	 	 rscID;</code><br><a name="990002"> </a><code>&nbsp&nbsp&nbsp UInt32	 	 	 	 	 	 	 rscLength;</code><br><a name="990003"> </a><code>&nbsp&nbsp&nbsp UInt32	 	 	 	 	 	 	 rscChecksum;</code><br><a name="990004"> </a><code>} OmOverlayRscType;</code><br><dl><a name="999028"> </a><p></p><dt>Your code should treat the <code>OmOverlayRscType</code> structure as opaque. Do not attempt to change structure member values directly. </dl></dl></dl><a name="990005"> </a><h4> Field Descriptions</h4><p><a name="990375"> </a> </p><p><div> <table border="3"><caption><B></B></caption><tr><td><a name="990392"> </a><code>overlayType</code> </td><td><a name="990394"> </a>Specifies the action to take with the resource. This can be one of the following: <TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="996203"> </a><CODE><code>omOverlayKindAdd</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT></code>Add a resource that doesn't exist in the base database. Supported in overlay manager versions 3 and up. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="1003055"> </a><CODE><code>omOverlayKindBase</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT></code>Description of a base resource. (This appears only in the base database.) Supported in overlay manager versions 3 and up. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="996261"> </a><CODE><code>omOverlayKindReplace</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT></code>Replace a resource in the base database. <br></TD></TR></TABLE></td></tr><tr><td><a name="990396"> </a><code>rscType</code> </td><td><a name="990398"> </a>The type of the resource to be overlaid. </td></tr><tr><td><a name="990430"> </a><code>rscID</code> </td><td><a name="990432"> </a>The ID of the resource to be overlaid. </td></tr><tr><td><a name="990478"> </a><code>rscLength</code> </td><td><a name="990480"> </a>The size in bytes of the resource to be overlaid as it appears in the base database. </td></tr><tr><td><a name="990494"> </a><code>rscChecksum</code> </td><td><a name="990496"> </a>A checksum of the resource to be overlaid as it appears in the base database. </td></tr></table><table><tr><td></table></div></p><a name="990011"> </a><h3> OmOverlaySpecType</h3><dl><a name="990570"> </a><p></p><dt>The <code>OmOverlaySpecType</code> struct defines a resource of type <code>'ovly'</code>. This resource is required in the overlay database and may optionally exist in the corresponding base database as well. <dl><a name="990012"> </a><br><code>typedef struct {</code><br></dl><dl><a name="990013"> </a><code>&nbsp&nbsp&nbsp UInt16	 	 	 	 	 	 	 	 	 version;</code><br><a name="990014"> </a><code>&nbsp&nbsp&nbsp UInt32	 	 	 	 	 	 	 	 	 flags;</code><br><a name="990015"> </a><code>&nbsp&nbsp&nbsp UInt32	 	 	 	 	 	 	 	 	 baseChecksum;</code><br><a name="990016"> </a><code>&nbsp&nbsp&nbsp OmLocaleType	 	 	 	 	 	 	 	 	 targetLocale;</code><br><a name="990017"> </a><code>&nbsp&nbsp&nbsp UInt32	 	 	 	 	 	 	 	 	 baseDBType;</code><br><a name="990018"> </a><code>&nbsp&nbsp&nbsp UInt32	 	 	 	 	 	 	 	 	 baseDBCreator;</code><br><a name="990019"> </a><code>&nbsp&nbsp&nbsp UInt32	 	 	 	 	 	 	 	 	 baseDBCreateDate;</code><br><a name="990020"> </a><code>&nbsp&nbsp&nbsp UInt32	 	 	 	 	 	 	 	 	 baseDBModDate;</code><br><a name="990021"> </a><code>&nbsp&nbsp&nbsp UInt16	 	 	 	 	 	 	 	 	 numOverlays;</code><br><a name="990022"> </a><code>&nbsp&nbsp&nbsp OmOverlayRscType	 	 	 	 	 	 	 	 	 overlays[0];</code><br><a name="990023"> </a><code>} OmOverlaySpecType;</code><br><dl><a name="999094"> </a><p></p><dt>Your code should treat the <code>OmOverlaySpecType</code> structure as opaque. Do not attempt to change structure member values directly. </dl></dl></dl><a name="990746"> </a><h4> Field Descriptions</h4><p><a name="990024"> </a> </p><p><div> <table border="3"><caption><B></B></caption><tr><td><a name="990703"> </a><code>version</code> </td><td><a name="990705"> </a>Version number for the overlay manager. The current version is <code>omOverlayVersion</code>. </td></tr><tr><td><a name="990707"> </a><code>flags</code> </td><td><a name="990709"> </a>0, or one or more of the following flags: <TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="996430"> </a><CODE><code>omSpecAttrForBase</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT></code>An <code>'ovly'</code> resource in the base database describes the overlay. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="996537"> </a><CODE><code>omSpecAttrStripped</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT></code>Localized resources in the base database are stripped. <br></TD></TR></TABLE></td></tr><tr><td><a name="990711"> </a><code>baseChecksum</code> </td><td><a name="990713"> </a>Checksum of all of the checksum values for the overlaid resources. </td></tr><tr><td><a name="990715"> </a><code>targetLocale</code> </td><td><a name="990717"> </a>Locale of this database. See <code><a href="OverlayMgr.html#993056"></code>OmLocaleType<code></a></code>. </td></tr><tr><td><a name="990719"> </a><code>baseDBType</code> </td><td><a name="990721"> </a>Type of the base database. </td></tr><tr><td><a name="990723"> </a><code>baseDBCreator</code> </td><td><a name="990725"> </a>Creator of the base database.</td></tr><tr><td><a name="990727"> </a><code>baseDBCreateDate</code> </td><td><a name="990729"> </a>Creation date of the base database. </td></tr><tr><td><a name="990731"> </a><code>baseDBModDate</code> </td><td><a name="990733"> </a>Modification date of the base database. </td></tr><tr><td><a name="990735"> </a><code>numOverlays</code> </td><td><a name="990737"> </a>Number of elements in the <code>overlays</code> array. </td></tr><tr><td><a name="990739"> </a><code>overlays</code> </td><td><a name="990741"> </a>An array of <code><a href="OverlayMgr.html#989997"></code>OmOverlayRscType<code></a></code> structs identifying each change or action the overlay is making to a resource. </td></tr></table><table><tr><td></table></div></p><a name="991236"> </a><h2> Overlay Manager Constants</h2><p><a name="991518"> </a> </p><p><div> <table border="3"><caption><B></B></caption><tr><th><a name="991395"> </a><strong>Constant</strong></th><th><a name="991397"> </a><strong>Value</strong></th><th><a name="991399"> </a><strong>Description</strong></th></tr><tr><td><a name="991401"> </a><code>omOverlayVersion</code> </td><td><a name="991403"> </a>0x0004</td><td><a name="991405"> </a>Current version for the overlay manager. This version number controls which types of overlay actions are supported. </td></tr><tr><td><a name="991407"> </a><code>omOverlayDBType</code> </td><td><a name="991409"> </a><code>'ovly'</code></td><td><a name="991411"> </a>Database type for overlay databases.</td></tr><tr><td><a name="991413"> </a><code>omOverlayRscType</code> </td><td><a name="991415"> </a><code>'ovly'</code></td><td><a name="991417"> </a>Symbolic name of an overlay resource that is contained in both the base database and the overlay database. This resource is defined by the <code><a href="OverlayMgr.html#990011"></code>OmOverlaySpecType<code></a></code> struct. </td></tr><tr><td><a name="991419"> </a><code>omOverlayRscID</code> </td><td><a name="991421"> </a>1000</td><td><a name="991423"> </a>Resource ID of the overlay resource in both the base database and the overlay database. </td></tr><tr><td><a name="991425"> </a><code>omFtrCreator</code> </td><td><a name="991427"> </a><code>'ovly'</code></td><td><a name="991429"> </a>Creator value used for the <code>omFtrShowErrorsFlag</code> feature. </td></tr><tr><td><a name="991431"> </a><code>omFtrShowErrorsFlag</code> </td><td><a name="991433"> </a>0</td><td><a name="991435"> </a>Feature that controls the number of error messages displayed by the overlay manager. If this feature is set to <code>true</code>, the overlay manager may display several more error messages when validating an overlay against its base database. This feature only takes effect when the error checking level is set to full (common on debug ROMs, not on release ROMs). Use <code><a href="FeatureManager.html#924918"></code>FtrGet<code></a></code> and <code><a href="FeatureManager.html#925063"></code>FtrSet<code></a></code> to retrieve and set this value. </td></tr></table><table><tr><td></table></div></p><a name="991252"> </a><h2> Overlay Manager Functions</h2><a name="993255"> </a><br> <br> <br><h3> OmGetCurrentLocale</h3><dl><dl><a name="993256"> </a><h4>Purpose </h4><dl><a name="993257"> </a><p></p><dt>Return the current locale. </dl><a name="993258"> </a><h4>Prototype </h4><dl><a name="993259"> </a><dt><code>void OmGetCurrentLocale (OmLocaleType&nbsp;*currentLocale)</code></dl></dl><dl><a name="993260"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="993261"> </a><CODE>&lt;- <code>currentLocale</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Points to an <code><a href="OverlayMgr.html#993056"></code>OmLocaleType<code></a></code> struct that identifies the current locale. <br></TD></TR></TABLE></dl><dl><a name="993262"> </a><h4>Result </h4><dl><a name="993263"> </a><p></p><dt>Returns nothing. </dl></dl><dl><a name="993264"> </a><h4>Comments </h4><dl><a name="997893"> </a><p></p><dt>This function returns the current locale. The current locale controls which overlays are used for resource databases. For example, suppose you have one application and two associated overlays installed, one for US English and one for British English. In this case, if the country specified in the locale returned by this function is <code>cUnitedKingdom</code>, the British English overlay is used for the application. If the country returned is <code>cUnitedStates</code>, the US English overlay is used. </dl><a name="993266"> </a><h4>Compatibility </h4><dl><a name="993267"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#486514">3.5 New Feature Set</a> is present. </dl><a name="993268"> </a><h4>See Also </h4><dl><a name="993269"> </a><p></p><dt><code><a href="OverlayMgr.html#993614"></code>OmGetSystemLocale<code></a></code> </dl></dl></dl><a name="993422"> </a><br> <br> <br><h3> OmGetIndexedLocale</h3><dl><dl><a name="993423"> </a><h4>Purpose </h4><dl><a name="993424"> </a><p></p><dt>Return a system locale by index. </dl><a name="993425"> </a><h4>Prototype </h4><dl><a name="993426"> </a><dt><code>Err OmGetIndexedLocale (UInt16&nbsp;localeIndex, OmLocaleType&nbsp;*theLocale)</code></dl></dl><dl><a name="993427"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="993428"> </a><CODE>-&gt; <code>localeIndex</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Zero-based index of the locale to return. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="993429"> </a><CODE>&lt;- <code>theLocale</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Points to an <code><a href="OverlayMgr.html#993056"></code>OmLocaleType<code></a></code> struct that identifies the locale at that index. <br></TD></TR></TABLE></dl><dl><a name="993430"> </a><h4>Result </h4><dl><a name="993431"> </a><p></p><dt>Returns <code>errNone</code> upon success, or <code>omErrInvalidLocaleIndex</code> if the index is out of bounds. </dl></dl><dl><a name="993432"> </a><h4>Comments </h4><dl><a name="998527"> </a><p></p><dt>You can use this function in a loop to determine how many overlays are installed for system resources. Each system overlay found determines a separate valid system locale. Any locale returned by this function can be sent to <code><a href="OverlayMgr.html#992401"></code>OmSetSystemLocale<code></a></code> to change the system locale. </dl><a name="998161"> </a><h4>Compatibility </h4><dl><a name="998169"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#486514">3.5 New Feature Set</a> is present. </dl><a name="993436"> </a><h4>See Also </h4><dl><a name="993437"> </a><p></p><dt><code><a href="OverlayMgr.html#993614"></code>OmGetSystemLocale<code></a></code> </dl></dl></dl><a name="993525"> </a><br> <br> <br><h3> OmGetRoutineAddress</h3><dl><dl><a name="993526"> </a><h4>Purpose </h4><dl><a name="994496"> </a><p></p><dt>Return the address of an overlay manager function. </dl><a name="993528"> </a><h4>Prototype </h4><dl><a name="993529"> </a><dt><code>void *OmGetRoutineAddress (OmSelector&nbsp;inSelector)</code></dl></dl><dl><a name="993530"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="993531"> </a><CODE>-&gt; <code>inSelector</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>One of the routine selectors defined in <code>OverlayMgr.h. </code><br></TD></TR></TABLE></dl><dl><a name="993532"> </a><h4>Result </h4><dl><a name="994581"> </a><p></p><dt>Returns the address of the corresponding function. Returns <code>NULL</code> if an invalid routine selector is passed. </dl></dl><dl><a name="993534"> </a><h4>Comments </h4><dl><a name="994609"> </a><p></p><dt>You typically use this function to determine whether an overlay manager function exists on the device. As future releases of Palm OS add new functions, older devices with earlier versions of the overlay manager will not implement these newer functions. If <code>OmGetRoutineAddress</code> returns <code>NULL</code>, the function is unavailable. </dl><a name="993536"> </a><h4>Compatibility </h4><dl><a name="998282"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#486514">3.5 New Feature Set</a> is present. </dl></dl></dl><a name="993614"> </a><br> <br> <br><h3> OmGetSystemLocale</h3><dl><dl><a name="993615"> </a><h4>Purpose </h4><dl><a name="993616"> </a><p></p><dt>Return the system locale. </dl><a name="993617"> </a><h4>Prototype </h4><dl><a name="993618"> </a><dt><code>void OmGetSystemLocale (OmLocaleType&nbsp;*systemLocale)</code></dl></dl><dl><a name="993619"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="993620"> </a><CODE>&lt;- <code>systemLocale</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Points to an <code><a href="OverlayMgr.html#993056"></code>OmLocaleType<code></a></code> struct that identifies the system locale. <br></TD></TR></TABLE></dl><dl><a name="993621"> </a><h4>Result </h4><dl><a name="993622"> </a><p></p><dt>Returns nothing. </dl></dl><dl><a name="993623"> </a><h4>Comments </h4><dl><a name="993624"> </a><p></p><dt>You typically don't use this function. Instead, use <code><a href="OverlayMgr.html#993255"></code>OmGetCurrentLocale<code></a></code>, which returns the locale that determines which overlays are used. <a name="1002676"> </a><p></p><dt>The system locale is saved in the storage heap header and persists across soft resets. When the device is reset, the system locale is used to set the current locale. </dl><a name="993625"> </a><h4>Compatibility </h4><dl><a name="998385"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#486514">3.5 New Feature Set</a> is present. </dl><a name="993627"> </a><h4>See Also </h4><dl><a name="993628"> </a><p></p><dt><code><a href="OverlayMgr.html#993255"></code>OmGetCurrentLocale<code></a></code> </dl></dl></dl><a name="991828"> </a><br> <br> <br><h3> OmLocaleToOverlayDBName</h3><dl><dl><a name="991838"> </a><h4>Purpose </h4><dl><a name="995261"> </a><p></p><dt>Return the overlay database's name given the base database name and the locale. </dl><a name="991887"> </a><h4>Prototype </h4><dl><a name="991896"> </a><dt><code>Err OmLocaleToOverlayDBName (const&nbsp;Char&nbsp;*baseDBName, const&nbsp;OmLocaleType&nbsp;*targetLocale, Char&nbsp;*overlayDBName)</code></dl></dl><dl><a name="991935"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="991946"> </a><CODE>-&gt; <code>baseDBName</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The name of the base resource database associated with the overlay. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="992694"> </a><CODE>-&gt; <code>targetLocale</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The locale to which this overlay applies. See <code><a href="OverlayMgr.html#993056"></code>OmLocaleType<code></a></code>. Pass <code>NULL</code> to use the current locale. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="992699"> </a><CODE>&lt;- <code>overlayDBName</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The overlay database name given the base database name and the target locale. This buffer must be at least <code>dmDBNameLength</code> bytes. <br></TD></TR></TABLE></dl><dl><a name="991955"> </a><h4>Result </h4><dl><a name="991982"> </a><p></p><dt>Returns <code>errNone</code> upon success, or <code>omErrUnknownLocale</code> if the <code>targetLocale</code> parameter is invalid. </dl></dl><dl><a name="991991"> </a><h4>Comments </h4><dl><a name="995258"> </a><p></p><dt>The appropriate overlay database name is currently: <a name="995495"> </a><p></p><dt><em>baseDBName</em><code>_</code><em>llCC</em> <a name="1002939"> </a><p></p><dt>where:<TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="995515"> </a><CODE><em>baseDBName</em></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The name of the base database as you passed it in. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="995531"> </a><CODE><em>ll</em></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>A two-character code identifying the language. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="995532"> </a><CODE><em>CC</em></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>A two-character code identifying the country. <br></TD></TR></TABLE><a name="992002"> </a><p></p><dt>The base database name is truncated if necessary to allow for this suffix. <a name="1002812"> </a><p></p><dt>For example, the base database "MemoPad" might have an overlay for US English named "MemoPad_enUS".</dl><a name="992007"> </a><h4>Compatibility </h4><dl><a name="998488"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#486514">3.5 New Feature Set</a> is present. </dl><a name="992022"> </a><h4>See Also </h4><dl><a name="992025"> </a><p></p><dt><code><a href="OverlayMgr.html#992026"></code>OmOverlayDBNameToLocale<code></a></code> </dl></dl></dl><a name="992026"> </a><br> <br> <br><h3> OmOverlayDBNameToLocale</h3><dl><dl><a name="992027"> </a><h4>Purpose </h4><dl><a name="995819"> </a><p></p><dt>Return an overlay database's locale given its name. </dl><a name="992051"> </a><h4>Prototype </h4><dl><a name="990297"> </a><dt><code>Err OmOverlayDBNameToLocale (const&nbsp;Char&nbsp;*overlayDBName, OmLocaleType&nbsp;*overlayLocale)</code></dl></dl><dl><a name="992064"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="992085"> </a><CODE>-&gt; <code>overlayDBName</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The name of the overlay database. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="992747"> </a><CODE>&lt;- <code>overlayLocale</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Points to an <code><a href="OverlayMgr.html#993056"></code>OmLocaleType<code></a></code> structure identifying the overlay's locale. <br></TD></TR></TABLE></dl><dl><a name="992116"> </a><h4>Result </h4><dl><a name="992117"> </a><p></p><dt>Returns <code>errNone</code> upon success, <code>omErrBadOverlayDBName</code> if the string <code>overlayDBName</code> is not long enough to have a locale suffix, or <code>omErrUnknownLocale</code> if the locale cannot be determined. </dl></dl><dl><a name="992120"> </a><h4>Compatibility </h4><dl><a name="998497"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#486514">3.5 New Feature Set</a> is present. </dl><a name="992122"> </a><h4>See Also </h4><dl><a name="992123"> </a><p></p><dt><code><a href="OverlayMgr.html#991828"></code>OmLocaleToOverlayDBName<code></a></code> </dl></dl></dl><a name="992401"> </a><br> <br> <br><h3> OmSetSystemLocale</h3><dl><dl><a name="992402"> </a><h4>Purpose </h4><dl><a name="990318"> </a><p></p><dt>Set the system locale and reset the device. </dl><a name="992405"> </a><h4>Prototype </h4><dl><a name="990321"> </a><dt><code>Err OmSetSystemLocale<br>(const&nbsp;OmLocaleType&nbsp;*systemLocale)</code></dl></dl><dl><a name="992408"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="992411"> </a><CODE>-&gt; <code>systemLocale</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>An <code><a href="OverlayMgr.html#993056"></code>OmLocaleType<code></a></code> structure specifying the locale to switch the system to. <br></TD></TR></TABLE></dl><dl><a name="992418"> </a><h4>Result </h4><dl><a name="992419"> </a><p></p><dt>Returns <code>errNone</code> upon success, or one of the following if an error occurs: <TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="998903"> </a><CODE><code>omErrUnknownLocale</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>There is no system overlay for <code>systemLocale</code>. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="998931"> </a><CODE><code>omErrInvalidLocale</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT></code>The system overlay for <code>systemLocale</code> has been found but is invalid. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="998972"> </a><CODE><code>dmErrInvalidParam</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>An error occurred while opening the overlay. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="998979"> </a><CODE><code>dmErrMemError</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>A memory error occurred while opening the overlay. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="998980"> </a><CODE><code>dmErrDatabaseOpen</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The system overlay was already open. <br></TD></TR></TABLE></dl></dl><dl><a name="998984"> </a><h4>Comments </h4><dl><a name="992421"> </a><p></p><dt>This function changes the system locale to the specified locale if it exists. It first determines that the system overlay exists for the requested locale and that it matches the base system database. If so, it updates the system locale information saved in the storage heap header and resets the device. After the device is reset, the current locale is set to the system locale. <a name="1002916"> </a><p></p><dt>A Palm OS device has a default system locale hard-coded into the ROM. This locale is used to set the system locale after a hard reset or any time that the storage heap header is invalid. The storage heap header is typically only invalid when the device is turned on for the first time. </dl><a name="992422"> </a><h4>Compatibility </h4><dl><a name="998514"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#486514">3.5 New Feature Set</a> is present. </dl><a name="992424"> </a><h4>See Also </h4><dl><a name="992425"> </a><p></p><dt><code><a href="OverlayMgr.html#993614"></code>OmGetSystemLocale<code></a></code> <dl><a name="1000868"> </a><p></p><dt><strong></strong></dl></dl></dl></dl><hr><br><center><B>Palm OS SDK Reference</B></center><br><TABLE WIDTH="100%">  <TR>    <TD WIDTH=10%>&nbsp</TD>    <TD WIDTH=20%><a href="NotifyMgr.html"><IMG SRC="images/prev.html" BORDER=0 ALT="Previous Page"></TD>    <TD WIDTH=20%><a href="ReferenceTOC.html"><IMG SRC="images/content.gif" BORDER=0 ALT="Table of Contents"></TD>    <TD WIDTH=20%><a href="ReferenceIX.html"><IMG SRC="images/index.gif" BORDER=0 ALT="Index"></TD>    <TD WIDTH=20%><a href="Password.html"><IMG SRC="images/next.html" BORDER=0 ALT="Next Page"></TD>    <TD WIDTH=10%>&nbsp</TD>  </TR></TABLE><br><small><em>This is page 39 of 85 in this book</em></small><hr><br><address><a href="http://www.palmos.com/dev/">Palm Computing Platform Development Zone</a></address><i>Copyright &#169; 2000, Palm, Inc.   All rightsreserved.</i><!-- This file was created with Quadralay WebWorks Publisher 5.0.2 --><!-- --><!-- For more information on how this document, and how the rest of --><!-- this server was created, email devsupp@palm.com --><!-- --><!-- Last updated: 03/27/00 21:28:41 --></body>
<!-- Mirrored from users.fuw.edu.pl/~michalj/palmos/OverlayMgr.html by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 17 Feb 2015 19:10:01 GMT -->
</html>