<html>
<!-- Mirrored from users.fuw.edu.pl/~michalj/palmos/ProgressManager.html by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 17 Feb 2015 19:10:01 GMT -->
<head><title>Progress Manager</title></head><body bgcolor="#ffffff"><TABLE WIDTH="100%">  <TR>    <TD WIDTH=25%><a href="PrivateRecords.html"><IMG SRC="images/prev.html" BORDER=0 ALT="Previous Page"></TD>    <TD WIDTH=25%><a href="ReferenceTOC.html"><IMG SRC="images/content.gif" BORDER=0 ALT="Table of Contents"></TD>    <TD WIDTH=25%><a href="ReferenceIX.html"><IMG SRC="images/index.gif" BORDER=0 ALT="Index"></TD>    <TD WIDTH=25%><a href="Scrollbar.html"><IMG SRC="images/next.html" BORDER=0 ALT="Next Page"></TD>  </TR></TABLE><br><center><B>Palm OS SDK Reference</B></center><hr><br><a name="924904"> </a><h1><IMG SRC="images/PCPplain.gif" ALT="Palm Logo" WIDTH="45" HEIGHT="44"> <a name="924902"> </a>16 Progress Manager</h1><dl><a name="924905"> </a><p></p><dt>This chapter provides reference material for the Progress Manager. <ul type="SQUARE"><a name="924909"> </a><br><li><a href="ProgressManager.html#924920">Progress Manager Functions</a><br><a name="924913"> </a><br><li><a href="ProgressManager.html#925180">Application-Defined Functions</a><br></ul><a name="924915"> </a><p></p><dt>The header file <code>Progress.h</code> declares the API that this chapter describes. For more information on the progress manager, see the section <a href="UserInterface.html#925203">"Progress Dialogs"</a> in the <em>Palm OS Programmer's Companion</em>. </dl><a name="924920"> </a><h2> Progress Manager Functions</h2><a name="924923"> </a><br> <br> <br><h3> PrgHandleEvent</h3><dl><dl><a name="924924"> </a><h4>Purpose </h4><dl><a name="924925"> </a><p></p><dt>Handles events related to the active progress dialog.</dl><a name="924926"> </a><h4>Prototype </h4><dl><a name="924927"> </a><dt><code>Boolean PrgHandleEvent (ProgressPtr&nbsp;prgP, EventType&nbsp;*eventP)</code></dl></dl><dl><a name="924928"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="924929"> </a><CODE>-&gt; <code>prgP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to a progress structure created by <code><a href="ProgressManager.html#924979"></code>PrgStartDialog<code></a></code>.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="924933"> </a><CODE>-&gt; <code>eventP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to an event. You can pass a <code>NULL</code> event to cause this function to immediately call your <code><a href="ProgressManager.html#925183"></code>PrgCallbackFunc<code></a></code> function and then update the dialog (for example, after you call <code>PrgUpdateDialog</code>).<br></TD></TR></TABLE></dl><dl><a name="924937"> </a><h4>Result </h4><dl><a name="924938"> </a><p></p><dt>Returns <code>true</code> if the system handled the event. If it returns <code>false</code>, you should check if the user canceled the dialog by calling <code><a href="ProgressManager.html#925145"></code>PrgUserCancel<code></a></code>.</dl></dl><dl><a name="924942"> </a><h4>Comments </h4><dl><a name="924946"> </a><p></p><dt>Use this function instead of <code><a href="SystemManager.html#925364"></code>SysHandleEvent<code></a></code> when you have a progress dialog. <code>PrgHandleEvent</code> internally calls <code>SysHandleEvent</code> as needed.<a name="924947"> </a><p></p><dt>Note that the auto power-off feature of the system is automatically disabled when you use this function, unless the dialog is just displaying an error. This function also prevents <code>appStopEvent</code> events.<a name="924948"> </a><p></p><dt>If an update to the dialog is pending (from a call to <code><a href="ProgressManager.html#925099"></code>PrgUpdateDialog<code></a></code>, for example) this function handles that event and causes the dialog to be updated. As part of this process, the <code>textCallback</code> function you specified in your call to <code><a href="ProgressManager.html#924979"></code>PrgStartDialog<code></a></code> is called. Your <code>textCallback</code> function should set the <code>textP</code> buffer in the <code>PrgCallbackData</code> structure with the new message to be displayed in the progress dialog. Optionally, you can also set the <code>bitmapId</code> field to include an icon in the update dialog. For more information about the <code>textCallback</code> function, see the section "<a href="ProgressManager.html#925180">Application-Defined Functions</a>."</dl><a name="924958"> </a><h4>Compatibility </h4><dl><a name="924962"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl><a name="924963"> </a><h4>See Also </h4><dl><a name="924973"> </a><p></p><dt><code><a href="ProgressManager.html#924979"></code>PrgStartDialog<code></a></code>, <code><a href="ProgressManager.html#925063"></code>PrgStopDialog<code></a></code>, <code><a href="ProgressManager.html#925099"></code>PrgUpdateDialog<code></a></code>, <code><a href="ProgressManager.html#925145"></code>PrgUserCancel<code></a></code> </dl></dl></dl><a name="924979"> </a><br> <br> <br><h3> PrgStartDialog</h3><dl><dl><a name="924980"> </a><h4>Purpose </h4><dl><a name="924981"> </a><p></p><dt>Displays a progress dialog that can be updated.</dl><a name="924982"> </a><h4>Prototype </h4><dl><a name="924983"> </a><dt><code>ProgressPtr PrgStartDialog (Char&nbsp;*title, PrgCallbackFunc&nbsp;textCallback, void&nbsp;*userDataP)</code></dl></dl><dl><a name="924984"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="924985"> </a><CODE>-&gt; <code>title</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to a title for the progress dialog. Must be a <code>NULL</code>-terminated string that is no longer than <code>progressMaxTitle</code> (20).<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="924986"> </a><CODE>-&gt; <code>textCallback</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to a callback function that supplies the text and icons for the current progress state. See <code><a href="ProgressManager.html#925183"></code>PrgCallbackFunc<code></a></code>.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="924990"> </a><CODE>-&gt; <code>userDataP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>A pointer to data that you need to access in the callback function. This address gets passed directly to your function. <br></TD></TR></TABLE></dl><dl><a name="924991"> </a><h4>Result </h4><dl><a name="924992"> </a><p></p><dt>A pointer to a progress structure. This pointer must be passed to other progress manager functions and <strong>must</strong> be released by calling <a href="ProgressManager.html#925063">PrgStopDialog</a>. <code>NULL</code> is returned if the system is unable to allocate the progress structure.</dl></dl><dl><a name="924996"> </a><h4>Comments </h4><dl><a name="924997"> </a><p></p><dt>The dialog created by this function can be updated by another process via the <a href="ProgressManager.html#925099">PrgUpdateDialog</a> function. The dialog can contain a Cancel or OK button. The initial dialog defaults to stage 0 and calls the <code>textCallback</code> function to get the initial text and icon data for the progress dialog.<a name="925001"> </a><p></p><dt>This function saves the screen bits behind the progress dialog, and these are restored when you call <code>PrgStopDialog</code>. Because of this, you should minimize changes to the screen while the progress dialog is displayed, otherwise, the restored bits may not match with what is currently being displayed.</dl><a name="925002"> </a><h4>Compatibility </h4><dl><a name="925006"> </a><p></p><dt>This version of the function is available only if <a href="CompatibilityApdx.html#484253">3.2 New Feature Set</a> is present. On earlier systems, <code>PrgStartDialog</code> has the prototype shown for <code><a href="ProgressManager.html#925026"></code>PrgStartDialogV31<code></a></code>. </dl><a name="925010"> </a><h4>See Also </h4><dl><a name="925020"> </a><p></p><dt><code><a href="ProgressManager.html#924923"></code>PrgHandleEvent<code></a></code>, <code><a href="ProgressManager.html#925063"></code>PrgStopDialog<code></a></code>, <code><a href="ProgressManager.html#925099"></code>PrgUpdateDialog<code></a></code>, <code><a href="ProgressManager.html#925145"></code>PrgUserCancel<code></a></code> </dl></dl></dl><a name="925026"> </a><br> <br> <br><h3> PrgStartDialogV31</h3><dl><dl><a name="925027"> </a><h4>Purpose </h4><dl><a name="925028"> </a><p></p><dt>Displays a progress dialog that can be updated.</dl><a name="925029"> </a><h4>Prototype </h4><dl><a name="925030"> </a><dt><code>ProgressPtr PrgStartDialogV31 (Char&nbsp;*title, PrgCallbackFunc&nbsp;textCallback)</code></dl></dl><dl><a name="925031"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925032"> </a><CODE>-&gt; <code>title</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to a title for the progress dialog. Must be a <code>NULL</code>-terminated string that is no longer than <code>progressMaxTitle</code> (20).<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925033"> </a><CODE>-&gt; <code>textCallback</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to a callback function that supplies the text and icons for the current progress state. See <code><a href="ProgressManager.html#925183"></code>PrgCallbackFunc<code></a></code>.<br></TD></TR></TABLE></dl><dl><a name="925037"> </a><h4>Result </h4><dl><a name="925038"> </a><p></p><dt>A pointer to a progress structure. This pointer must be passed to other progress manager functions and <strong>must</strong> be released by calling <a href="ProgressManager.html#925063">PrgStopDialog</a>. <code>NULL</code> is returned if the system is unable to allocate the progress structure.</dl></dl><dl><a name="925042"> </a><h4>Compatibility </h4><dl><a name="925046"> </a><p></p><dt>This function corresponds to version of <code><a href="ProgressManager.html#924979"></code>PrgStartDialog<code></a></code> available on Palm OS<sup>&#174;</sup> 3.0 and Palm OS 3.1.</dl><a name="925047"> </a><h4>See Also </h4><dl><a name="925057"> </a><p></p><dt><code><a href="ProgressManager.html#924923"></code>PrgHandleEvent<code></a></code>, <code><a href="ProgressManager.html#925063"></code>PrgStopDialog<code></a></code>, <code><a href="ProgressManager.html#925099"></code>PrgUpdateDialog<code></a></code>, <code><a href="ProgressManager.html#925145"></code>PrgUserCancel<code></a></code> </dl></dl></dl><a name="925063"> </a><br> <br> <br><h3> PrgStopDialog</h3><dl><dl><a name="925064"> </a><h4>Purpose </h4><dl><a name="925065"> </a><p></p><dt>Releases memory used by the progress dialog and restores the screen to its initial state.</dl><a name="925066"> </a><h4>Prototype </h4><dl><a name="925067"> </a><dt><code>void PrgStopDialog (ProgressPtr&nbsp;prgP, Boolean&nbsp;force)</code></dl></dl><dl><a name="925068"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925069"> </a><CODE>-&gt; <code>prgP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to a progress structure created by <code><a href="ProgressManager.html#924979"></code>PrgStartDialog<code></a></code>.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925073"> </a><CODE>-&gt; <code>force</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT><code>true</code> removes the progress dialog immediately, <code>false</code> causes the system to wait until the user confirms an error, if one is displayed.<br></TD></TR></TABLE></dl><dl><a name="925074"> </a><h4>Result </h4><dl><a name="925075"> </a><p></p><dt>Returns nothing.</dl></dl><dl><a name="925076"> </a><h4>Comments </h4><dl><a name="925077"> </a><p></p><dt>If the progress dialog is in a state where it is displaying an error message to the user, this function normally waits for the user to confirm the dialog before it removes the dialog. If you specify <code>true</code> for the <code>force</code> parameter, this causes the system to remove the dialog immediately.</dl><a name="925078"> </a><h4>Compatibility </h4><dl><a name="925082"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl><a name="925083"> </a><h4>See Also </h4><dl><a name="925093"> </a><p></p><dt><code><a href="ProgressManager.html#924923"></code>PrgHandleEvent<code></a></code>, <code><a href="ProgressManager.html#924979"></code>PrgStartDialog<code></a></code>, <code><a href="ProgressManager.html#925099"></code>PrgUpdateDialog<code></a></code>, <code><a href="ProgressManager.html#925145"></code>PrgUserCancel<code></a></code> </dl></dl></dl><a name="925099"> </a><br> <br> <br><h3> PrgUpdateDialog</h3><dl><dl><a name="925100"> </a><h4>Purpose </h4><dl><a name="925101"> </a><p></p><dt>Updates the status of the current progress dialog.</dl><a name="925102"> </a><h4>Prototype </h4><dl><a name="925103"> </a><dt><code>void PrgUpdateDialog (ProgressPtr&nbsp;prgP, UInt16&nbsp;err, UInt16&nbsp;stage,&nbsp;Char&nbsp;*messageP, Boolean&nbsp;updateNow)</code></dl></dl><dl><a name="925104"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925105"> </a><CODE>-&gt; <code>prgP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to a progress structure created by <code><a href="ProgressManager.html#924979"></code>PrgStartDialog<code></a></code>.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925109"> </a><CODE>-&gt; <code>err</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>If non-zero, causes the dialog to go into error mode, to display an error message with only an OK button.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925110"> </a><CODE>-&gt; <code>stage</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Current stage of progress. The callback function can use this to determine the correct string to display in the updated dialog.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925111"> </a><CODE>-&gt; <code>messageP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Extra text that may be useful in displaying the progress for this stage. Used by the callback function, which can append it to the base message that is based on the stage.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925112"> </a><CODE>-&gt; <code>updateNow</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>If <code>true</code>, the dialog is immediately updated. Otherwise, the dialog is updated on the next call to <code><a href="ProgressManager.html#924923"></code>PrgHandleEvent<code></a></code>.<br></TD></TR></TABLE></dl><dl><a name="925116"> </a><h4>Result </h4><dl><a name="925117"> </a><p></p><dt>Returns nothing.</dl></dl><dl><a name="925118"> </a><h4>Comments </h4><dl><a name="925120"> </a><p></p><dt>For more information about how the parameters are used and the callback function, see the section "<a href="ProgressManager.html#925180">Application-Defined Functions</a>."</dl><a name="925124"> </a><h4>Compatibility </h4><dl><a name="925128"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl><a name="925129"> </a><h4>See Also </h4><dl><a name="925139"> </a><p></p><dt><code><a href="ProgressManager.html#924923"></code>PrgHandleEvent<code></a></code>, <code><a href="ProgressManager.html#924979"></code>PrgStartDialog<code></a></code>, <code><a href="ProgressManager.html#925063"></code>PrgStopDialog<code></a></code>, <code><a href="ProgressManager.html#925145"></code>PrgUserCancel<code></a></code></dl></dl></dl><a name="925145"> </a><br> <br> <br><h3> PrgUserCancel</h3><dl><dl><a name="925146"> </a><h4>Purpose </h4><dl><a name="925147"> </a><p></p><dt>Macro that returns <code>true</code> if the user cancelled the process via the progress dialog.</dl><a name="925148"> </a><h4>Prototype </h4><dl><a name="925149"> </a><dt><code>PrgUserCancel (prgP)</code></dl></dl><dl><a name="925150"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925151"> </a><CODE>-&gt; <code>prgP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to a progress structure (<code>ProgressPtr</code>) created by <code><a href="ProgressManager.html#924979"></code>PrgStartDialog<code></a></code>.<br></TD></TR></TABLE></dl><dl><a name="925155"> </a><h4>Result </h4><dl><a name="925156"> </a><p></p><dt>Returns the value of the <code>cancel</code> field in the progress structure (as a <code>UInt16</code>).</dl></dl><dl><a name="925157"> </a><h4>Comments </h4><dl><a name="925158"> </a><p></p><dt>This is a macro you can use to check if the user cancelled the process. If the user did cancel, you can change the progress dialog text to something like "Cancelling," or "Disconnecting," or whatever is appropriate for your application. Then you should cancel the process, end the communication session, or do whatever processing is necessary.</dl><a name="925159"> </a><h4>Compatibility </h4><dl><a name="925163"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl><a name="925164"> </a><h4>See Also </h4><dl><a name="925174"> </a><p></p><dt><code><a href="ProgressManager.html#924923"></code>PrgHandleEvent<code></a></code>, <code><a href="ProgressManager.html#924979"></code>PrgStartDialog<code></a></code>, <code><a href="ProgressManager.html#925063"></code>PrgStopDialog<code></a></code>, <code><a href="ProgressManager.html#925099"></code>PrgUpdateDialog<code></a></code></dl></dl></dl><a name="925180"> </a><h2> Application-Defined Functions</h2><a name="925183"> </a><br> <br> <br><h3> PrgCallbackFunc</h3><dl><dl><a name="925184"> </a><h4>Purpose </h4><dl><a name="925185"> </a><p></p><dt>Supplies the text and icons for the current progress state.</dl><a name="925186"> </a><h4>Prototype </h4><dl><a name="925187"> </a><dt><code>Boolean (*PrgCallbackFunc) (PrgCallbackDataPtr&nbsp;cbP)</code></dl></dl><dl><a name="925188"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925190"> </a><CODE>&lt;-&gt; <code>cbP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>A pointer to a <code>PrgCallbackData</code> structure. See below. <br></TD></TR></TABLE></dl><dl><a name="925191"> </a><h4>Result </h4><dl><a name="925192"> </a><p></p><dt>Returns <code>true</code> if the progress dialog should be updated using the values you specified in the <code>PrgCallbackData</code> structure. If you specify <code>false</code>, the dialog is still updated, but with default status messages. (Returning <code>false</code> is not recommended.)</dl></dl><dl><a name="925193"> </a><h4>Comments </h4><dl><a name="925194"> </a><p></p><dt>This is a callback function that you specify when you call <code><a href="ProgressManager.html#924979"></code>PrgStartDialog<code></a></code>. The callback function is called by <code><a href="ProgressManager.html#924923"></code>PrgHandleEvent<code></a></code> when it needs current progress information to display in the progress dialog. <a name="925201"> </a><p></p><dt>The system passes this function one parameter, a pointer to a <code>PrgCallbackData</code> structure. Here are the important fields in that data structure (note that -&gt; indicates you set the field in the <code>textCallback</code> function):<TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925203"> </a><CODE>&lt;- <code>UInt16 stage</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Current stage (passed from <code>PrgUpdateDialog</code>).<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925204"> </a><CODE>&lt;-&gt; <code>Char *textP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Buffer to hold the text to display in the updated dialog. You might want to look up a message in a resource file, based on the value in the <code>stage</code> field. Also, you should append the additional text in the <code>message</code> field, to form the full string to display. Be sure to include a null terminator at the end of the string you return, and don't exceed the length in <code>textLen</code>.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925205"> </a><CODE>&lt;- <code>UInt16 textLen</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Maximum length of the text buffer <code>textP</code>. Note that this value is set for you by the caller. Be careful not to exceed this length in <code>textP</code>.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925206"> </a><CODE>&lt;- <code>Char *message</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Additional text to display in the dialog (from the <code>messageP</code> parameter to <code>PrgUpdateDialog</code>). This should be no longer than <code>progressMaxMessage</code> (128).<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925207"> </a><CODE>&lt;- <code>Err error</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Current error (passed from the <code>err</code> parameter to <code>PrgUpdateDialog</code>).<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925208"> </a><CODE>-&gt; <code>UInt16 bitmapId</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Resource ID of the bitmap to display in the progress dialog, if any.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925209"> </a><CODE>&lt;- <code>UInt16 canceled:1</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT><code>true</code> if user has pressed the cancel button.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925210"> </a><CODE>&lt;- <code>UInt16 showDetails:1</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT><code>true</code> if user pressed the down arrow button on the Palm device for more details. (Because this is a non-standard user interface technique, you shouldn't use this feature to display details that users need under normal conditions. It's more for debugging purposes.)<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925211"> </a><CODE>-&gt; <code>UInt16 textChanged:1</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>If <code>true</code>, then update text (defaults to <code>true</code>). You can set this to <code>false</code> to avoid an update to the text.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925212"> </a><CODE>&lt;- <code>UInt16 timedOut:1</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT><code>true</code> if update caused by a timeout.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925213"> </a><CODE>&lt;-&gt; <code>UInt32 timeout</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Timeout in ticks to force next update. After this number of ticks, an update is automatically triggered (which sets the <code>timedOut</code> flag). You can use this feature to do a simple animation effect. Note that you must set the timeout for <code>EvtGetEvent</code> to a value that is equal to or less than this value, otherwise you won't get update events as frequently as you expect.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925214"> </a><CODE>-&gt; <code>UInt16 delay:1</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>If <code>true</code>, delay for one second after updating the dialog. Use this value when you are displaying the final progress message so that users have a chance to see the message before the dialog closes. This field is available only if <a href="CompatibilityApdx.html#484253">3.2 New Feature Set</a> is present. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925218"> </a><CODE>&lt;- <code>void *userDataP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>A pointer to any application-defined data that the function needs to access. You specify this pointer as a parameter to <code><a href="ProgressManager.html#924979"></code>PrgStartDialog<code></a></code> if the callback function needs to access some application data but does not have access to application globals. This field is available only if <a href="CompatibilityApdx.html#484253">3.2 New Feature Set</a> is present. <br></TD></TR></TABLE><a name="925225"> </a><p></p><dt>In this function, you should set the value of the <code>textP</code> buffer to the string you want to display in the progress dialog when it is updated. You can use the value in the <code>stage</code> field to look up a message in a string resource. You also might want to append the text in the <code>message</code> field to your base string. Typically, the <code>message</code> field would contain more dynamic information that depends on a user selection, such as a phone number, device name, or network identifier, etc.<a name="925226"> </a><p></p><dt>For example, the <code>PrgUpdateDialog</code> function might have been called with a <code>stage</code> of 1 and a <code>messageP</code> parameter value of a phone number string, "555-1212". Based on the stage, you might find the string "Dialing" in a string resource, and append the phone number, to form the final text "Dialing 555-1212" that you place in the text buffer <code>textP</code>.<a name="925227"> </a><p></p><dt>Keeping the static strings corresponding to various stages in a resource makes it easier to localize your application. More dynamic information can be passed in via the <code>messageP</code> parameter to <code>PrgUpdateDialog</code>.<a name="925228"> </a><blockquote><hr><strong>NOTE: &nbsp</strong><p></p>This function is called only if the parameters passed to <code>PrgUpdateDialog</code> have changed from the last time it was called. If <code>PrgUpdateDialog</code> is called twice with exactly the same parameters, the <code>textCallback</code> function is called only once. <hr><br></blockquote><p><a name="925238"> </a> <strong></strong></p></dl></dl></dl><hr><br><center><B>Palm OS SDK Reference</B></center><br><TABLE WIDTH="100%">  <TR>    <TD WIDTH=10%>&nbsp</TD>    <TD WIDTH=20%><a href="PrivateRecords.html"><IMG SRC="images/prev.html" BORDER=0 ALT="Previous Page"></TD>    <TD WIDTH=20%><a href="ReferenceTOC.html"><IMG SRC="images/content.gif" BORDER=0 ALT="Table of Contents"></TD>    <TD WIDTH=20%><a href="ReferenceIX.html"><IMG SRC="images/index.gif" BORDER=0 ALT="Index"></TD>    <TD WIDTH=20%><a href="Scrollbar.html"><IMG SRC="images/next.html" BORDER=0 ALT="Next Page"></TD>    <TD WIDTH=10%>&nbsp</TD>  </TR></TABLE><br><small><em>This is page 18 of 85 in this book</em></small><hr><br><address><a href="http://www.palmos.com/dev/">Palm Computing Platform Development Zone</a></address><i>Copyright &#169; 2000, Palm, Inc.   All rightsreserved.</i><!-- This file was created with Quadralay WebWorks Publisher 5.0.2 --><!-- --><!-- For more information on how this document, and how the rest of --><!-- this server was created, email devsupp@palm.com --><!-- --><!-- Last updated: 03/27/00 21:28:21 --></body>
<!-- Mirrored from users.fuw.edu.pl/~michalj/palmos/ProgressManager.html by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 17 Feb 2015 19:10:01 GMT -->
</html>