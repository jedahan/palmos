<html>
<!-- Mirrored from users.fuw.edu.pl/~michalj/palmos/FileStreaming.html by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 17 Feb 2015 19:10:01 GMT -->
<head><title>File Streaming</title></head><body bgcolor="#ffffff"><TABLE WIDTH="100%">  <TR>    <TD WIDTH=25%><a href="FeatureManager.html"><IMG SRC="images/prev.html" BORDER=0 ALT="Previous Page"></TD>    <TD WIDTH=25%><a href="ReferenceTOC.html"><IMG SRC="images/content.gif" BORDER=0 ALT="Table of Contents"></TD>    <TD WIDTH=25%><a href="ReferenceIX.html"><IMG SRC="images/index.gif" BORDER=0 ALT="Index"></TD>    <TD WIDTH=25%><a href="FloatManager.html"><IMG SRC="images/next.html" BORDER=0 ALT="Next Page"></TD>  </TR></TABLE><br><center><B>Palm OS SDK Reference</B></center><hr><br><a name="924903"> </a><h1><IMG SRC="images/PCPplain.gif" ALT="Palm Logo" WIDTH="45" HEIGHT="44"> <a name="924902"> </a>30 File Streaming</h1><dl><a name="924904"> </a><p></p><dt>This chapter provides reference material for the file streaming API.<ul type="SQUARE"><a name="924908"> </a><br><li><a href="FileStreaming.html#924923">File Streaming Constants</a><br><a name="924912"> </a><br><li><a href="FileStreaming.html#924989">File Streaming Functions</a><br><a name="924916"> </a><br><li><a href="FileStreaming.html#925705">File Streaming Error Codes</a><br></ul><a name="924918"> </a><p></p><dt>The header file <code>FileStream.h</code> declares the API that this chapter describes. For more information on file streaming, see the chapter <a href="FilesAndDatabases.html#924904">"Files and Databases"</a> in the <em>Palm OS Programmer's Companion</em>. </dl><a name="924923"> </a><h2> File Streaming Constants</h2><a name="924925"> </a><h3> Primary Open Mode Constants</h3><dl><a name="924927"> </a><p></p><dt>This section lists constants passed in the <code>openMode</code> parameter to the <code><a href="FileStreaming.html#925457"></code>FileOpen<code></a></code> function. These constants specify the mode in which a file stream is opened. <a name="924934"> </a><p></p><dt>For each file stream, you must pass to the <code><a href="FileStreaming.html#925457"></code>FileOpen<code></a></code> function only one of the primary mode selectors listed.</dl><a name="924935"> </a><h4> Constant Values</h4><p><a name="924953"> </a> </p><p><div> <table border="3"><caption><B></B></caption><tr><td><a name="924938"> </a><code>fileModeReadOnly</code> </td><td><a name="924940"> </a>Open for read-only access</td></tr><tr><td><a name="924942"> </a><code>fileModeReadWrite</code> </td><td><a name="924944"> </a>Open/create for read/write access, discarding any previous version of stream</td></tr><tr><td><a name="924946"> </a><code>fileModeUpdate</code> </td><td><a name="924948"> </a>Open/create for read/write, preserving previous version of stream if it exists</td></tr><tr><td><a name="924950"> </a><code>fileModeAppend</code> </td><td><a name="924952"> </a>Open/create for read/write, always writing to the end of the stream</td></tr></table><table><tr><td></table></div></p><a name="924955"> </a><h3> Secondary Open Mode Constants</h3><dl><a name="924957"> </a><p></p><dt>You can use the <code>| </code>operator (bitwise inclusive OR) to append to a primary mode selector one or more of the secondary mode selectors listed below. <p><a name="924985"> </a> </p><p><div> <table border="3"><caption><B></B></caption><tr><td><a name="924960"> </a><code>fileModeDontOverwrite </code></td><td><a name="924962"> </a>Prevents <code>fileModeReadWrite</code> from discarding an existing stream having the same name; may only be specified together with <code>fileModeReadWrite</code></td></tr><tr><td><a name="924964"> </a><code>fileModeLeaveOpen</code> </td><td><a name="924966"> </a>Leave stream open when application quits. Most applications should not use this option.</td></tr><tr><td><a name="924968"> </a><code>fileModeExclusive</code> </td><td><a name="924970"> </a>No other application can open the stream until the application that opened it in this mode closes it. </td></tr><tr><td><a name="924972"> </a><code>fileModeAnyTypeCreator </code></td><td><a name="924974"> </a>Accept any type/creator when opening or replacing an existing stream. Normally, the <code><a href="FileStreaming.html#925457"></code>FileOpen<code></a></code> function opens only streams having the specified creator and type. Setting this option enables the <code>FileOpen</code> function to open streams having a type or creator other than those specified.</td></tr><tr><td><a name="924979"> </a><code>fileModeTemporary</code> </td><td><a name="924981"> </a>Delete the stream automatically when it is closed. For more information, see Comment section of <code><a href="FileStreaming.html#925457"></code>FileOpen<code></a></code> function description.</td></tr></table><table><tr><td></table></div></p></dl><a name="924989"> </a><h2> File Streaming Functions</h2><a name="924992"> </a><br> <br> <br><h3> FileClearerr</h3><dl><dl><a name="924993"> </a><h4>Purpose </h4><dl><a name="924994"> </a><p></p><dt>Clear I/O error status, end of file error status, and last error.</dl><a name="924995"> </a><h4>Prototype </h4><dl><a name="924996"> </a><dt><code>Err FileClearerr (FileHand&nbsp;stream) </code></dl></dl><dl><a name="924997"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="924998"> </a><CODE>--&gt; <code>stream</code> </CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Handle to open stream. <br></TD></TR></TABLE></dl><dl><a name="924999"> </a><h4>Result </h4><dl><a name="925000"> </a><p></p><dt>0 if no error, or a <code>fileErr </code>code if an error occurs. See the section <a href="FileStreaming.html#925705">"File Streaming Error Codes"</a> for more information.</dl></dl><dl><a name="925004"> </a><h4>Compatibility </h4><dl><a name="925008"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl><a name="925009"> </a><h4>See Also </h4><dl><a name="925016"> </a><p></p><dt><code><a href="FileStreaming.html#925424"></code>FileGetLastError<code></a></code>, <code><a href="FileStreaming.html#925543"></code>FileRewind<code></a></code> </dl></dl></dl><a name="925019"> </a><br> <br> <br><h3> FileClose</h3><dl><dl><a name="925020"> </a><h4>Purpose </h4><dl><a name="925021"> </a><p></p><dt>Close the file stream and destroy its handle. If the stream was opened with <code>fileModeTemporary</code>, it is deleted upon closing. </dl><a name="925022"> </a><h4>Prototype </h4><dl><a name="925023"> </a><dt><code>Err FileClose (FileHand&nbsp;stream)</code></dl></dl><dl><a name="925024"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925025"> </a><CODE>--&gt; <code>stream</code> </CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Handle to open stream. <br></TD></TR></TABLE></dl><dl><a name="925026"> </a><h4>Result </h4><dl><a name="925027"> </a><p></p><dt>0 if no error, or a <code>fileErr </code>code if an error occurs. See the section <a href="FileStreaming.html#925705">"File Streaming Error Codes"</a> for more information.</dl></dl><dl><a name="925031"> </a><h4>Compatibility </h4><dl><a name="925035"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="925038"> </a><br> <br> <br><h3> FileControl</h3><dl><dl><a name="925039"> </a><h4>Purpose </h4><dl><a name="925040"> </a><p></p><dt>Perform the operation specified by the <code>op</code> parameter on the <code>stream</code> file stream. </dl><a name="925041"> </a><h4>Prototype </h4><dl><a name="925042"> </a><dt><code>Err FileControl (FileOpEnum&nbsp;op, FileHand&nbsp;stream, void*&nbsp;valueP, Int32*&nbsp;valueLenP)</code></dl></dl><dl><a name="925043"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925044"> </a><CODE><code>op</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The operation to perform, and its associated formal parameters. See the Comments section for a list of possible values. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925045"> </a><CODE>--&gt; <code>stream</code> </CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Open stream handle if required for file stream operation. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925046"> </a><CODE>&lt;--&gt; <code>valueP</code> </CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to value or buffer, as required. This parameter is defined by the selector passed as the value of the <code>op</code> parameter. For details, see the Comments section. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925047"> </a><CODE>&lt;--&gt; <code>valueLenP</code> </CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to value or buffer, as required. This parameter is defined by the selector passed as the value of the <code>op</code> parameter. For details, see the Comments section.<br></TD></TR></TABLE></dl><dl><a name="925048"> </a><h4>Result </h4><dl><a name="925049"> </a><p></p><dt>Returns either a value defined by the selector passed as the argument to the <code>op</code> parameter, or an error code resulting from the requested operation. For details, see the Comments section.</dl></dl><dl><a name="925050"> </a><h4>Comments </h4><dl><a name="925054"> </a><p></p><dt>Normally, you do not call the <code><a href="FileStreaming.html#925038"></code>FileControl<code></a></code> function yourself; it is called for you by most of the other file streaming functions and macros to perform common file streaming operations. You can call <code><a href="FileStreaming.html#925038"></code>FileControl<code></a></code> yourself to enable specialized read modes. <p><a name="925231"> </a> </p><p><div> <table border="3"><caption><B></B></caption><tr><td><a name="925061"> </a><code>fileOpNone</code> </td><td><a name="925063"> </a>No-op. </td></tr><tr><td><a name="925065"> </a><code>fileOpDestructiveReadMode</code> </td><td><a name="925067"> </a>Enter destructive read mode, and rewind stream to its beginning. Once in this mode, there is no turning back: stream's contents after closing (or crash) are undefined.</td></tr><tr><td><a name="925069"> </a></td><td><a name="925071"> </a>Destructive read mode deletes blocks as data are read, thus freeing storage automatically. Once in destructive read mode, you cannot re-use the file stream--the contents of the stream are undefined after it is closed or after a crash. </td></tr><tr><td><a name="925073"> </a></td><td><a name="925075"> </a>Writing to files opened without write access or those that are in destructive read state is not allowed; thus, you cannot call the <code><a href="FileStreaming.html#925672"></code>FileWrite<code></a></code>, <code><a href="FileStreaming.html#925582"></code>FileSeek<code></a></code>, or <code><a href="FileStreaming.html#925647"></code>FileTruncate<code></a></code> functions on a stream that is in destructive read mode. One exception to this rule applies to streams that were opened in "write + append" mode and then switched into destructive read state. In this case, the <code><a href="FileStreaming.html#925672"></code>FileWrite<code></a></code> function can append data to the stream, but it also preserves the current stream position so that subsequent reads pick up where they left off (you can think of this as a pseudo-pipe).</td></tr><tr><td><a name="925089"> </a></td><td><a name="925091"> </a>ARGUMENTS:<a name="925092"> </a><code>stream</code> = open stream handle<a name="925093"> </a><code>valueP</code> = <code>NULL</code><a name="925094"> </a><code>valueLenP</code> = <code>NULL</code></td></tr><tr><td><a name="925096"> </a></td><td><a name="925098"> </a>RETURNS:<a name="925099"> </a>zero on success; <a name="925100"> </a><code>fileErr</code>... on error</td></tr><tr><td><a name="925102"> </a><code>fileOpGetEOFStatus</code> </td><td><a name="925104"> </a>Get end-of-file status (like C runtime's <code>feof</code>) (err = <code>fileErrEOF</code>). Indicates end of file condition. Use <code><a href="FileStreaming.html#924992"></code>FileClearerr<code></a></code> to clear this error status.</td></tr><tr><td><a name="925109"> </a></td><td><a name="925111"> </a>ARGUMENTS:<a name="925112"> </a><code>stream</code> = open stream handle<a name="925113"> </a><code>valueP</code> = <code>NULL</code><a name="925114"> </a><code>valueLenP</code> = <code>NULL</code></td></tr><tr><td><a name="925116"> </a></td><td><a name="925118"> </a>RETURNS:<a name="925119"> </a>zero if not end of file; <a name="925120"> </a>non-zero if end of file</td></tr><tr><td><a name="925122"> </a><code>fileOpGetLastError</code> </td><td><a name="925124"> </a>Get error code from last operation on stream, and clear the last error code value. Doesn't change status of EOF or I/O errors --use <code><a href="FileStreaming.html#924992"></code>FileClearerr<code></a></code> to reset all error codes.</td></tr><tr><td><a name="925129"> </a></td><td><a name="925131"> </a>ARGUMENTS:<a name="925132"> </a><code>stream</code> = open stream handle<a name="925133"> </a><code>valueP</code> = <code>NULL</code><a name="925134"> </a><code>valueLenP</code> = <code>NULL</code></td></tr><tr><td><a name="925136"> </a></td><td><a name="925138"> </a>RETURNS:<a name="925139"> </a>Error code from last file stream operation</td></tr><tr><td><a name="925141"> </a><code>fileOpClearError</code> </td><td><a name="925143"> </a>Clear I/O and EOF error status and last error.</td></tr><tr><td><a name="925145"> </a></td><td><a name="925147"> </a>ARGUMENTS:<a name="925148"> </a><code>stream</code> = open stream handle<a name="925149"> </a><code>valueP</code> = <code>NULL</code><a name="925150"> </a><code>valueLenP</code> = <code>NULL</code></td></tr><tr><td><a name="925152"> </a></td><td><a name="925154"> </a>RETURNS:<a name="925155"> </a>zero on success; <code>fileErr</code>... on error</td></tr><tr><td><a name="925157"> </a><code>fileOpGetIOErrorStatus</code> </td><td><a name="925159"> </a>Get I/O error status (like C runtime's <code>ferror</code>). Use <code><a href="FileStreaming.html#924992"></code>FileClearerr<code></a></code> to clear this error status.</td></tr><tr><td><a name="925164"> </a></td><td><a name="925166"> </a>ARGUMENTS:<a name="925167"> </a><code>stream</code> = open stream handle<a name="925168"> </a><code>valueP</code> = <code>NULL</code><a name="925169"> </a><code>valueLenP</code> = <code>NULL</code></td></tr><tr><td><a name="925171"> </a></td><td><a name="925173"> </a>RETURNS:<a name="925174"> </a>zero if not I/O error; <a name="925175"> </a>non-zero if I/O error is pending.</td></tr><tr><td><a name="925177"> </a><code>fileOpGetCreatedStatus</code> </td><td><a name="925182"> </a>Find out whether file was created by <code><a href="FileStreaming.html#925457"></code>FileOpen<code></a></code> function</td></tr><tr><td><a name="925184"> </a></td><td><a name="925186"> </a>ARGUMENTS:<a name="925187"> </a><code>stream</code> = open stream handle<a name="925188"> </a><code>valueP</code> = Pointer to Boolean <a name="925189"> </a><code>valueLenP</code> = Pointer to <code>Int32</code> variable set to sizeof(Boolean)</td></tr><tr><td><a name="925191"> </a></td><td><a name="925193"> </a>RETURNS:<a name="925194"> </a>zero on success; <code>fileErr</code>... on error. The Boolean variable will be set to non-zero if the file was created.</td></tr><tr><td><a name="925196"> </a><code>fileOpGetOpenDbRef</code> </td><td><a name="925198"> </a>Get the open database reference (handle) of the underlying database that implements the stream (<code>NULL</code> if none); this is needed for performing Palm OS-specific operations on the underlying database, such as changing or getting creator and type, version, backup/reset bits, and so on.</td></tr><tr><td><a name="925200"> </a></td><td><a name="925202"> </a>ARGUMENTS:<a name="925203"> </a><code>stream</code> = open stream handle<a name="925204"> </a><code>valueP</code> = Pointer to <code>DmOpenRef</code> variable<a name="925205"> </a><code>valueLenP</code> = Pointer to Int32 variable set to sizeof(DmOpenRef)</td></tr><tr><td><a name="925207"> </a></td><td><a name="925209"> </a>RETURNS:<a name="925210"> </a>zero on success; <code>fileErr</code>... on error. The <code>DmOpenRef</code> variable will be set to the file's open db reference that may be passed to Data Manager calls;</td></tr><tr><td><a name="925212"> </a></td><td><a name="925214"> </a>WARNING: Do not make any changes to the data of the underlying database -- doing so will corrupt the file stream. </td></tr><tr><td><a name="925216"> </a><code>fileOpFlush</code> </td><td><a name="925218"> </a>Flush any cached data to storage.</td></tr><tr><td><a name="925220"> </a></td><td><a name="925222"> </a>ARGUMENTS:<a name="925223"> </a><code>stream</code> = open stream handle<a name="925224"> </a><code>valueP</code> = <code>NULL</code><a name="925225"> </a><code>valueLenP</code> = <code>NULL</code></td></tr><tr><td><a name="925227"> </a></td><td><a name="925229"> </a>RETURNS:<a name="925230"> </a>zero on success; <code>fileErr</code>... on error;</td></tr></table><table><tr><td></table></div></p></dl><a name="925232"> </a><h4>Compatibility </h4><dl><a name="925236"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl><a name="925237"> </a><h4>See Also </h4><dl><a name="925250"> </a><p></p><dt><code><a href="FileStreaming.html#924992"></code>FileClearerr<code></a></code>, <code><a href="FileStreaming.html#925330"></code>FileEOF<code></a></code>, <code><a href="FileStreaming.html#925366"></code>FileError<code></a></code>, <code><a href="FileStreaming.html#925402"></code>FileFlush<code></a></code>, <code><a href="FileStreaming.html#925424"></code>FileGetLastError<code></a></code>, <code><a href="FileStreaming.html#925543"></code>FileRewind<code></a></code> </dl></dl></dl><a name="925259"> </a><br> <br> <br><h3> FileDelete</h3><dl><dl><a name="925260"> </a><h4>Purpose </h4><dl><a name="925261"> </a><p></p><dt>Deletes the specified file stream from the specified card. Only a closed stream may be passed to this function. </dl><a name="925262"> </a><h4>Prototype </h4><dl><a name="925263"> </a><dt><code>Err FileDelete (UInt16&nbsp;cardNo, Char*&nbsp;nameP)</code></dl></dl><dl><a name="927871"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="927872"> </a><CODE><code>cardNo</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Card on which the file stream to delete resides. Currently, no Palm OS<sup>&#174;</sup> devices support multiple cards, so this value must be 0.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925266"> </a><CODE><code>nameP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>String that is the name of the stream to delete. <br></TD></TR></TABLE></dl><dl><a name="925267"> </a><h4>Result </h4><dl><a name="925268"> </a><p></p><dt>0 if no error, or a <code>fileErr </code>code if an error occurs. See the section <a href="FileStreaming.html#925705">"File Streaming Error Codes"</a> for more information.</dl></dl><dl><a name="925272"> </a><h4>Compatibility </h4><dl><a name="925276"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl><a name="925277"> </a><h4>See Also </h4><dl><a name="925281"> </a><p></p><dt><code><a href="FileStreaming.html#925457"></code>FileOpen<code></a></code> </dl></dl></dl><a name="925284"> </a><br> <br> <br><h3> FileDmRead</h3><dl><dl><a name="925285"> </a><h4>Purpose </h4><dl><a name="925286"> </a><p></p><dt>Read data from a file stream into a chunk, record, or resource residing in a database. </dl><a name="925287"> </a><h4>Prototype </h4><dl><a name="925288"> </a><dt><code>Int32 FileDmRead (FileHand&nbsp;stream, void*&nbsp;startOfDmChunkP, Int32&nbsp;destOffset, Int32&nbsp;objSize, Int32&nbsp;numObj, Err*&nbsp;errP) </code></dl></dl><dl><a name="925289"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925290"> </a><CODE>--&gt; <code>stream</code> </CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Handle to open stream. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925291"> </a><CODE>--&gt; <code>startOfDmChunkP</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT></code>Pointer to beginning of chunk, record or resource residing in a database. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925292"> </a><CODE><code>destOffset</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Offset from <code>startOfDmChunkP</code> (base pointer) to the destination area (must be &gt;= 0). <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925293"> </a><CODE><code>objSize</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Size of each stream object to read. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925294"> </a><CODE><code>numObj</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Number of stream objects to read. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925295"> </a><CODE>&lt;--&gt; <code>errP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to variable that is to hold the error code returned by this function. Pass <code>NULL</code> to ignore. See the section <a href="FileStreaming.html#925705">"File Streaming Error Codes"</a> for more information. <br></TD></TR></TABLE></dl><dl><a name="925299"> </a><h4>Result </h4><dl><a name="925300"> </a><p></p><dt>The number of whole objects that were read--note that the number of objects actually read may be less than the number requested.</dl></dl><dl><a name="925301"> </a><h4>Comments </h4><dl><a name="925302"> </a><p></p><dt>When the number of objects actually read is less than the number requested, you may be able to determine the cause of this result by examining the return value of the <code>errP</code> parameter or by calling the <code><a href="FileStreaming.html#925424"></code>FileGetLastError<code></a></code> function. If the cause is insufficient data in the stream to satisfy the full request, the current stream position is at end-of-file and the "end of file" indicator is set. If a non-<code>NULL</code> pointer was passed as the value of the <code>errP</code> parameter when the <code>FileDmRead</code> function was called and an error was encountered, <code>*errP</code> holds a non-zero error code when the function returns. In addition, the <code><a href="FileStreaming.html#925366"></code>FileError<code></a></code> and <code><a href="FileStreaming.html#925330"></code>FileEOF<code></a></code> functions may be used to check for I/O errors.</dl><a name="925312"> </a><h4>Compatibility </h4><dl><a name="925316"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl><a name="925317"> </a><h4>See Also </h4><dl><a name="925327"> </a><p></p><dt><code><a href="FileStreaming.html#925497"></code>FileRead<code></a></code>, <code><a href="FileStreaming.html#925366"></code>FileError<code></a></code>, <code><a href="FileStreaming.html#925330"></code>FileEOF<code></a></code></dl></dl></dl><a name="925330"> </a><br> <br> <br><h3> FileEOF</h3><dl><dl><a name="925331"> </a><h4>Purpose </h4><dl><a name="925332"> </a><p></p><dt>Get end-of-file status (err = <code>fileErrEOF</code> indicates end of file condition).</dl><a name="925333"> </a><h4>Prototype </h4><dl><a name="925334"> </a><dt><code>Err FileEOF (FileHand&nbsp;stream) </code></dl></dl><dl><a name="925335"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925336"> </a><CODE>--&gt; <code>stream</code> </CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Handle to open stream. <br></TD></TR></TABLE></dl><dl><a name="925337"> </a><h4>Result </h4><dl><a name="925340"> </a><p></p><dt>0 if <em>not</em> end of file; non-zero if end of file. See the section <a href="FileStreaming.html#925705">"File Streaming Error Codes"</a> for more information.</dl></dl><dl><a name="925342"> </a><h4>Comments </h4><dl><a name="925343"> </a><p></p><dt>This function's behavior is similar to that of the <code>feof</code> function provided by the C programming language runtime library.<a name="925347"> </a><p></p><dt>Use <code><a href="FileStreaming.html#924992"></code>FileClearerr<code></a></code> to clear the I/O error status. </dl><a name="925348"> </a><h4>Compatibility </h4><dl><a name="925352"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl><a name="925353"> </a><h4>See Also </h4><dl><a name="925363"> </a><p></p><dt><code><a href="FileStreaming.html#924992"></code>FileClearerr<code></a></code>, <code><a href="FileStreaming.html#925424"></code>FileGetLastError<code></a></code>, <code><a href="FileStreaming.html#925543"></code>FileRewind<code></a></code> </dl></dl></dl><a name="925366"> </a><br> <br> <br><h3> FileError</h3><dl><dl><a name="925367"> </a><h4>Purpose </h4><dl><a name="925368"> </a><p></p><dt>Get I/O error status.</dl><a name="925369"> </a><h4>Prototype </h4><dl><a name="925370"> </a><dt><code>Err FileError (FileHand&nbsp;stream) </code></dl></dl><dl><a name="925371"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925372"> </a><CODE>--&gt; <code>stream</code> </CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Handle to open stream. <br></TD></TR></TABLE></dl><dl><a name="925373"> </a><h4>Result </h4><dl><a name="925374"> </a><p></p><dt>0 if no error, and non-zero if an I/O error indicator has been set for this stream. See the section <a href="FileStreaming.html#925705">"File Streaming Error Codes"</a> for more information.</dl></dl><dl><a name="925378"> </a><h4>Comments </h4><dl><a name="925379"> </a><p></p><dt>This function's behavior is similar to that of the C programming language's <code>ferror</code> runtime function.<a name="925383"> </a><p></p><dt>Use <code><a href="FileStreaming.html#924992"></code>FileClearerr<code></a></code> to clear the I/O error status. </dl><a name="925384"> </a><h4>Compatibility </h4><dl><a name="925388"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl><a name="925389"> </a><h4>See Also </h4><dl><a name="925399"> </a><p></p><dt><code><a href="FileStreaming.html#924992"></code>FileClearerr<code></a></code>, <code><a href="FileStreaming.html#925424"></code>FileGetLastError<code></a></code>, <code><a href="FileStreaming.html#925543"></code>FileRewind<code></a></code> </dl></dl></dl><a name="925402"> </a><br> <br> <br><h3> FileFlush</h3><dl><dl><a name="925403"> </a><h4>Purpose </h4><dl><a name="925404"> </a><p></p><dt>Flush cached data to storage.</dl><a name="925405"> </a><h4>Prototype </h4><dl><a name="925406"> </a><dt><code>Err FileFlush (FileHand&nbsp;stream) </code></dl></dl><dl><a name="925407"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925408"> </a><CODE>--&gt; <code>stream</code> </CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Handle to open stream. <br></TD></TR></TABLE></dl><dl><a name="925409"> </a><h4>Result </h4><dl><a name="925410"> </a><p></p><dt>0 if no error, or a <code>fileErr </code>code if an error occurs. See the section <a href="FileStreaming.html#925705">"File Streaming Error Codes"</a> for more information.</dl></dl><dl><a name="925414"> </a><h4>Comments </h4><dl><a name="925415"> </a><p></p><dt>It is not always necessary to call this function explicitly--certain operations flush the contents of a stream automatically; for example, streams are flushed when they are closed. Because this function's behavior is similar to that of the <code>fflush</code> function provided by the C programming language runtime library, you only need to call it explicitly under circumstances similar to those in which you would call <code>fflush</code> explicitly. </dl><a name="925417"> </a><h4>Compatibility </h4><dl><a name="925421"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="925424"> </a><br> <br> <br><h3> FileGetLastError</h3><dl><dl><a name="925425"> </a><h4>Purpose </h4><dl><a name="925426"> </a><p></p><dt>Get error code from last operation on file stream, and clear the last error code value (will not change end of file or I/O error status -- use <code><a href="FileStreaming.html#924992"></code>FileClearerr<code></a></code> to reset all error codes)</dl><a name="925430"> </a><h4>Prototype </h4><dl><a name="925431"> </a><dt><code>Err FileGetLastError (FileHand&nbsp;stream) </code></dl></dl><dl><a name="925432"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925433"> </a><CODE>--&gt; <code>stream</code> </CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Handle to open stream. <br></TD></TR></TABLE></dl><dl><a name="925434"> </a><h4>Result </h4><dl><a name="925435"> </a><p></p><dt>Error code returned by the last file stream operation. See the section <a href="FileStreaming.html#925705">"File Streaming Error Codes"</a> for more information.</dl></dl><dl><a name="925439"> </a><h4>Compatibility </h4><dl><a name="925443"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl><a name="925444"> </a><h4>See Also </h4><dl><a name="925454"> </a><p></p><dt><code><a href="FileStreaming.html#924992"></code>FileClearerr<code></a></code>, <code><a href="FileStreaming.html#925330"></code>FileEOF<code></a></code>, <code><a href="FileStreaming.html#925366"></code>FileError<code></a></code> </dl></dl></dl><a name="925457"> </a><br> <br> <br><h3> FileOpen</h3><dl><dl><a name="925458"> </a><h4>Purpose </h4><dl><a name="925459"> </a><p></p><dt>Open existing file stream or create an open file stream for I/O in the mode specified by the <code>openMode</code> parameter. </dl><a name="925460"> </a><h4>Prototype </h4><dl><a name="925461"> </a><dt><code>FileHand FileOpen (UInt16&nbsp;cardNo, Char*&nbsp;nameP, UInt32&nbsp;type, UInt32&nbsp;creator, UInt32&nbsp;openMode, Err*&nbsp;errP)</code></dl></dl><dl><a name="925462"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925463"> </a><CODE><code>cardNo</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Card on which the file stream to open resides. Currently, no Palm OS devices support multiple cards, so this value must be 0.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925464"> </a><CODE>--&gt; <code>nameP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to text string that is the name of the file stream to open or create. This value must be a valid name--no wildcards allowed, must not be <code>NULL</code>. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925465"> </a><CODE><code>type</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>File type of stream to open or create. Pass <code>0</code> for wildcard, in which case <code>sysFileTFileStream</code> is used if the stream needs to be created and <code>fileModeTemporary</code> is not specified. If type is <code>0</code> and <code>fileModeTemporary</code> is specified, then <code>sysFileTTemp</code> is used for the file type of the stream this function creates.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925466"> </a><CODE><code>creator</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Creator of stream to open or create. Pass <code>0</code> for wildcard, in which case the current application's creator ID is used for the creator of the stream this function creates.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925467"> </a><CODE><code>openMode</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Mode in which to open the file stream. You must specify only one primary mode selector. Additionally, you can use the <code>| </code>operator (bitwise inclusive OR) to append one or more secondary mode selectors to the primary mode selector. See <a href="FileStreaming.html#924925">"Primary Open Mode Constants"</a> and <a href="FileStreaming.html#924955">"Secondary Open Mode Constants"</a> for the list of possible values. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925474"> </a><CODE></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT><br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925475"> </a><CODE>&lt;--&gt; <code>errP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to variable that is to hold the error code returned by this function. Pass <code>NULL</code> to ignore. See the section <a href="FileStreaming.html#925705">"File Streaming Error Codes"</a> for a list of error codes. <br></TD></TR></TABLE></dl><dl><a name="925479"> </a><h4>Result </h4><dl><a name="925480"> </a><p></p><dt>If successful, returns a handle to an open file stream; otherwise, returns <code>0</code>. </dl></dl><dl><a name="925481"> </a><h4>Comments </h4><dl><a name="925482"> </a><p></p><dt>The <code>fileModeReadOnly</code>, <code>fileModeReadWrite</code>, <code>fileModeUpdate</code>, and <code>fileModeAppend</code> modes are mutually exclusive--pass only one of them to the <code>FileOpen</code> function!<a name="925483"> </a><p></p><dt>When the <code>fileModeTemporary</code> open mode is used and the file type passed to <code>FileOpen</code> is <code>0</code>, the <code>FileOpen</code> function uses <code>sysFileTTemp</code> (defined in <code>SystemMgr.rh)</code> for the file type, as recommended. In future versions of Palm OS, this configuration will enable the automatic cleanup of undeleted temporary files after a system crash. Automatic post-crash cleanup is not implemented in current versions of Palm OS.<a name="925485"> </a><p></p><dt>To open a file stream even if it has a different type and creator than specified, pass the <code>fileModeAnyTypeCreator</code> selector as a flag in the <code>openMode</code> parameter to the <code><a href="FileStreaming.html#925457"></code>FileOpen<code></a></code> function. <a name="925489"> </a><p></p><dt>The <code>fileModeLeaveOpen</code> mode is an esoteric option that most applications should not use. It may be useful for a library that needs to open a stream from the current application's context and keep it open even after the current application quits. By default, Palm OS automatically closes all databases that were opened in a particular application's context when that application quits. The <code>fileModeLeaveOpen</code> option overrides this default behavior.</dl><a name="925490"> </a><h4>Compatibility </h4><dl><a name="925494"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="925497"> </a><br> <br> <br><h3> FileRead</h3><dl><dl><a name="925498"> </a><h4>Purpose </h4><dl><a name="925499"> </a><p></p><dt>Reads data from a stream into a buffer. Do not use this function to read data into a chunk, record or resource residing in a database--you must use the <code><a href="FileStreaming.html#925284"></code>FileDmRead<code></a></code> function for such operations. </dl><a name="925503"> </a><h4>Prototype </h4><dl><a name="925504"> </a><dt><code>Int32 FileRead (FileHand&nbsp;stream, void*&nbsp;bufP, Int32&nbsp;objSize, Int32&nbsp;numObj, Err*&nbsp;errP) </code></dl></dl><dl><a name="925505"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925506"> </a><CODE>--&gt; <code>stream</code> </CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Handle to open stream. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925507"> </a><CODE>--&gt; <code>bufP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to beginning of buffer into which data is read<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925508"> </a><CODE><code>objSize</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Size of each stream object to read. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925509"> </a><CODE><code>numObj</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Number of stream objects to read. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925510"> </a><CODE>&lt;--&gt; <code>errP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to variable that is to hold the error code returned by this function. Pass <code>NULL</code> to ignore. See the section <a href="FileStreaming.html#925705">"File Streaming Error Codes"</a> for a list of error codes. <br></TD></TR></TABLE></dl><dl><a name="925514"> </a><h4>Result </h4><dl><a name="925515"> </a><p></p><dt>The number of whole objects that were read--note that the number of objects actually read may be less than the number requested.</dl></dl><dl><a name="925516"> </a><h4>Comments </h4><dl><a name="925517"> </a><p></p><dt>Do not use this function to read data into a chunk, record or resource residing in a database--you must use the <code><a href="FileStreaming.html#925284"></code>FileDmRead<code></a></code> function for such operations. <a name="925521"> </a><p></p><dt>When the number of objects actually read is fewer than the number requested, you may be able to determine the cause of this result by examining the return value of the <code>errP</code> parameter or by calling the <code><a href="FileStreaming.html#925424"></code>FileGetLastError<code></a></code> function. If the cause is insufficient data in the stream to satisfy the full request, the current stream position is at end-of-file and the "end of file" indicator is set. If a non-<code>NULL</code> pointer was passed as the value of the <code>errP</code> parameter when the <code>FileRead</code> function was called and an error was encountered, <code>*errP</code> holds a non-zero error code when the function returns. In addition, the <code><a href="FileStreaming.html#925366"></code>FileError<code></a></code> and <code><a href="FileStreaming.html#925330"></code>FileEOF<code></a></code> functions may be used to check for I/O errors.</dl><a name="925531"> </a><h4>Compatibility </h4><dl><a name="925535"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl><a name="925536"> </a><h4>See Also </h4><dl><a name="925540"> </a><p></p><dt><code><a href="FileStreaming.html#925284"></code>FileDmRead<code></a></code> </dl></dl></dl><a name="925543"> </a><br> <br> <br><h3> FileRewind</h3><dl><dl><a name="925544"> </a><h4>Purpose </h4><dl><a name="925545"> </a><p></p><dt>Reset position marker to beginning of stream and clear all error codes.</dl><a name="925546"> </a><h4>Prototype </h4><dl><a name="925547"> </a><dt><code>Err FileRewind (FileHand&nbsp;stream) </code></dl></dl><dl><a name="925548"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925549"> </a><CODE>--&gt; <code>stream</code> </CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Handle to open stream. <br></TD></TR></TABLE></dl><dl><a name="925550"> </a><h4>Result </h4><dl><a name="925551"> </a><p></p><dt>0 if no error, or a <code>fileErr </code>code if an error occurs. See the section <a href="FileStreaming.html#925705">"File Streaming Error Codes"</a> for more information. </dl></dl><dl><a name="925555"> </a><h4>Compatibility </h4><dl><a name="925559"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl><a name="925560"> </a><h4>See Also </h4><dl><a name="925576"> </a><p></p><dt><code><a href="FileStreaming.html#925582"></code>FileSeek<code></a></code>, <code><a href="FileStreaming.html#925618"></code>FileTell<code></a></code>, <code><a href="FileStreaming.html#924992"></code>FileClearerr<code></a></code>, <code><a href="FileStreaming.html#925330"></code>FileEOF<code></a></code>, <code><a href="FileStreaming.html#925366"></code>FileError<code></a></code>, <code><a href="FileStreaming.html#925424"></code>FileGetLastError<code></a></code> </dl></dl></dl><a name="925582"> </a><br> <br> <br><h3> FileSeek</h3><dl><dl><a name="925583"> </a><h4>Purpose </h4><dl><a name="925584"> </a><p></p><dt>Set current position within a file stream, extending the stream as necessary if it was opened with write access. </dl><a name="925585"> </a><h4>Prototype </h4><dl><a name="925586"> </a><dt><code>Err FileSeek (FileHand&nbsp;stream, Int32&nbsp;offset, FileOriginEnum&nbsp;origin) </code></dl></dl><dl><a name="925587"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925588"> </a><CODE>--&gt; <code>stream</code> </CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Handle to open stream. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925589"> </a><CODE><code>offset</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Position to set, expressed as the number of bytes from origin. This value may be positive, negative, or <code>0</code>.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925591"> </a><CODE><code>origin</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Describes the origin of the position change. Possible values are:<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=35% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=25% VALIGN=TOP ALIGN=LEFT><a name="925592"> </a><CODE><code>fileOriginBeginning</code> </CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>From the beginning (first data byte of file).<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=35% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=25% VALIGN=TOP ALIGN=LEFT><a name="925593"> </a><CODE><code>fileOriginCurrent</code> </CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>From the current position.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=35% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=25% VALIGN=TOP ALIGN=LEFT><a name="925594"> </a><CODE><code>fileOriginEnd</code> </CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>From the end of file (one position beyond last data byte).<br></TD></TR></TABLE></dl><dl><a name="925595"> </a><h4>Result </h4><dl><a name="925596"> </a><p></p><dt>0 if no error, or a <code>fileErr </code>code if an error occurs. See the section <a href="FileStreaming.html#925705">"File Streaming Error Codes"</a> for more information. </dl></dl><dl><a name="925600"> </a><h4>Comments </h4><dl><a name="925601"> </a><p></p><dt>Attempting to seek beyond end-of-file in a read-only stream results in an I/O error. <a name="925602"> </a><p></p><dt>This function's behavior is similar to that of the <code>fseek</code> function provided by the C programming language runtime library.</dl><a name="925603"> </a><h4>Compatibility </h4><dl><a name="925607"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl><a name="925608"> </a><h4>See Also </h4><dl><a name="925615"> </a><p></p><dt><code><a href="FileStreaming.html#925543"></code>FileRewind<code></a></code>, <code><a href="FileStreaming.html#925618"></code>FileTell<code></a></code> </dl></dl></dl><a name="925618"> </a><br> <br> <br><h3> FileTell</h3><dl><dl><a name="925619"> </a><h4>Purpose </h4><dl><a name="925620"> </a><p></p><dt>Get current position and, optionally, file size. </dl><a name="925621"> </a><h4>Prototype </h4><dl><a name="925622"> </a><dt><code>Int32 FileTell (FileHand&nbsp;stream, Int32*&nbsp;fileSizeP, Err*&nbsp;errP) </code></dl></dl><dl><a name="925623"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925624"> </a><CODE>--&gt; <code>stream</code> </CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Handle to open stream. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925625"> </a><CODE>&lt;-&gt; <code>fileSizeP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to variable that holds value describing size of stream in bytes when this function returns. Pass <code>NULL</code> to ignore. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925626"> </a><CODE>&lt;--&gt; <code>errP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to variable that is to hold the error code returned by this function. Pass <code>NULL</code> to ignore. See the section <a href="FileStreaming.html#925705">"File Streaming Error Codes"</a> for a list of possible error codes. <br></TD></TR></TABLE></dl><dl><a name="925630"> </a><h4>Result </h4><dl><a name="925631"> </a><p></p><dt>If successful, returns current position, expressed as an offset in bytes from the beginning of the stream. If an error was encountered, returns <code>-1</code> as a signed long integer.</dl></dl><dl><a name="925632"> </a><h4>Compatibility </h4><dl><a name="925636"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl><a name="925637"> </a><h4>See Also </h4><dl><a name="925644"> </a><p></p><dt><code><a href="FileStreaming.html#925543"></code>FileRewind<code></a></code>, <code><a href="FileStreaming.html#925582"></code>FileSeek<code></a></code> </dl></dl></dl><a name="925647"> </a><br> <br> <br><h3> FileTruncate</h3><dl><dl><a name="925648"> </a><h4>Purpose </h4><dl><a name="925649"> </a><p></p><dt>Truncate the file stream to a specified size; not allowed on streams open in destructive read mode or read-only mode.</dl><a name="925650"> </a><h4>Prototype </h4><dl><a name="925651"> </a><dt><code>Err FileTruncate (FileHand&nbsp;stream, Int32&nbsp;newSize) </code></dl></dl><dl><a name="925652"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925653"> </a><CODE>--&gt; <code>stream</code> </CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Handle of open stream. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925654"> </a><CODE><code>newSize</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>New size; must not exceed current stream size. <br></TD></TR></TABLE></dl><dl><a name="925655"> </a><h4>Result </h4><dl><a name="925656"> </a><p></p><dt>0 if no error, or a <code>fileErr </code>code if an error occurs. See the section <a href="FileStreaming.html#925705">"File Streaming Error Codes"</a> for a list of possible error codes. </dl></dl><dl><a name="925660"> </a><h4>Compatibility </h4><dl><a name="925664"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl><a name="925665"> </a><h4>See Also </h4><dl><a name="925669"> </a><p></p><dt><code><a href="FileStreaming.html#925618"></code>FileTell<code></a></code> </dl></dl></dl><a name="925672"> </a><br> <br> <br><h3> FileWrite</h3><dl><dl><a name="925673"> </a><h4>Purpose </h4><dl><a name="925674"> </a><p></p><dt>Write data to a stream. </dl><a name="925675"> </a><h4>Prototype </h4><dl><a name="925676"> </a><dt><code>Int32 FileWrite (FileHand&nbsp;stream, void*&nbsp;dataP, Int32&nbsp;objSize, Int32&nbsp;numObj, Err*&nbsp;errP) </code></dl></dl><dl><a name="925677"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925678"> </a><CODE>--&gt; <code>stream</code> </CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Handle to open stream. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925679"> </a><CODE>--&gt; <code>dataP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to buffer holding data to write. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925680"> </a><CODE><code>objSize</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Size of each stream object to write; must be <kbd>&gt;=</kbd> <code>0</code>.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925681"> </a><CODE><code>numObj</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Number of stream objects to write. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925682"> </a><CODE>&lt;--&gt; <code>errP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Optional pointer to variable that holds the error code returned by this function. Pass <code>NULL</code> to ignore. See the section <a href="FileStreaming.html#925705">"File Streaming Error Codes"</a> for a list of possible error codes. <br></TD></TR></TABLE></dl><dl><a name="925686"> </a><h4>Result </h4><dl><a name="925687"> </a><p></p><dt>The number of whole objects that were written--note that the number of objects actually written may be less than the number requested. Should available storage be insufficient to satisfy the entire request, as much of the requested data as possible is written to the stream, which may result in the last object in the stream being incomplete.</dl></dl><dl><a name="925688"> </a><h4>Comments </h4><dl><a name="925689"> </a><p></p><dt>Writing to files opened without write access or those that are in destructive read state is not allowed; thus, you cannot call the <code><a href="FileStreaming.html#925672"></code>FileWrite<code></a></code>, <code><a href="FileStreaming.html#925582"></code>FileSeek<code></a></code>, or <code><a href="FileStreaming.html#925647"></code>FileTruncate<code></a></code> functions on a stream that is in destructive read mode. One exception to this rule applies to streams that were opened in "write + append" mode and then switched into destructive read state. In this case, the <code>FileWrite</code> function can append data to the stream, but it also preserves the current stream position so that subsequent reads pick up where they left off (you can think of this as a pseudo-pipe).</dl><a name="925699"> </a><h4>Compatibility </h4><dl><a name="925703"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="925705"> </a><h2> File Streaming Error Codes</h2><dl><a name="925706"> </a><p></p><dt>This section lists all error codes returned by the file streaming functions. <p><a name="925816"> </a> </p><p><div> <table border="3"><caption><B></B></caption><tr><th><a name="925709"> </a><strong>Error Code </strong></th><th><a name="925711"> </a><strong>Value</strong></th><th><a name="925713"> </a><strong>Meaning</strong></th></tr><tr><td><a name="925715"> </a><code>fileErrMemErr </code></td><td><a name="925717"> </a>(<code>fileErrorClass</code>|1)</td><td><a name="925719"> </a>Out of memory error</td></tr><tr><td><a name="925721"> </a><code>fileErrInvalidParam</code> </td><td><a name="925723"> </a>(<code>fileErrorClass</code>|2)</td><td><a name="925725"> </a>Invalid parameter value passed</td></tr><tr><td><a name="925727"> </a><code>fileErrCorruptFile </code></td><td><a name="925729"> </a>(<code>fileErrorClass</code>|3)</td><td><a name="925731"> </a>Alleged stream is corrupted, invalid, or not a stream</td></tr><tr><td><a name="925733"> </a><code>fileErrNotFound</code> </td><td><a name="925735"> </a>(<code>fileErrorClass</code>|4)</td><td><a name="925737"> </a>Couldn't find the stream</td></tr><tr><td><a name="925739"> </a><code>fileErrTypeCreatorMismatch</code> </td><td><a name="925741"> </a>(<code>fileErrorClass</code>|5)</td><td><a name="925743"> </a>Type and/or creator not what was specified</td></tr><tr><td><a name="925745"> </a><code>fileErrReplaceError</code> </td><td><a name="925747"> </a>(<code>fileErrorClass</code>|6)</td><td><a name="925749"> </a>Couldn't replace existing stream</td></tr><tr><td><a name="925751"> </a><code>fileErrCreateError</code> </td><td><a name="925753"> </a>(<code>fileErrorClass</code>|7)</td><td><a name="925755"> </a>Couldn't create new stream</td></tr><tr><td><a name="925757"> </a><code>fileErrOpenError</code> </td><td><a name="925759"> </a>(<code>fileErrorClass</code>|8)</td><td><a name="925761"> </a>Generic open error</td></tr><tr><td><a name="925763"> </a><code>fileErrInUse</code> </td><td><a name="925765"> </a>(<code>fileErrorClass</code>|9)</td><td><a name="925767"> </a>Stream couldn't be opened or deleted because it is in use</td></tr><tr><td><a name="925769"> </a><code>fileErrReadOnly</code> </td><td><a name="925771"> </a>(<code>fileErrorClass</code>|10)</td><td><a name="925773"> </a>Couldn't open in write mode because existing stream is read-only</td></tr><tr><td><a name="925775"> </a><code>fileErrInvalidDescriptor</code> </td><td><a name="925777"> </a>(<code>fileErrorClass</code>|11)</td><td><a name="925779"> </a>Invalid file descriptor <code>(FileHandle)</code></td></tr><tr><td><a name="925781"> </a><code>fileErrCloseError</code> </td><td><a name="925783"> </a>(<code>fileErrorClass</code>|12)</td><td><a name="925785"> </a>Error closing the stream</td></tr><tr><td><a name="925787"> </a><code>fileErr</code>OutOfBounds </td><td><a name="925789"> </a>(<code>fileErrorClass</code>|13)</td><td><a name="925791"> </a>Attempted operation went out of bounds of the stream</td></tr><tr><td><a name="925793"> </a><code>fileErrPermissionDenied</code> </td><td><a name="925795"> </a>(<code>fileErrorClass</code>|14)</td><td><a name="925797"> </a>Couldn't write to a stream open for read-only access</td></tr><tr><td><a name="925799"> </a><code>fileErrIOError</code> </td><td><a name="925801"> </a>(<code>fileErrorClass</code>|15)</td><td><a name="925803"> </a>Generic I/O error</td></tr><tr><td><a name="925805"> </a><code>fileErrEOF</code> </td><td><a name="925807"> </a>(<code>fileErrorClass</code>|16)</td><td><a name="925809"> </a>End-of-File error</td></tr><tr><td><a name="925811"> </a><code>fileErrNotStream</code> </td><td><a name="925813"> </a>(<code>fileErrorClass</code>|17)</td><td><a name="925815"> </a>Attempted to open an entity that is not a stream</td></tr></table><table><tr><td></table></div></p><a name="925827"> </a><p></p><dt></dl><hr><br><center><B>Palm OS SDK Reference</B></center><br><TABLE WIDTH="100%">  <TR>    <TD WIDTH=10%>&nbsp</TD>    <TD WIDTH=20%><a href="FeatureManager.html"><IMG SRC="images/prev.html" BORDER=0 ALT="Previous Page"></TD>    <TD WIDTH=20%><a href="ReferenceTOC.html"><IMG SRC="images/content.gif" BORDER=0 ALT="Table of Contents"></TD>    <TD WIDTH=20%><a href="ReferenceIX.html"><IMG SRC="images/index.gif" BORDER=0 ALT="Index"></TD>    <TD WIDTH=20%><a href="FloatManager.html"><IMG SRC="images/next.html" BORDER=0 ALT="Next Page"></TD>    <TD WIDTH=10%>&nbsp</TD>  </TR></TABLE><br><small><em>This is page 32 of 85 in this book</em></small><hr><br><address><a href="http://www.palmos.com/dev/">Palm Computing Platform Development Zone</a></address><i>Copyright &#169; 2000, Palm, Inc.   All rightsreserved.</i><!-- This file was created with Quadralay WebWorks Publisher 5.0.2 --><!-- --><!-- For more information on how this document, and how the rest of --><!-- this server was created, email devsupp@palm.com --><!-- --><!-- Last updated: 03/27/00 21:28:35 --></body>
<!-- Mirrored from users.fuw.edu.pl/~michalj/palmos/FileStreaming.html by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 17 Feb 2015 19:10:01 GMT -->
</html>