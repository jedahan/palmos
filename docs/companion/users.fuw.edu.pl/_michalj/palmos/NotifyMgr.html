<html>
<!-- Mirrored from users.fuw.edu.pl/~michalj/palmos/NotifyMgr.html by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 17 Feb 2015 19:10:01 GMT -->
<head><title>Notification Manager</title></head><body bgcolor="#ffffff"><TABLE WIDTH="100%">  <TR>    <TD WIDTH=25%><a href="MemoryManager.html"><IMG SRC="images/prev.html" BORDER=0 ALT="Previous Page"></TD>    <TD WIDTH=25%><a href="ReferenceTOC.html"><IMG SRC="images/content.gif" BORDER=0 ALT="Table of Contents"></TD>    <TD WIDTH=25%><a href="ReferenceIX.html"><IMG SRC="images/index.gif" BORDER=0 ALT="Index"></TD>    <TD WIDTH=25%><a href="OverlayMgr.html"><IMG SRC="images/next.html" BORDER=0 ALT="Next Page"></TD>  </TR></TABLE><br><center><B>Palm OS SDK Reference</B></center><hr><br><a name="926122"> </a><h1><IMG SRC="images/PCPplain.gif" ALT="Palm Logo" WIDTH="45" HEIGHT="44"> <a name="926121"> </a>36 Notification Manager</h1><dl><a name="926123"> </a><p></p><dt>This chapter provides information about the notification manager by discussing these topics:<ul type="SQUARE"><a name="926127"> </a><br><li><a href="NotifyMgr.html#926143">Notification Data Structures</a><br><a name="926131"> </a><br><li><a href="NotifyMgr.html#926296">Notification Constants</a><br><a name="926135"> </a><br><li><a href="NotifyMgr.html#926459">Notification Functions</a><br><a name="926139"> </a><br><li><a href="NotifyMgr.html#926617">Application-Defined Functions</a><br></ul><a name="926141"> </a><p></p><dt>The header file <code>NotifyMgr.h</code> declares the API that this chapter describes. For more information on the notification manager, see the section <a href="SystemFeatures.html#927535">"Notifications" </a> in the <a href="SystemFeatures.html#924905">"Palm System Features"</a> chapter of the <em>Palm OS Programmer's Companion</em>. </dl><a name="926143"> </a><h2> Notification Data Structures</h2><a name="926146"> </a><h3> SleepEventParamType</h3><dl><a name="926147"> </a><p></p><dt>The <code>SleepEventParamType</code> struct is used in notifications of type <code>sysNotifySleepRequestEvent</code> to indicate why the system is going to sleep and whether sleep should be deferred. <dl><a name="926149"> </a><br><code>typedef struct {</code><br></dl><dl><a name="926150"> </a><code>&nbsp&nbsp&nbsp UInt16 reason;</code><br><a name="926151"> </a><code>&nbsp&nbsp&nbsp UInt16 deferSleep;</code><br><a name="926152"> </a><code>} SleepEventParamType;</code><br></dl></dl><a name="926153"> </a><h4> Field Descriptions</h4><p><a name="926184"> </a> </p><p><div> <table border="3"><caption><B></B></caption><tr><td><a name="926156"> </a><code>reason</code> </td><td><a name="926158"> </a>The reason the system is going to sleep. The possible values are:</td></tr><tr><td><a name="926160"> </a></td><td><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926163"> </a><CODE><code>sysSleepAutoOff</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT></code>The idle time limit has been reached.<br></TD></TR></TABLE></td></tr><tr><td><a name="926165"> </a></td><td><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926168"> </a><CODE><code>sysSleepPowerButton</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The user pressed the power off button.<br></TD></TR></TABLE></td></tr><tr><td><a name="926170"> </a></td><td><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926173"> </a><CODE><code>sysSleepResumed</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT></code>The sleep event was deferred by one of the notification handlers but has been resumed through the use of the <code>resumeSleepChr</code>.<br></TD></TR></TABLE></td></tr><tr><td><a name="926176"> </a></td><td><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926179"> </a><CODE><code>sysSleepUnknown</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT></code>Unknown reason.<br></TD></TR></TABLE></td></tr><tr><td><a name="926181"> </a><code>deferSleep</code> </td><td><a name="926183"> </a>Initially set to 0. If a notification handler wants to defer sleep, then it should increment this value. When <code>deferSleep</code> is greater than 0, the system waits before going to sleep. </td></tr></table><table><tr><td></table></div></p><a name="926215"> </a><h3> SysNotifyDisplayChangeDetailsType</h3><dl><a name="926216"> </a><p></p><dt>The <code>SysNotifyDisplayChangeDetailsType</code> struct is used in notifications of type <code>sysNotifyDisplayChangeEvent</code> to indicate how the bit depth changed. If the two values in the struct are equal, it means that the color palette has changed instead of the bit depth. <dl><a name="926218"> </a><br><code>typedef struct {</code><br></dl><dl><a name="926219"> </a><code>&nbsp&nbsp&nbsp UInt32 oldDepth;</code><br><a name="926220"> </a><code>&nbsp&nbsp&nbsp UInt32 newDepth;</code><br><a name="926221"> </a><code>} SysNotifyDisplayChangeDetailsType;</code><br></dl></dl><a name="926222"> </a><h4> Field Descriptions</h4><p><a name="926232"> </a> </p><p><div> <table border="3"><caption><B></B></caption><tr><td><a name="926225"> </a><code>oldDepth</code> </td><td><a name="926227"> </a>The old bit depth. </td></tr><tr><td><a name="926229"> </a><code>newDepth</code> </td><td><a name="926231"> </a>The new bit depth. </td></tr></table><table><tr><td></table></div></p><a name="926235"> </a><h3> SysNotifyParamType </h3><dl><a name="926236"> </a><p></p><dt>The <code>SysNotifyParamType</code> struct defines a notification event. This struct is sent along with the <code><a href="AppLaunchCodes.html#926527"></code>sysAppLaunchCmdNotify<code></a></code> launch code or is passed as a parameter to the notification callback function. <dl><a name="926241"> </a><br><code>typedef struct SysNotifyParamType {</code><br></dl><dl><a name="926242"> </a><code>&nbsp&nbsp&nbsp UInt32	 	 	 	 notifyType;</code><br><a name="926243"> </a><code>&nbsp&nbsp&nbsp UInt32	 	 	 	 broadcaster;</code><br><a name="926244"> </a><code>&nbsp&nbsp&nbsp void *	 	 	 	 notifyDetailsP;</code><br><a name="926245"> </a><code>&nbsp&nbsp&nbsp void *	 	 	 	 userDataP;</code><br><a name="926246"> </a><code>&nbsp&nbsp&nbsp Boolean	 	 	 	 handled;</code><br><a name="926247"> </a><code>&nbsp&nbsp&nbsp UInt8	 	 	 	 reserved2;</code><br><a name="926248"> </a><code>} SysNotifyParamType;</code><br></dl></dl><a name="926249"> </a><h4> Field Descriptions</h4><p><a name="926294"> </a> </p><p><div> <table border="3"><caption><B></B></caption><tr><td><a name="926252"> </a><code>notifyType</code> </td><td><a name="926254"> </a>The type of event that occurred. See <a href="NotifyMgr.html#926298">Notification Manager Event Constants</a>.</td></tr><tr><td><a name="926259"> </a><code>broadcaster</code> </td><td><a name="926261"> </a>The creator ID of the application that broadcast the notification (the application that called <code><a href="NotifyMgr.html#926461"></code>SysNotifyBroadcast<code></a></code> or <code><a href="NotifyMgr.html#926492"></code>SysNotifyBroadcastDeferred<code></a></code>), or <code>sysNotifyBroadcasterCode</code> if the system broadcast the event. </td></tr><tr><td><a name="926270"> </a><code>notifyDetailsP</code> </td><td><a name="926272"> </a>Pointer to data specific to this notification. Most notifications do not use this parameter. See <a href="NotifyMgr.html#926298">Notification Manager Event Constants</a> for the specific instances where this parameter is used.</td></tr><tr><td><a name="926277"> </a><code>userDataP</code> </td><td><a name="926279"> </a>Pointer to custom data that your notification handler requires. You create this data and pass its pointer to <code><a href="NotifyMgr.html#926525"></code>SysNotifyRegister<code></a></code>.</td></tr><tr><td><a name="926284"> </a><code>handled</code> </td><td><a name="926286"> </a><code>true</code> if event is handled yet; <code>false</code> otherwise. In some cases, notification handlers can set this field to <code>true</code> to indicate that they have handled an event. See <a href="NotifyMgr.html#926298">Notification Manager Event Constants</a>.</td></tr><tr><td><a name="926291"> </a><code>reserved2</code> </td><td><a name="926293"> </a>Reserved for future use. </td></tr></table><table><tr><td></table></div></p><a name="926296"> </a><h2> Notification Constants</h2><a name="926298"> </a><h3> Notification Manager Event Constants</h3><dl><a name="926299"> </a><p></p><dt>The constants in the table below identify events for which the system posts notifications. In general, notifications regarding the creation of information are broadcast after the information has been created. Notifications regarding the deletion of information are broadcast before the information is deleted. <a name="926300"> </a><p></p><dt>Several notifications are broadcast at various stages when the system goes to sleep and when the system wakes up. These notifications are <strong>not</strong> guaranteed to be broadcast. For example, if the system goes to sleep because the user removes the batteries, sleep notifications are not sent. Thus, these notifications are unsuitable for applications where external hardware must be shut off to conserve power before the system goes to sleep. <p><a name="927911"> </a> </p><p><div> <table border="3"><caption><B></B></caption><tr><th><a name="927804"> </a><strong>Constant</strong></th><th><a name="927806"> </a><strong>Description</strong></th></tr><tr><td><a name="927809"> </a><code>sysNotifyAntennaRaisedEvent</code> </td><td><a name="927815"> </a>Sent during <code><a href="SystemManager.html#925364"></code>SysHandleEvent<code></a></code> when the antenna is raised on a Palm VII<sup>&#153;</sup> series device. <dl><a name="927816"> </a><p></p><dt>Notification handlers may set the <code>handled</code> parameter to <code>true</code> to indicate that the antenna key down event has been handled. </dl></td></tr><tr><td><a name="927819"> </a><code>sysNotifyDisplayChangeEvent</code> </td><td><a name="927821"> </a>Sent just after the color table has been set to use a specific palette or just after <code><a href="Window.html#926373"></code>WinScreenMode<code></a></code> has changed the bit depth. <dl><a name="927826"> </a><p></p><dt>For this notification, the <code>notifyDetailsP</code> parameter is a pointer to a <code><a href="NotifyMgr.html#926215"></code>SysNotifyDisplayChangeDetailsType<code></a></code> struct. </dl></td></tr><tr><td><a name="927833"> </a><code>sysNotifyEarlyWakeupEvent</code> </td><td><a name="927839"> </a>Sent during <code><a href="SystemManager.html#925364"></code>SysHandleEvent<code></a></code> immediately after the system has finished sleeping. The screen may still be turned off, and the system may quickly go back to sleep after handling a procedure alarm or charger event. </td></tr><tr><td><a name="927842"> </a><code>sysNotifyForgotPasswordEvent</code> </td><td><a name="927844"> </a>Sent if the user taps the Lost Password button in the Security application. The notification is sent after the user has confirmed that all private records should be deleted but before the deletion actually occurs.</td></tr><tr><td><a name="927847"> </a><code>sysNotifyLateWakeupEvent</code> </td><td><a name="927853"> </a>Sent during <code><a href="SystemManager.html#925364"></code>SysHandleEvent<code></a></code> immediately after the device has finished waking up. This is sent at the late stage of wakeup, after the screen has been turned on. </td></tr><tr><td><a name="928002"> </a><code>sysNotifyMenuCmdBarOpenEvent</code> </td><td><a name="928010"> </a>Sent during <code><a href="Menu.html#925345"></code>MenuHandleEvent<code></a></code> when it is about to display the menu shortcut command bar. <dl><a name="928440"> </a><p></p><dt>This notification allows system extensions (such as "hacks" installed with the HackMaster program) to add their own buttons to the menu command bar. The handler should do so by calling <code><a href="Menu.html#927118"></code>MenuCmdBarAddButton<code></a></code>. It also allows suppression of the command toolbar by setting <code>handled</code> to <code>true</code>. <a name="929130"> </a><p></p><dt>Applications that need to add their own buttons to the menu command bar should do so in response to a <code><a href="EventRef.html#928023"></code>menuCmdBarOpenEvent<code></a></code>. They should not register for this notification because an application should only add buttons if it is already the active application. The notification is sent after the event, immediately before the command toolbar is displayed. </dl></td></tr><tr><td><a name="927856"> </a><code>sysNotifyResetFinishedEvent</code> </td><td><a name="927858"> </a>Sent immediately after the system has finished a reset. </td></tr><tr><td><a name="927861"> </a><code>sysNotifySleepNotifyEvent</code> </td><td><a name="927867"> </a>Sent during <code><a href="SystemManager.html#925364"></code>SysHandleEvent<code></a></code> immediately before the system is put to sleep. After the broadcast is complete, the system is put to sleep. </td></tr><tr><td><a name="927870"> </a><code>sysNotifySleepRequestEvent</code> </td><td><a name="927876"> </a>Sent during <code><a href="SystemManager.html#925364"></code>SysHandleEvent<code></a></code> processing when the system has decided to go to sleep. <dl><a name="927877"> </a><p></p><dt>For this notification, the <code>notifyDetailsP</code> parameter is a pointer to a <code><a href="NotifyMgr.html#926146"></code>SleepEventParamType<code></a></code> struct. If the <code>deferSleep</code> field is greater than 0, the system does not go to sleep. If you defer sleep, you must post a <code><a href="EventRef.html#925881"></code>keyDownEvent<code></a></code> with a <code>resumeSleepChr</code> to the event queue so that the system eventually goes to sleep. You must also set the command key bit in the <code>keyDownEvent</code> to signal that <code>resumeSleepChr</code> is a virtual character. <a name="927887"> </a><p></p><dt>Note that you may receive this notification several times before the system goes to sleep because notification handlers can delay the system sleep and resume it later.</dl></td></tr><tr><td><a name="927890"> </a><code>sysNotifySyncFinishEvent</code> </td><td><a name="927892"> </a>Sent immediately after a HotSync<sup>&#174;</sup> operation is complete. </td></tr><tr><td><a name="927895"> </a><code>sysNotifySyncStartEvent</code> </td><td><a name="927897"> </a>Sent immediately before a HotSync operation is begun. </td></tr><tr><td><a name="927900"> </a><code>sysNotifyTimeChangeEvent</code> </td><td><a name="927902"> </a>Sent just after the system time has been changed using <code><a href="DateAndTimeManager.html#925185"></code>TimSetSeconds<code></a></code>. </td></tr></table><table><tr><td></table></div></p></dl><a name="927912"> </a><h3> Miscellaneous Constants</h3><p><a name="927956"> </a> </p><p><div> <table border="3"><caption><B></B></caption><tr><th><a name="927915"> </a><strong>Constant</strong></th><th><a name="927917"> </a><strong>Value</strong></th><th><a name="927919"> </a><strong>Description</strong></th></tr><tr><td><a name="927922"> </a><code>sysNotifyBroadcasterCode</code> </td><td><a name="927924"> </a><code>'psys'</code></td><td><a name="927926"> </a>Value passed as the creator ID of the broadcaster for notifications broadcast by the system. </td></tr><tr><td><a name="927929"> </a><code>sysNotifyDefaultQueueSize</code> </td><td><a name="927931"> </a>15</td><td><a name="927933"> </a>Maximum number of nested broadcasts allowed.</td></tr><tr><td><a name="927943"> </a><code>sysNotifyNormalPriority</code> </td><td><a name="927945"> </a>0</td><td><a name="927947"> </a>Typical priority value used when registering for notifications. </td></tr><tr><td><a name="927950"> </a><code>sysNotifyVersionNum</code> </td><td><a name="927952"> </a>1</td><td><a name="927954"> </a>Current notification manager version. This number is stored in the system feature <code>sysFtrNumNotifyMgrVersion</code>. </td></tr></table><table><tr><td></table></div></p><a name="926459"> </a><h2> Notification Functions</h2><a name="926461"> </a><br> <br> <br><h3> SysNotifyBroadcast</h3><dl><dl><a name="926462"> </a><h4>Purpose </h4><dl><a name="926463"> </a><p></p><dt>Synchronously send a notification to all applications registered for the given event type. </dl><a name="926464"> </a><h4>Prototype </h4><dl><a name="926465"> </a><dt><code>Err SysNotifyBroadcast (SysNotifyParamType&nbsp;*notify)</code></dl></dl><dl><a name="926466"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926467"> </a><CODE>&lt;-&gt; <code>notify</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Information about the notification to broadcast. <br></TD></TR></TABLE></dl><dl><a name="926468"> </a><h4>Result </h4><dl><a name="926469"> </a><p></p><dt>Returns one of the following error codes:<TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926470"> </a><CODE><code>errNone</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>No error.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926472"> </a><CODE><code>sysNotifyErrBroadcastBusy</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The broadcast stack limit has already been reached. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926473"> </a><CODE><code>sysErrParamErr</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The background thread is broadcasting the notification and the <code>notify</code> parameter is <code>NULL</code>.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926475"> </a><CODE><code>sysNotifyErrNoStackSpace</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>There is not enough space on the stack for the notification.<br></TD></TR></TABLE></dl></dl><dl><a name="926476"> </a><h4>Comments </h4><dl><a name="926477"> </a><p></p><dt>When you call this function, the notification you specify is broadcast to all interested parties. The broadcast is performed synchronously, meaning that the system broadcasts the notification immediately and waits for each interested party to perform its notification handler and return before the <code>SysNotifyBroadcast</code> call returns. This notification occurs in priority order.<a name="926478"> </a><p></p><dt>The system allows nested notifications; that is, the recipient of a notification might broadcast a new notification, whose recipient might broadcast another new notification and so on. The constant <code>sysNotifyDefaultQueueSize</code> specifies how many levels of nested notification are allowed. If you reach this limit, the error <code>sysNotifyErrBroadcastBusy</code> is returned and your notification is not broadcast. To avoid reaching the limit, use <code><a href="NotifyMgr.html#926492"></code>SysNotifyBroadcastDeferred<code></a></code> instead of <code><a href="NotifyMgr.html#926461"></code>SysNotifyBroadcast<code></a></code> in your notification handlers. This ensures that the notification will not be broadcast until the top of the event loop. <a name="930627"> </a><blockquote><hr><em><strong>WARNING!</strong></em><p></p>Do not call <code>SysNotifyBroadcast</code> from code that might be called from a background task (such as a trap patch) with the memory semaphore reserved. Use <code>SysNotifyBroadcastDeferred</code> instead. <hr><br></blockquote></dl><a name="926486"> </a><h4>Compatibility </h4><dl><a name="926490"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#499271">Notification Feature Set</a> is present. </dl></dl></dl><a name="926492"> </a><br> <br> <br><h3> SysNotifyBroadcastDeferred</h3><dl><dl><a name="926493"> </a><h4>Purpose </h4><dl><a name="926494"> </a><p></p><dt>Enqueue a notification for later broadcast.</dl><a name="926495"> </a><h4>Prototype </h4><dl><a name="926496"> </a><dt><code>Err SysNotifyBroadcastDeferred (SysNotifyParamType&nbsp;*notify, Int16&nbsp;paramSize)</code></dl></dl><dl><a name="926497"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926498"> </a><CODE>&lt;-&gt; <code>notify</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The notification to enqueue. See <code><a href="NotifyMgr.html#926235"></code>SysNotifyParamType<code></a></code>.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926502"> </a><CODE>-&gt; <code>paramSize</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Size of the data pointed to by the field <code>notify-&gt;notifyDetailsP</code>. <br></TD></TR></TABLE></dl><dl><a name="926503"> </a><h4>Result </h4><dl><a name="926504"> </a><p></p><dt>Returns one of the following error codes:<TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="929962"> </a><CODE><code>errNone</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>No error.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926506"> </a><CODE><code>memErrNotEnoughSpace</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT></code>There is not enough memory to allocate a new notification entry in the queue. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926507"> </a><CODE><code>sysErrParamErr</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT><code>paramSize</code> is a negative number. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926509"> </a><CODE><code>sysNotifyErrQueueFull</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The queue has reached its maximum number of entries. <br></TD></TR></TABLE></dl></dl><dl><a name="926510"> </a><h4>Comments </h4><dl><a name="926514"> </a><p></p><dt>This function is similar to <code><a href="NotifyMgr.html#926461"></code>SysNotifyBroadcast<code></a></code> except that the broadcast does not take place until the top of the event loop (specifically, the next time <code><a href="SystemEventManager.html#925143"></code>EvtGetEvent<code></a></code> is called). The system copies the <code>notify</code> structure to a new memory chunk, which is disposed of upon completion of the broadcast. (The <code>paramSize</code> parameter is used when copying the <code>notifyDetailsP</code> portion of the <code>notify</code> structure.) </dl><a name="926519"> </a><h4>Compatibility </h4><dl><a name="930376"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#499271">Notification Feature Set</a> is present. </dl></dl></dl><a name="926525"> </a><br> <br> <br><h3> SysNotifyRegister</h3><dl><dl><a name="926526"> </a><h4>Purpose </h4><dl><a name="926527"> </a><p></p><dt>Register to receive a notification. </dl><a name="926528"> </a><h4>Prototype </h4><dl><a name="926529"> </a><dt><code>Err SysNotifyRegister (UInt16&nbsp;cardNo, LocalID&nbsp;dbID, UInt32&nbsp;notifyType, SysNotifyProcPtr&nbsp;callbackP, Int8&nbsp;priority, void&nbsp;*userDataP)</code></dl></dl><dl><a name="926530"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926531"> </a><CODE>-&gt; <code>cardNo</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Number of the storage card on which the application or code resource resides.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926532"> </a><CODE>-&gt; <code>dbID</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Local ID of the application or code resource.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926533"> </a><CODE>-&gt; <code>notifyType</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The event that the application wants to receive notifications about. See <a href="NotifyMgr.html#926298">Notification Manager Event Constants</a>.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926537"> </a><CODE>-&gt; <code>callbackP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT><code>NULL</code> to receive the notification as an application launch code. If your code does not have a <code>PilotMain</code> function (for example, if it is a shared library), pass a pointer to a function that should be called when the notification is broadcast. See <code><a href="NotifyMgr.html#926620"></code>SysNotifyProcPtr<code></a></code>. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926542"> </a><CODE>-&gt; <code>priority</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The priority with which the application should receive the event. Most applications and other code resources should always use <code>sysNotifyNormalPriority</code>. In rare circumstances, you may need to ensure that your code is notified toward the beginning or toward the end of the notification sequence. If so, specify a value between -15 and +15. The smaller the priority, the earlier your code is notified. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926544"> </a><CODE>-&gt; <code>userDataP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Caller-defined data to pass to the notification handler. <br></TD></TR></TABLE></dl><dl><a name="926545"> </a><h4>Result </h4><dl><a name="926546"> </a><p></p><dt>Returns one of the following error codes:<TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="929967"> </a><CODE><code>errNone</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>No error.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926548"> </a><CODE><code>sysErrParamErr</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The database ID is <code>NULL</code>.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926549"> </a><CODE><code>sysNotifyErrDuplicateEntry</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT></code>This application is already registered to receive this notification. <br></TD></TR></TABLE></dl></dl><dl><a name="926550"> </a><h4>Comments </h4><dl><a name="926551"> </a><p></p><dt>Call this function when your code should receive a notification that a specific event has occurred or is about to occur. See <a href="NotifyMgr.html#926298">Notification Manager Event Constants</a> for a list of the events about which you can receive notifications. Once you register for a notification, you remain registered to receive it until a system reset occurs or until you explicitly unregister using <code><a href="NotifyMgr.html#926589"></code>SysNotifyUnregister<code></a></code>.<a name="926555"> </a><p></p><dt>If you're writing an application, you should pass <code>NULL</code> as the <code>callbackP</code> parameter. In this case, the system notifies your application by sending it the <code><a href="AppLaunchCodes.html#926527"></code>sysAppLaunchCmdNotify<code></a></code> launch code. This launch code's parameter block points to a <code><a href="NotifyMgr.html#926235"></code>SysNotifyParamType<code></a></code> structure containing details about the notification. <a name="926564"> </a><p></p><dt>If your code is not in an application, for example, it is in a shared library or a separately loaded code resource, then receiving a launch code is not possible. In this case, pass a pointer to a callback function in <code>callbackP</code>. This callback should follow the prototype shown in <code><a href="NotifyMgr.html#926620"></code>SysNotifyProcPtr<code></a></code>. Note that you should always supply a card number and database ID to <code>SysNotifyRegister</code>, even if you specify a callback function. <a name="926569"> </a><blockquote><br><hr><br><em><strong>IMPORTANT:  </strong></em>Because the <code>callbackP</code> pointer is used to directly call the function, the pointer must remain valid from the time <code>SysNotifyRegister</code> is called to the time the notification is broadcast. If the function is in a shared library, you must keep the library open. If the function is in a separately loaded code resource, the resource must remain locked while registered for the notification. When you close a library or unlock a resource, you must first unregister for any notifications. If you don't, the system will crash when the notification is broadcast. <br><hr><br></blockquote><a name="926570"> </a><p></p><dt>Whether the notification handler is responding to <code>sysAppLaunchCmdNotify</code> or uses the callback function, the notification handler may perform any processing necessary. As with most launch codes, it's not possible to access global variables. If the handler needs access to any particular value to respond to the notification, pass a pointer to that value in the <code>userDataP</code> parameter. The system passes this pointer back to your application or callback function in the launch code's parameter block. <a name="926571"> </a><p></p><dt>The notification handler may unregister for this notification or register for other notifications. It may also broadcast another notifications; however, it's recommended that you use <code><a href="NotifyMgr.html#926492"></code>SysNotifyBroadcastDeferred<code></a></code> to do this so as not to overflow the broadcast stack. <a name="926575"> </a><p></p><dt>You may display a user interface in your notification handler; however, you should be careful when you do so. Many of the notifications are broadcast during <code><a href="SystemManager.html#925364"></code>SysHandleEvent<code></a></code>, which means your application event loop might not have progressed to the point where it is possible for you to display a user interface, or you may overflow the stack by displaying a user interface at this stage. See <a href="NotifyMgr.html#926298">Notification Manager Event Constants</a> to learn which notifications are broadcast during <code>SysHandleEvent</code>. </dl><a name="926583"> </a><h4>Compatibility </h4><dl><a name="930383"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#499271">Notification Feature Set</a> is present. </dl></dl></dl><a name="926589"> </a><br> <br> <br><h3> SysNotifyUnregister</h3><dl><dl><a name="926590"> </a><h4>Purpose </h4><dl><a name="926591"> </a><p></p><dt>Cancel notification of the given event.</dl><a name="926592"> </a><h4>Prototype </h4><dl><a name="926593"> </a><dt><code>Err SysNotifyUnregister(UInt16&nbsp;cardNo, LocalID&nbsp;dbID, UInt32&nbsp;notifyType, Int8&nbsp;priority)</code></dl></dl><dl><a name="926594"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926595"> </a><CODE>-&gt; <code>cardNo</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Number of the storage card on which the application or code resource resides.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926596"> </a><CODE>-&gt; <code>dbID</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Local ID of the application or code resource.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926599"> </a><CODE>-&gt; <code>notifyType</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The event to unregister for. See <a href="NotifyMgr.html#926298">Notification Manager Event Constants</a>.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926601"> </a><CODE>-&gt; <code>priority</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The priority value you passed as part of <code><a href="NotifyMgr.html#926525"></code>SysNotifyRegister<code></a></code>.<br></TD></TR></TABLE></dl><dl><a name="926605"> </a><h4>Result </h4><dl><a name="926606"> </a><p></p><dt>Returns one of the following error codes:<TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="929972"> </a><CODE><code>errNone</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>No error.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926608"> </a><CODE><code>sysNotifyErrEntryNotFound</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The application wasn't registered to receive these notifications.<br></TD></TR></TABLE></dl></dl><dl><a name="926609"> </a><h4>Comments </h4><dl><a name="926610"> </a><p></p><dt>Use this function to remove your code from the list of those that receive notifications about a particular event. This function is particularly necessary if you are writing a shared library or a separately loaded code resource that receives notifications. When the resource is unloaded, it must unregister for all of its notifications, or the system will crash when the notification is broadcast. </dl><a name="926611"> </a><h4>Compatibility </h4><dl><a name="930412"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#499271">Notification Feature Set</a> is present. </dl></dl></dl><a name="926617"> </a><h2> Application-Defined Functions</h2><a name="926620"> </a><br> <br> <br><h3> SysNotifyProcPtr</h3><dl><dl><a name="926621"> </a><h4>Purpose </h4><dl><a name="926622"> </a><p></p><dt>Handle a notification.</dl><a name="926623"> </a><h4>Prototype </h4><dl><a name="926624"> </a><dt><code>Err (*SysNotifyProcPtr) (SysNotifyParamType&nbsp;*notifyParamsP)</code></dl></dl><dl><a name="926625"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926626"> </a><CODE>-&gt; <code>notifyParamsP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to a structure that contains the notification event that occurred and any other information about it. See <code><a href="NotifyMgr.html#926235"></code>SysNotifyParamType<code></a></code>.<br></TD></TR></TABLE></dl><dl><a name="926630"> </a><h4>Result </h4><dl><a name="926631"> </a><p></p><dt>Always return 0. </dl></dl><dl><a name="926632"> </a><h4>Comments </h4><dl><a name="926633"> </a><p></p><dt>You pass this function as a parameter to <code><a href="NotifyMgr.html#926525"></code>SysNotifyRegister<code></a></code> when registering code that does not have a <code>PilotMain</code> for a notification. See the description of <code><a href="NotifyMgr.html#926525"></code>SysNotifyRegister<code></a></code> for advice on writing a notification handler. <a name="930153"> </a><blockquote><br><hr><br><em><strong>IMPORTANT:  </strong></em>Because the <code>callbackP</code> pointer is used to directly call the function, the pointer must remain valid from the time <code>SysNotifyRegister</code> is called to the time the notification is broadcast. If the function is in a shared library, you must keep the library open. If the function is in a separately loaded code resource, the resource must remain locked while registered for the notification. When you close a library or unlock a resource, you must first unregister for any notifications. If you don't, the system will crash when the notification is broadcast. <br><hr><br></blockquote><a name="926647"> </a><p></p><dt><strong></strong><a name="926648"> </a><p></p><dt><a name="925145"> </a><p></p><dt></dl></dl></dl><hr><br><center><B>Palm OS SDK Reference</B></center><br><TABLE WIDTH="100%">  <TR>    <TD WIDTH=10%>&nbsp</TD>    <TD WIDTH=20%><a href="MemoryManager.html"><IMG SRC="images/prev.html" BORDER=0 ALT="Previous Page"></TD>    <TD WIDTH=20%><a href="ReferenceTOC.html"><IMG SRC="images/content.gif" BORDER=0 ALT="Table of Contents"></TD>    <TD WIDTH=20%><a href="ReferenceIX.html"><IMG SRC="images/index.gif" BORDER=0 ALT="Index"></TD>    <TD WIDTH=20%><a href="OverlayMgr.html"><IMG SRC="images/next.html" BORDER=0 ALT="Next Page"></TD>    <TD WIDTH=10%>&nbsp</TD>  </TR></TABLE><br><small><em>This is page 38 of 85 in this book</em></small><hr><br><address><a href="http://www.palmos.com/dev/">Palm Computing Platform Development Zone</a></address><i>Copyright &#169; 2000, Palm, Inc.   All rightsreserved.</i><!-- This file was created with Quadralay WebWorks Publisher 5.0.2 --><!-- --><!-- For more information on how this document, and how the rest of --><!-- this server was created, email devsupp@palm.com --><!-- --><!-- Last updated: 03/27/00 21:28:40 --></body>
<!-- Mirrored from users.fuw.edu.pl/~michalj/palmos/NotifyMgr.html by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 17 Feb 2015 19:10:01 GMT -->
</html>