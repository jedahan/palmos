<html>
<!-- Mirrored from users.fuw.edu.pl/~michalj/palmos/SerialLinkManager.html by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 17 Feb 2015 19:10:02 GMT -->
<head><title>Serial Link Manager</title></head><body bgcolor="#ffffff"><TABLE WIDTH="100%">  <TR>    <TD WIDTH=25%><a href="SerialDriver.html"><IMG SRC="images/prev.html" BORDER=0 ALT="Previous Page"></TD>    <TD WIDTH=25%><a href="ReferenceTOC.html"><IMG SRC="images/content.gif" BORDER=0 ALT="Table of Contents"></TD>    <TD WIDTH=25%><a href="ReferenceIX.html"><IMG SRC="images/index.gif" BORDER=0 ALT="Index"></TD>    <TD WIDTH=25%><a href="INetLib.html"><IMG SRC="images/next.html" BORDER=0 ALT="Next Page"></TD>  </TR></TABLE><br><center><B>Palm OS SDK Reference</B></center><hr><br><a name="924904"> </a><h1><IMG SRC="images/PCPplain.gif" ALT="Palm Logo" WIDTH="45" HEIGHT="44"> <a name="924903"> </a>60 Serial Link Manager</h1><dl><a name="924905"> </a><p></p><dt>This chapter provides reference material for the serial link manager API. The header file <code>SerialLinkMgr.h</code> declares the serial link manager API. For more information on the serial link manager, see the chapter <a href="SerialCommunication.html#928031">"Serial Communication"</a> in the <em>Palm OS Programmer's Companion</em>. </dl><a name="924910"> </a><h2> Serial Link Manager Functions</h2><a name="924913"> </a><br> <br> <br><h3> SlkClose</h3><dl><dl><a name="924914"> </a><h4>Purpose </h4><dl><a name="924915"> </a><p></p><dt>Close down the serial link manager.</dl><a name="924916"> </a><h4>Prototype </h4><dl><a name="924918"> </a><dt><code>Err SlkClose (void)</code></dl></dl><dl><a name="924919"> </a><h4>Parameters </h4><dl><a name="924920"> </a><p></p><dt>None.</dl></dl><dl><a name="924921"> </a><h4>Result </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="924922"> </a><CODE>0</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>No error.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="924924"> </a><CODE>slkErrNotOpen</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The serial link manager was not open.<br></TD></TR></TABLE></dl><dl><a name="924925"> </a><h4>Comments </h4><dl><a name="924926"> </a><p></p><dt>When the open count reaches zero, this routine frees resources allocated by serial link manager.</dl></dl></dl><a name="924929"> </a><br> <br> <br><h3> SlkCloseSocket</h3><dl><dl><a name="924930"> </a><h4>Purpose </h4><dl><a name="924934"> </a><p></p><dt>Closes a socket previously opened with <a href="SerialLinkManager.html#924995">SlkOpenSocket</a>.<a name="924935"> </a><p></p><dt>The caller is responsible for closing the communications library used by this socket, if necessary.</dl><a name="924936"> </a><h4>Prototype </h4><dl><a name="924938"> </a><dt><code>Err SlkCloseSocket (UInt16&nbsp;socket)</code></dl></dl><dl><a name="924939"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="924940"> </a><CODE><code>socket</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The socket ID to close.<br></TD></TR></TABLE></dl><dl><a name="924941"> </a><h4>Result </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="924942"> </a><CODE>0</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>No error.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="924944"> </a><CODE>slkErrSocketNotOpen</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The socket was not open.<br></TD></TR></TABLE></dl><dl><a name="924945"> </a><h4>Comments </h4><dl><a name="924946"> </a><p></p><dt><code>SlkCloseSocket</code> frees system resources the serial link manager allocated for the socket. It does not free resources allocated and passed by the client, such as the buffers passed to <a href="SerialLinkManager.html#925076">SlkSetSocketListener</a>; this is the client's responsibility. The caller is also responsible for closing the communications library used by this socket.</dl><a name="924950"> </a><h4>See Also </h4><dl><a name="924957"> </a><p></p><dt><a href="SerialLinkManager.html#924995">SlkOpenSocket</a> </dl></dl></dl><a name="924960"> </a><br> <br> <br><h3> SlkFlushSocket</h3><dl><dl><a name="924961"> </a><h4>Purpose </h4><dl><a name="924962"> </a><p></p><dt>Flush the receive queue of the communications library associated with the given socket.</dl><a name="924963"> </a><h4>Prototype </h4><dl><a name="924965"> </a><dt><code>Err SlkFlushSocket (UInt16&nbsp;socket, Int32&nbsp;timeout)</code></dl></dl><dl><a name="924966"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="924967"> </a><CODE>-&gt; <code>socket</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Socket ID.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="924968"> </a><CODE>-&gt; <code>timeout</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Interbyte timeout in system ticks.<br></TD></TR></TABLE></dl><dl><a name="924969"> </a><h4>Result </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="924970"> </a><CODE>0</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>No error.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="924972"> </a><CODE>slkErrSocketNotOpen</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The socket wasn't open.<br></TD></TR></TABLE></dl></dl><a name="924975"> </a><br> <br> <br><h3> SlkOpen</h3><dl><dl><a name="924976"> </a><h4>Purpose </h4><dl><a name="924977"> </a><p></p><dt>Initialize the serial link manager.</dl><a name="924978"> </a><h4>Prototype </h4><dl><a name="924980"> </a><dt><code>Err SlkOpen (void)</code></dl></dl><dl><a name="924981"> </a><h4>Parameters </h4><dl><a name="924982"> </a><p></p><dt>None.</dl></dl><dl><a name="924983"> </a><h4>Result </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="924984"> </a><CODE>0</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>No error.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="924986"> </a><CODE>slkErrAlreadyOpen</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>No error.<br></TD></TR></TABLE></dl><dl><a name="924987"> </a><h4>Comments </h4><dl><a name="924988"> </a><p></p><dt>Initializes the serial link manager, allocating necessary resources. Return codes of 0 (zero) and slkErrAlreadyOpen both indicate success. Any other return code indicates failure. The slkErrAlreadyOpen function informs the client that someone else is also using the serial link manager. If the serial link manager was successfully opened by the client, the client needs to call <a href="SerialLinkManager.html#924913">SlkClose</a> when it finishes using the serial link manager.</dl></dl></dl><a name="924995"> </a><br> <br> <br><h3> SlkOpenSocket</h3><dl><dl><a name="924996"> </a><h4>Purpose </h4><dl><a name="924997"> </a><p></p><dt>Open a serial link socket and associate it with a communications library. The socket may be a known static socket or a dynamically assigned socket.</dl><a name="924998"> </a><h4>Prototype </h4><dl><a name="925000"> </a><dt><code>Err SlkOpenSocket (UInt16&nbsp;portID, UInt16&nbsp;*socketP, Boolean&nbsp;staticSocket)</code></dl></dl><dl><a name="925001"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925002"> </a><CODE><code>portID</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Comm library reference number for socket.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925003"> </a><CODE><code>socketP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to location for returning the socket ID.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925004"> </a><CODE><code>staticSocket</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>If <code>TRUE</code>, *<code>socketP</code> contains the desired static socket number to open. If <code>FALSE</code>, any free socket number is assigned dynamically and opened.<br></TD></TR></TABLE></dl><dl><a name="925005"> </a><h4>Result </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925006"> </a><CODE>0</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>No error.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925008"> </a><CODE>slkErrOutOfSockets</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>No more sockets can be opened.<br></TD></TR></TABLE></dl><dl><a name="925009"> </a><h4>Comments </h4><dl><a name="925010"> </a><p></p><dt>The communications library must already be initialized and opened (see <a href="SerialManager.html#925179">SerOpen</a>). When finished using the socket, the caller must call <a href="SerialLinkManager.html#924929">SlkCloseSocket</a> to free system resources allocated for the socket. For information about well-known static socket IDs, see <a href="SerialCommunication.html#925615">The Serial Link Protocol</a>.</dl></dl></dl><a name="925022"> </a><br> <br> <br><h3> SlkReceivePacket</h3><dl><dl><a name="925023"> </a><h4>Purpose </h4><dl><a name="925024"> </a><p></p><dt>Receive and validate a packet for a particular socket or for any socket. Check for format and checksum errors.</dl><a name="925025"> </a><h4>Prototype </h4><dl><a name="925027"> </a><dt><code>Err SlkReceivePacket (UInt16&nbsp;socket, Boolean&nbsp;andOtherSockets, SlkPktHeaderPtr&nbsp;headerP, void*&nbsp;bodyP, UInt16&nbsp;bodySize, Int32&nbsp;timeout)</code></dl></dl><dl><a name="925028"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925029"> </a><CODE>-&gt; <code>socket</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The socket ID.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925030"> </a><CODE>-&gt; <code>andOtherSockets</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT></code>If <code>TRUE</code>, ignore destination in packet header.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925031"> </a><CODE>&lt;-&gt; <code>headerP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to the packet header buffer (size of SlkPktHeaderType).<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925032"> </a><CODE>&lt;-&gt; <code>bodyP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to the packet client data buffer.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925033"> </a><CODE>-&gt; <code>bodySize</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Size of the client data buffer (maximum client data size which can be accommodated).<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925034"> </a><CODE>-&gt; <code>timeout</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Maximum number of system ticks to wait for beginning of a packet; -1 means wait forever.<br></TD></TR></TABLE></dl><dl><a name="925035"> </a><h4>Result </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925036"> </a><CODE>0</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>No error.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925038"> </a><CODE><code>slkErrSocketNotOpen</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT></code>The socket was not open.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925040"> </a><CODE><code>slkErrTimeOut</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Timed out waiting for a packet.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925042"> </a><CODE><code>slkErrWrongDestSocket</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT></code>The packet being received had an unexpected destination.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925044"> </a><CODE><code>slkErrChecksum</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Invalid header checksum or packet CRC-16.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925046"> </a><CODE><code>slkErrBuffer</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Client data buffer was too small for packet's client data.<br></TD></TR></TABLE><dl><a name="925047"> </a><p></p><dt>If <code>andOtherSockets</code> is <code>FALSE</code>, this routine returns with an error code unless it gets a packet for the specific socket.<a name="925048"> </a><p></p><dt>If <code>andOtherSockets</code> is <code>TRUE</code>, this routine returns successfully if it sees any incoming packet from the communications library used by <code>socket</code>.</dl></dl><dl><a name="925049"> </a><h4>Comments </h4><dl><a name="925050"> </a><p></p><dt>You may request to receive a packet for the passed socket ID only, or for any open socket which does not have a socket listener. The parameters also specify buffers for the packet header and client data, and a timeout. The timeout indicates how long the receiver should wait for a packet to begin arriving before timing out. If a packet is received for a socket with a registered socket listener, it will be dispatched via its socket listener procedure. On success, the packet header buffer and packet client data buffer is filled in with the actual size of the packet's client data in the packet header's <code>bodySize</code> field.</dl></dl></dl><a name="925056"> </a><br> <br> <br><h3> SlkSendPacket</h3><dl><dl><a name="925057"> </a><h4>Purpose </h4><dl><a name="925058"> </a><p></p><dt>Send a serial link packet via the serial output driver. </dl><a name="925059"> </a><h4>Prototype </h4><dl><a name="925061"> </a><dt><code>Err SlkSendPacket (SlkPktHeaderPtr&nbsp;headerP, SlkWriteDataPtr&nbsp;writeList)</code></dl></dl><dl><a name="925062"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925063"> </a><CODE>&lt;-&gt; <code>headerP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to the packet header structure with client information filled in (see Comments).<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925064"> </a><CODE>-&gt; <code>writeList</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>List of packet client data blocks (see Comments).<br></TD></TR></TABLE></dl><dl><a name="925065"> </a><h4>Result </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925066"> </a><CODE>0</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>No error.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925068"> </a><CODE>slkErrSocketNotOpen</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The socket was not open.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925070"> </a><CODE>slkErrTimeOut</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Handshake timeout.<br></TD></TR></TABLE></dl><dl><a name="925071"> </a><h4>Comments </h4><dl><a name="925072"> </a><p></p><dt>SlkSendPacket stuffs the signature, client data size, and the checksum fields of the packet header. The caller must fill in all other packet header fields. If the transaction ID field is set to 0 (zero), the serial link manager automatically generates and stuffs a new non-zero transaction ID. The array of SlkWriteDataType structures enables the caller to specify the client data part of the packet as a list of noncontiguous blocks. The end of list is indicated by an array element with the <code>size</code> field set to 0 (zero). This call blocks until the entire packet is sent out or until an error occurs.</dl></dl></dl><a name="925076"> </a><br> <br> <br><h3> SlkSetSocketListener</h3><dl><dl><a name="925077"> </a><h4>Purpose </h4><dl><a name="925078"> </a><p></p><dt>Register a socket listener for a particular socket. </dl><a name="925079"> </a><h4>Prototype </h4><dl><a name="925081"> </a><dt><code>Err SlkSetSocketListener (UInt16&nbsp;socket, SlkSocketListenPtr&nbsp;socketP)</code></dl></dl><dl><a name="925082"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925083"> </a><CODE>-&gt; <code>socket</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Socket ID.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925084"> </a><CODE>-&gt; <code>socketP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to a SlkSocketListenType structure.<br></TD></TR></TABLE></dl><dl><a name="925085"> </a><h4>Result </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925086"> </a><CODE>0</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>No error.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925088"> </a><CODE><code>slkErrBadParam</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Invalid parameter.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925090"> </a><CODE><code>slkErrSocketNotOpen</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT></code>The socket was not open.<br></TD></TR></TABLE></dl><dl><a name="925091"> </a><h4>Comments </h4><dl><a name="925092"> </a><p></p><dt>Called by applications to set up a socket listener.<a name="925093"> </a><p></p><dt>Since the serial link manager does not make a copy of the <code>SlkSocketListenType</code> structure, but instead saves the passed pointer to it, the structure <ul type="SQUARE"><a name="925094"> </a><br><li>must <strong>not</strong> be an automatic variable (that is, local variable allocated on the stack) <br><a name="925095"> </a><br><li>may be a global variable in an application<br><a name="925096"> </a><br><li>may be a locked chunk allocated from the dynamic heap <br></ul><a name="925098"> </a><p></p><dt>The <code>SlkSocketListenType</code> structure specifies pointers to the socket listener procedure and the data buffers for dispatching packets destined for this socket. Pointers to two buffers must be specified: the packet header buffer (size of <code>SlkPktHeaderType</code>), and the packet body (client data) buffer. The packet body buffer must be large enough for the largest expected client data size. Both buffers may be application global variables or locked chunks allocated from the dynamic heap. <a name="925102"> </a><p></p><dt>The socket listener procedure is called when a valid packet is received for the socket. Pointers to the packet header buffer and the packet body buffer are passed as parameters to the socket listener procedure. <a name="925103"> </a><blockquote><hr><strong>NOTE: &nbsp</strong><p></p>The application is responsible for freeing the <code>SlkSocketListenType</code> structure or the allocated buffers when the socket is closed. The serial link manager doesn't do it. <hr><br></blockquote></dl></dl></dl><a name="925107"> </a><br> <br> <br><h3> SlkSocketPortID</h3><dl><dl><a name="925108"> </a><h4>Purpose </h4><dl><a name="925109"> </a><p></p><dt>Get the port ID associated with a particular socket; for use with the new serial manager.</dl><a name="925110"> </a><h4>Prototype </h4><dl><a name="925111"> </a><dt><code>Err	 SlkSocketPortID (UInt16&nbsp;socket, UInt16&nbsp;*&nbsp;portIDP)</code></dl></dl><dl><a name="925112"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925113"> </a><CODE>-&gt; <code>socket</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The socket ID.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925114"> </a><CODE>&lt;-&gt; <code>portIDP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to location for returning the port ID.<br></TD></TR></TABLE></dl><dl><a name="925115"> </a><h4>Result </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925116"> </a><CODE>0</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>No error.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925118"> </a><CODE>slkErrSocketNotOpen</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The socket was not open.<br></TD></TR></TABLE></dl><dl><a name="925119"> </a><h4>Compatibility </h4><dl><a name="925123"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#484724">New Serial Manager Feature Set</a> is present.</dl></dl></dl><a name="925141"> </a><br> <br> <br><h3> SlkSocketSetTimeout</h3><dl><dl><a name="925142"> </a><h4>Purpose </h4><dl><a name="925143"> </a><p></p><dt>Set the interbyte packet receive-timeout for a particular socket.</dl><a name="925144"> </a><h4>Prototype </h4><dl><a name="925146"> </a><dt><code>Err SlkSocketSetTimeout (UInt16&nbsp;socket, Int32&nbsp;timeout)</code></dl></dl><dl><a name="925147"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925148"> </a><CODE>-&gt; <code>socket</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Socket ID.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925149"> </a><CODE>-&gt; <code>timeout</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Interbyte packet receive-timeout in system ticks.<br></TD></TR></TABLE></dl><dl><a name="925150"> </a><h4>Result </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925151"> </a><CODE>0</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>No error.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925153"> </a><CODE>slkErrSocketNotOpen</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The socket was not open.<br></TD></TR></TABLE><dl><a name="925164"> </a><p></p><dt><strong></strong></dl></dl></dl><hr><br><center><B>Palm OS SDK Reference</B></center><br><TABLE WIDTH="100%">  <TR>    <TD WIDTH=10%>&nbsp</TD>    <TD WIDTH=20%><a href="SerialDriver.html"><IMG SRC="images/prev.html" BORDER=0 ALT="Previous Page"></TD>    <TD WIDTH=20%><a href="ReferenceTOC.html"><IMG SRC="images/content.gif" BORDER=0 ALT="Table of Contents"></TD>    <TD WIDTH=20%><a href="ReferenceIX.html"><IMG SRC="images/index.gif" BORDER=0 ALT="Index"></TD>    <TD WIDTH=20%><a href="INetLib.html"><IMG SRC="images/next.html" BORDER=0 ALT="Next Page"></TD>    <TD WIDTH=10%>&nbsp</TD>  </TR></TABLE><br><small><em>This is page 62 of 85 in this book</em></small><hr><br><address><a href="http://www.palmos.com/dev/">Palm Computing Platform Development Zone</a></address><i>Copyright &#169; 2000, Palm, Inc.   All rightsreserved.</i><!-- This file was created with Quadralay WebWorks Publisher 5.0.2 --><!-- --><!-- For more information on how this document, and how the rest of --><!-- this server was created, email devsupp@palm.com --><!-- --><!-- Last updated: 03/27/00 21:29:09 --></body>
<!-- Mirrored from users.fuw.edu.pl/~michalj/palmos/SerialLinkManager.html by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 17 Feb 2015 19:10:02 GMT -->
</html>