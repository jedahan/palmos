<html>
<!-- Mirrored from users.fuw.edu.pl/~michalj/palmos/Menu.html by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 17 Feb 2015 19:10:01 GMT -->
<head><title>Menus</title></head><body bgcolor="#ffffff"><TABLE WIDTH="100%">  <TR>    <TD WIDTH=25%><a href="List.html"><IMG SRC="images/prev.html" BORDER=0 ALT="Previous Page"></TD>    <TD WIDTH=25%><a href="ReferenceTOC.html"><IMG SRC="images/content.gif" BORDER=0 ALT="Table of Contents"></TD>    <TD WIDTH=25%><a href="ReferenceIX.html"><IMG SRC="images/index.gif" BORDER=0 ALT="Index"></TD>    <TD WIDTH=25%><a href="PrivateRecords.html"><IMG SRC="images/next.html" BORDER=0 ALT="Next Page"></TD>  </TR></TABLE><br><center><B>Palm OS SDK Reference</B></center><hr><br><a name="924903"> </a><h1><IMG SRC="images/PCPplain.gif" ALT="Palm Logo" WIDTH="45" HEIGHT="44"> <a name="924902"> </a>14 Menus</h1><dl><a name="924904"> </a><p></p><dt>This chapter describes the menu API as declared in the header file <code>Menu.h</code>. It discusses the following topics:<ul type="SQUARE"><a name="924908"> </a><br><li><a href="Menu.html#924928">Menu Data Structures</a><br><a name="924912"> </a><br><li><a href="Menu.html#930243">Menu Constants</a><br><a name="924916"> </a><br><li><a href="Menu.html#926790">Menu Resources</a><br><a name="924920"> </a><br><li><a href="Menu.html#925196">Menu Functions</a><br></ul><a name="924922"> </a><p></p><dt>For more information on menus, see the section <a href="UserInterface.html#925921">"Menus" </a> in the <em>Palm OS Programmer's Companion</em>. </dl><a name="924928"> </a><h2> Menu Data Structures</h2><a name="924930"> </a><h3> MenuBarAttrType</h3><dl><a name="924932"> </a><p></p><dt>The <code>MenuBarAttrType</code> bit field defines some characteristics of the menu bar.<dl><a name="929627"> </a><br><code>typedef struct {</code><br></dl><dl><a name="929628"> </a><code>&nbsp&nbsp&nbsp UInt16 visible : 1;</code><br><a name="929629"> </a><code>&nbsp&nbsp&nbsp UInt16 commandPending : 1;</code><br><a name="929680"> </a><code>&nbsp&nbsp&nbsp UInt16 insPtEnabled : 1;</code><br><a name="929681"> </a><code>&nbsp&nbsp&nbsp UInt16 needsRecalc : 1;</code><br><a name="929682"> </a><code>} MenuBarAttrType;</code><br><dl><a name="929683"> </a><p></p><dt>Your code should treat the <code>MenuBarAttrType</code> structure as opaque. Use the functions specified in the descriptions below to retrieve and set each value. Do not attempt to change structure member values directly. </dl></dl></dl><a name="924939"> </a><h4> Field Descriptions</h4><p><a name="924959"> </a> </p><p><div> <table border="3"><caption><B></B></caption><tr><td><a name="924942"> </a><code>visible</code> </td><td><a name="924944"> </a>If set, the menu bar is drawn and visible on the screen. This attribute is set as part of <code><a href="Menu.html#925226"></code>MenuDrawMenu<code></a></code>, which is called when the menu is drawn. </td></tr><tr><td><a name="924949"> </a><code>commandPending</code> </td><td><a name="924951"> </a>If set, a menu command shortcut is in progress. This bit is set during <code><a href="Menu.html#925345"></code>MenuHandleEvent<code></a></code> if the menu shortcut keystroke is received. If the next key is received before the timeout value is reached, the key is examined to see if it is a valid menu command. </td></tr><tr><td><a name="924956"> </a><code>insPtEnabled</code> </td><td><a name="924958"> </a>Stores the state of the insertion point at the time the menu was drawn so that it can be restored when the menu is erased.</td></tr><tr><td><a name="929695"> </a><code>needsRecalc</code> </td><td><a name="929697"> </a>If set, recalculate menu dimensions. </td></tr></table><table><tr><td></table></div></p><a name="924960"> </a><h4> Compatibility</h4><dl><a name="929720"> </a><p></p><dt>The <code>needsRecalc</code> constant is present only if <a href="CompatibilityApdx.html#486514">3.5 New Feature Set</a> is present. </dl><a name="929710"> </a><h3> MenuCmdBarButtonType</h3><dl><a name="939039"> </a><p></p><dt>The <code>MenuCmdBarButtonType</code> struct defines a button to be displayed on the command toolbar. The <code>buttonsData</code> field of the <code><a href="Menu.html#939054"></code>MenuCmdBarType<code></a></code> struct contains an array of structures of this type. <dl><a name="928916"> </a><br><code>typedef struct {</code><br></dl><dl><a name="928917"> </a><code>&nbsp&nbsp&nbsp UInt16	 	 	 	 bitmapId;</code><br><a name="928918"> </a><code>&nbsp&nbsp&nbsp Char	 	 	 	 name[menuCmdBarMaxTextLength];</code><br><a name="928919"> </a><code>&nbsp&nbsp&nbsp MenuCmdBarResultType resultType;</code><br><a name="928920"> </a><code>&nbsp&nbsp&nbsp UInt8	 	 	 	 reserved;</code><br><a name="928921"> </a><code>&nbsp&nbsp&nbsp UInt32	 	 	 	 result;</code><br><a name="928922"> </a><code>} MenuCmdBarButtonType;</code><br><dl><a name="938241"> </a><p></p><dt>Your code should treat the <code>MenuCmdBarButtonType</code> structure as opaque. Do not attempt to change structure member values directly. Instead, use <code><a href="Menu.html#927118"></code>MenuCmdBarAddButton<code></a></code> to add a button to the display. For the most part, the parameters to <code>MenuCmdBarAddButton</code> are the same as the fields in the <code>MenuCmdBarButtonType</code>, so there should be no need to alter these fields directly. </dl></dl></dl><a name="928851"> </a><h4> Field Descriptions</h4><p><a name="929065"> </a> </p><p><div> <table border="3"><caption><B></B></caption><tr><td><a name="929070"> </a><code>bitmapId</code> </td><td><a name="929072"> </a>Resource ID of the bitmap to display on the button. This bitmap should be 13 pixels high by 16 pixels wide. </td></tr><tr><td><a name="929074"> </a><code>name</code> </td><td><a name="929076"> </a>Text to display in the status message when the user taps the button. </td></tr><tr><td><a name="929078"> </a><code>resultType</code> </td><td><a name="929080"> </a>Specifies what type of data is contained in the <code>result</code> field. See <code><a href="Menu.html#949450"></code>MenuCmdBarResultType<code></a></code>. </td></tr><tr><td><a name="929082"> </a><code>reserved</code> </td><td><a name="929084"> </a>Reserved for future use. </td></tr><tr><td><a name="929086"> </a><code>result</code> </td><td><a name="929088"> </a>Specifies the data to send when the user clicks the button. The data is interpreted as specified by the <code>resultType</code> field. The result can be a shortcut character to enqueue in a <code><a href="EventRef.html#925881"></code>keyDownEvent<code></a></code>, a menu item ID to enqueue in a <code><a href="EventRef.html#926033"></code>menuEvent<code></a></code>, or a notification to be broadcast. </td></tr></table><table><tr><td></table></div></p><a name="929725"> </a><h4> Compatibility</h4><dl><a name="929729"> </a><p></p><dt>This structure is defined only if <a href="CompatibilityApdx.html#486514">3.5 New Feature Set</a> is present. </dl><a name="949450"> </a><h3> MenuCmdBarResultType</h3><dl><a name="949452"> </a><p></p><dt>The <code>MenuCmdBarResultType</code> enum specifies how the <code>result</code> field in the <code><a href="Menu.html#929710"></code>MenuCmdBarButtonType<code></a></code> structure should be interpreted. <dl><a name="928570"> </a><br><code>typedef enum {</code><br></dl><dl><a name="928571"> </a><code>&nbsp&nbsp&nbsp menuCmdBarResultNone,</code><br><a name="928572"> </a><code>&nbsp&nbsp&nbsp menuCmdBarResultChar,</code><br><a name="928573"> </a><code>&nbsp&nbsp&nbsp menuCmdBarResultMenuItem,</code><br><a name="928574"> </a><code>&nbsp&nbsp&nbsp menuCmdBarResultNotify</code><br><a name="928575"> </a><code>} MenuCmdBarResultType;</code><br></dl></dl><a name="928568"> </a><h4> Value Descriptions</h4><p><a name="929166"> </a> </p><p><div> <table border="3"><caption><B></B></caption><tr><td><a name="929195"> </a><code>menuCmdBarResultNone</code> </td><td><a name="929197"> </a>Send nothing. </td></tr><tr><td><a name="929199"> </a><code>menuCmdBarResultChar</code> </td><td><a name="929201"> </a>The result is a character to send in a <code><a href="EventRef.html#925881"></code>keyDownEvent<code></a></code>. </td></tr><tr><td><a name="929203"> </a><code>menuCmdBarResultMenuItem</code> </td><td><a name="929205"> </a>The result is the ID of the menu item to send in a <code><a href="EventRef.html#926033"></code>menuEvent<code></a></code>. </td></tr><tr><td><a name="929207"> </a><code>menuCmdBarResultNotify</code> </td><td><a name="929209"> </a>The result is a notification constant to be broadcast using <code><a href="NotifyMgr.html#926492"></code>SysNotifyBroadcastDeferred<code></a></code>. </td></tr></table><table><tr><td></table></div></p><a name="929746"> </a><h4> Compatibility</h4><dl><a name="929750"> </a><p></p><dt>This enum is defined only if <a href="CompatibilityApdx.html#486514">3.5 New Feature Set</a> is present. </dl><a name="939054"> </a><h3> MenuCmdBarType</h3><dl><a name="939056"> </a><p></p><dt>The <code>MenuCmdBarType</code> struct defines the command toolbar. This command toolbar is allocated and displayed when the user draws the shortcut stroke in the Graffiti<sup>&#174;</sup> area. It is deallocated when <code><a href="Menu.html#925261"></code>MenuEraseStatus<code></a></code> is called, which occurs most frequently when the timeout value has elapsed. <dl><a name="928964"> </a><br><code>typedef struct MenuCmdBarType {</code><br></dl><dl><a name="928965"> </a><code>&nbsp&nbsp&nbsp WinHandle	 	 	 	 	 	 bitsBehind;</code><br><a name="928966"> </a><code>&nbsp&nbsp&nbsp Int32	 	 	 	 	 	 timeoutTick;</code><br><a name="928967"> </a><code>&nbsp&nbsp&nbsp Coord	 	 	 	 	 	 top;</code><br><a name="928968"> </a><code>&nbsp&nbsp&nbsp Int16	 	 	 	 	 	 numButtons;</code><br><a name="928969"> </a><code>&nbsp&nbsp&nbsp Boolean	 	 	 	 	 	 insPtWasEnabled;</code><br><a name="928970"> </a><code>&nbsp&nbsp&nbsp Boolean	 	 	 	 	 	 gsiWasEnabled;</code><br><a name="928971"> </a><code>&nbsp&nbsp&nbsp Boolean	 	 	 	 	 	 feedbackMode;</code><br><a name="928972"> </a><code>&nbsp&nbsp&nbsp MenuCmdBarButtonType *buttonsData;</code><br><a name="928962"> </a><code>} MenuCmdBarType;</code><br><dl><a name="938237"> </a><p></p><dt>Your code should treat the <code>MenuCmdBarType</code> structure as opaque. Do not attempt to change structure member values directly. </dl></dl></dl><a name="929314"> </a><h4> Field Descriptions</h4><p><a name="929340"> </a> </p><p><div> <table border="3"><caption><B></B></caption><tr><td><a name="929375"> </a><code>bitsBehind</code> </td><td><a name="935007"> </a>Handle for the window that contains the region obscured by the command toolbar.</td></tr><tr><td><a name="929379"> </a><code>timeoutTick</code> </td><td><a name="929381"> </a>Timeout value given in system ticks. If the user hasn't specified a command after this many ticks, the command toolbar is erased from the screen and deallocated from memory. This value also specifies how long the status message is displayed after the user successfully enters a command.</td></tr><tr><td><a name="929383"> </a><code>top</code> </td><td><a name="929385"> </a>The top bound of the command toolbar given in display-relative coordinates. The command toolbar is as wide as the screen and displays at the bottom of the screen.</td></tr><tr><td><a name="929387"> </a><code>numButtons</code> </td><td><a name="929389"> </a>Number of buttons displayed on the command toolbar. </td></tr><tr><td><a name="929391"> </a><code>insPtWasEnabled</code> </td><td><a name="929393"> </a>If <code>true</code>, the insertion point was enabled before the command toolbar was displayed and should be re-enabled when the command toolbar is erased. If <code>false</code>, the insertion point was disabled. </td></tr><tr><td><a name="929395"> </a><code>gsiWasEnabled</code> </td><td><a name="929397"> </a>If <code>true</code>, the Graffiti shift indicator was enabled before the command toolbar was displayed and should be re-enabled when the command toolbar is erased. If <code>false</code>, the Graffiti shift indicator was disabled. </td></tr><tr><td><a name="929399"> </a><code>feedbackMode</code> </td><td><a name="929401"> </a>If <code>true</code>, the command toolbar is currently displaying a status message. The status message is displayed to tell the user what command is being performed. If <code>false</code>, the command toolbar is awaiting input. </td></tr><tr><td><a name="929403"> </a><code>buttonsData</code> </td><td><a name="929405"> </a>The list of buttons to display on the command toolbar. See <code><a href="Menu.html#929710"></code>MenuCmdBarButtonType<code></a></code>. Buttons are stored in this list sequentially with the rightmost button at index 0. </td></tr></table><table><tr><td></table></div></p><a name="929842"> </a><h4> Compatibility</h4><dl><a name="929846"> </a><p></p><dt>This structure is defined only if <a href="CompatibilityApdx.html#486514">3.5 New Feature Set</a> is present. </dl><a name="926953"> </a><h3> MenuBarPtr</h3><dl><a name="924965"> </a><p></p><dt>The <code>MenuBarPtr</code> type defines a pointer to a <code><a href="Menu.html#924976"></code>MenuBarType<code></a></code>. <dl><a name="924966"> </a><br><code>typedef MenuBarType *MenuBarPtr;</code><br></dl></dl><a name="924976"> </a><h3> MenuBarType</h3><dl><a name="924979"> </a><p></p><dt>The <code>MenuBarType</code> structure defines the menu bar. There is one menu bar per form. <dl><a name="924980"> </a><br><code>typedef struct {</code><br></dl><dl><a name="924981"> </a><code>&nbsp&nbsp&nbsp WinHandle	 	 	 	 	 	 	 	 barWin;</code><br><a name="924982"> </a><code>&nbsp&nbsp&nbsp WinHandle	 	 	 	 	 	 	 	 bitsBehind;</code><br><a name="924983"> </a><code>&nbsp&nbsp&nbsp WinHandle	 	 	 	 	 	 	 	 savedActiveWin;</code><br><a name="924984"> </a><code>&nbsp&nbsp&nbsp WinHandle	 	 	 	 	 	 	 	 bitsBehindStatus;</code><br><a name="924985"> </a><code>&nbsp&nbsp&nbsp MenuBarAttrType 	 attr;</code><br><a name="924986"> </a><code>&nbsp&nbsp&nbsp Int16	 	 	 	 	 	 	 	 curMenu;</code><br><a name="924987"> </a><code>&nbsp&nbsp&nbsp Int16	 	 	 	 	 	 	 	 curItem;</code><br><a name="924988"> </a><code>&nbsp&nbsp&nbsp Int32	 	 	 	 	 	 	 	 commandTick;</code><br><a name="924989"> </a><code>&nbsp&nbsp&nbsp Int16	 	 	 	 	 	 	 	 numMenus;</code><br><a name="924990"> </a><code>&nbsp&nbsp&nbsp MenuPullDownPtr 	 menus;</code><br><a name="924991"> </a><code>} MenuBarType;</code><br><dl><a name="924992"> </a><p></p><dt>Your code should treat the <code>MenuBarType</code> structure as opaque. Do not attempt to change structure member values directly. </dl></dl></dl><a name="929866"> </a><h4> Field Descriptions</h4><p><a name="929925"> </a> </p><p><div> <table border="3"><caption><B></B></caption><tr><td><a name="929870"> </a><code>barWin</code> </td><td><a name="929872"> </a>Handle for the window that contains the menu bar.</td></tr><tr><td><a name="929874"> </a><code>bitsBehind</code> </td><td><a name="929876"> </a>Handle for the window that contains the region obscured by the menu bar.</td></tr><tr><td><a name="929878"> </a><code>savedActiveWin</code> </td><td><a name="929880"> </a>Handle where the currently active window is saved so that it can be restored when the menu is erased. </td></tr><tr><td><a name="929882"> </a><code>bitsBehindStatus</code> </td><td><a name="929884"> </a>Handle where the bits behind the status message are saved so that when the message display terminates, the bits can be restored.</td></tr><tr><td><a name="929886"> </a></td><td><a name="929888"> </a>The status message is displayed when the user activates the menu through the use of the command keystroke. </td></tr><tr><td><a name="929890"> </a><code>attr</code> </td><td><a name="929892"> </a>Menu bar attributes. See <code><a href="Menu.html#924930"></code>MenuBarAttrType<code></a></code>.</td></tr><tr><td><a name="929897"> </a><code>curMenu</code> </td><td><a name="929899"> </a>Menu number for the currently visible menu. Menus are numbered sequentially starting with 0. The value is preserved when the menu bar is dismissed. A value of <code>noMenuSelection</code> indicates that there is no current pull-down menu.</td></tr><tr><td><a name="929902"> </a><code>curItem</code> </td><td><a name="929904"> </a>Item number of the currently highlighted menu item. The items in each menu are numbered sequentially, starting with zero. </td></tr><tr><td><a name="929906"> </a></td><td><a name="929909"> </a>A value of <code>noMenuItemSelection</code> indicates that there is no current item selected. </td></tr><tr><td><a name="929911"> </a><code>commandTick</code> </td><td><a name="929913"> </a>Tick count at which the status message should be erased. </td></tr><tr><td><a name="929915"> </a><code>numMenus</code> </td><td><a name="929917"> </a>Number of pull-down menus on the menu bar.</td></tr><tr><td><a name="929919"> </a><code>menus</code> </td><td><a name="929924"> </a>Array of <code><a href="Menu.html#925097"></code>MenuPullDownType<code></a></code> structures.</td></tr></table><table><tr><td></table></div></p><a name="925054"> </a><h4> Compatibility</h4><dl><a name="938502"> </a><p></p><dt>If <a href="CompatibilityApdx.html#486514">3.5 New Feature Set</a> is present, the <code>bitsBehindStatus</code> and <code>commandTick</code> fields are defined but are not used. Instead, the <code>bitsBehind</code> and <code>timeoutTick</code> fields in <code><a href="Menu.html#939054"></code>MenuCmdBarType<code></a></code> define the save-behind window and the timeout value for the command toolbar. </dl><a name="938501"> </a><h3> MenuItemType</h3><dl><a name="925056"> </a><p></p><dt>The <code>MenuItemType</code> structure defines a specific item within a menu. The <code>items</code> array in the <code><a href="Menu.html#925097"></code>MenuPullDownType<code></a></code> structure contains one <code>MenuItemType</code> structure for each menu item in the pull-down menu. <a name="937037"> </a><p></p><dt>If <a href="CompatibilityApdx.html#486514">3.5 New Feature Set</a> is present, you can add a menu item to a pull-down menu programmatically using <code><a href="Menu.html#936898"></code>MenuAddItem<code></a></code>.<dl><a name="925060"> </a><br><code>typedef struct {</code><br></dl><dl><a name="925061"> </a><code>&nbsp&nbsp&nbsp UInt16	 	 	 	 id;</code><br><a name="925062"> </a><code>&nbsp&nbsp&nbsp Char	 	 	 	 command;</code><br><a name="930060"> </a><code>&nbsp&nbsp&nbsp UInt8	 	 	 	 hidden: 1;</code><br><a name="930061"> </a><code>&nbsp&nbsp&nbsp UInt8 	 	 	 	 reserved: 7;</code><br><a name="930050"> </a><code>&nbsp&nbsp&nbsp Char *	 	 	 	 itemStr;</code><br><a name="925064"> </a><code>} MenuItemType;</code><br></dl></dl><a name="925066"> </a><h4> Field Descriptions</h4><p><a name="925088"> </a> </p><p><div> <table border="3"><caption><B></B></caption><tr><td><a name="925069"> </a>i<code>d</code> </td><td><a name="925071"> </a>ID value you specified when you created the menu item. This ID value is included as part of the event data of a <code><a href="EventRef.html#926033"></code>menuEvent<code></a></code>.</td></tr><tr><td><a name="925076"> </a><code>command</code> </td><td><a name="925078"> </a>Shortcut key. If you provide shortcuts, make sure that each shortcut is unique among all commands available at that time. </td></tr><tr><td><a name="930160"> </a><code>hidden</code> </td><td><a name="930162"> </a>If <code>true</code>, the menu item is hidden. If <code>false</code>, it is displayed. You can set and clear this value using <code><a href="Menu.html#927877"></code>MenuHideItem<code></a></code> and <code><a href="Menu.html#927876"></code>MenuShowItem<code></a></code>.</td></tr><tr><td><a name="930228"> </a><code>reserved</code> </td><td><a name="930230"> </a>Reserved for future use. </td></tr><tr><td><a name="925080"> </a><code>itemStr</code> </td><td><a name="925082"> </a>Pointer to the text to display for this menu item, including the shortcut key. To include a shortcut key, begin the string with the item's text, then type a tab character, and then the item's shortcut key. </td></tr><tr><td><a name="925084"> </a></td><td><a name="925086"> </a>To create a separator bar, create a one-character string containing the <code>MenuSeparatorChar</code> constant. </td></tr></table><table><tr><td></table></div></p><a name="925089"> </a><h4> Compatibility</h4><dl><a name="930098"> </a><p></p><dt>The <code>hidden</code> and <code>reserved</code> fields are defined only if <a href="CompatibilityApdx.html#486514">3.5 New Feature Set</a> is present. </dl><a name="930089"> </a><h3> MenuPullDownPtr</h3><dl><a name="925091"> </a><p></p><dt>The <code>MenuPullDownPtr</code> type defines a pointer to a <code><a href="Menu.html#925097"></code>MenuPullDownType<code></a></code>.<dl><a name="925095"> </a><br><code>typedef MenuPullDownType * MenuPullDownPtr;</code><br></dl></dl><a name="925097"> </a><h3> MenuPullDownType</h3><dl><a name="925099"> </a><p></p><dt>The <code>MenuPullDownType</code> structure defines a specific menu accessed from the menu bar. The menus array in the <code><a href="Menu.html#924976"></code>MenuBarType<code></a></code> structure contains one <code>MenuPullDownType</code> structure for each pull-down menu associated with the menu bar. <dl><a name="925103"> </a><br><code>typedef struct {</code><br></dl><dl><a name="925104"> </a><code>&nbsp&nbsp&nbsp WinHandle	 	 	 	 	 	 	 	 menuWin;</code><br><a name="925105"> </a><code>&nbsp&nbsp&nbsp RectangleType	 	 	 	 	 	 	 	 bounds;</code><br><a name="925106"> </a><code>&nbsp&nbsp&nbsp WinHandle	 	 	 	 	 	 	 	 bitsBehind;</code><br><a name="925107"> </a><code>&nbsp&nbsp&nbsp RectangleType	 	 	 	 	 	 	 	 titleBounds;</code><br><a name="925108"> </a><code>&nbsp&nbsp&nbsp Char *	 	 	 	 	 	 	 	 title;</code><br><a name="930240"> </a><code>&nbsp&nbsp&nbsp UInt16	 	 	 	 	 	 	 	 hidden : 1;</code><br><a name="925109"> </a><code>&nbsp&nbsp&nbsp UInt16	 	 	 	 	 	 	 	 numItems : 15;</code><br><a name="925110"> </a><code>&nbsp&nbsp&nbsp MenuItemType 	 	 	 	 	 	 	 	 *items;</code><br><a name="925111"> </a><code>} MenuPullDownType;</code><br></dl></dl><a name="925113"> </a><h4> Field Descriptions</h4><p><a name="925146"> </a> </p><p><div> <table border="3"><caption><B></B></caption><tr><td><a name="925116"> </a><code>menuWin</code> </td><td><a name="925118"> </a>Handle for the window that contains the menu.</td></tr><tr><td><a name="925120"> </a><code>bounds</code> </td><td><a name="925122"> </a>Position and size, in pixels, of the pull-down menu.</td></tr><tr><td><a name="925124"> </a><code>bitsBehind</code> </td><td><a name="925126"> </a>Handle of a window that contains the region obscured by the menu.</td></tr><tr><td><a name="925128"> </a><code>title</code> </td><td><a name="925130"> </a>The menu title (null-terminated string) displayed in the menu bar.</td></tr><tr><td><a name="925132"> </a><code>titleBounds</code> </td><td><a name="925134"> </a>Position and size, in pixels, of the title in the menu bar.</td></tr><tr><td><a name="930395"> </a><code>hidden</code> </td><td><a name="930397"> </a>If <code>true</code>, the menu is hidden; if <code>false</code>, it is displayed. This field is not currently used. </td></tr><tr><td><a name="925136"> </a><code>numItems</code> </td><td><a name="925138"> </a>Number of items in the menu. Separators count as items.</td></tr><tr><td><a name="925140"> </a><code>items</code> </td><td><a name="925145"> </a>Array of <code><a href="Menu.html#938501"></code>MenuItemType<code></a></code> structures. </td></tr></table><table><tr><td></table></div></p><a name="925148"> </a><h4> Compatibility</h4><dl><a name="930301"> </a><p></p><dt>The <code>hidden</code> field is defined only if <a href="CompatibilityApdx.html#486514">3.5 New Feature Set</a> is present. </dl><a name="930243"> </a><h2> Menu Constants</h2><p><a name="925190"> </a> </p><p><div> <table border="3"><caption><B></B></caption><tr><th><a name="925151"> </a><strong>Constant</strong></th><th><a name="925153"> </a><strong>Value</strong></th><th><a name="925155"> </a><strong>Description</strong></th></tr><tr><td><a name="925158"> </a><code>noMenuSelection</code> </td><td><a name="925160"> </a>-1</td><td><a name="925165"> </a>The <code>curMenu</code> field of <code><a href="Menu.html#924976"></code>MenuBarType<code></a></code> is set to this when there is no currently selected menu. </td></tr><tr><td><a name="925168"> </a><code>noMenuItemSelection</code> </td><td><a name="925170"> </a>-1</td><td><a name="925172"> </a>The <code>curItem</code> field of <code>MenuBarType</code> is set to this when there is no currently selected menu item. </td></tr><tr><td><a name="925175"> </a><code>separatorItemSelection</code> </td><td><a name="925177"> </a>-2</td><td><a name="925179"> </a>The <code>curItem</code> field of <code>MenuBarType</code> is set to this when a menu separator item is selected. </td></tr><tr><td><a name="925182"> </a><code>MenuSeparatorChar</code></td><td><a name="925184"> </a>'-'</td><td><a name="925186"> </a>Special character indicating that the menu item is a bar used to separate groups of related menu items. The first character of the <code>itemStr</code> string in <code><a href="Menu.html#938501"></code>MenuItemType<code></a></code> is set to this. </td></tr></table><table><tr><td></table></div></p><a name="926790"> </a><h2> Menu Resources</h2><dl><a name="925193"> </a><p></p><dt>The menu bar (MBAR) and pull-down menu (MENU) resources are used jointly to represent a menu object on screen. See <a href="UIResources.html#925845">"Menus and Menu Bars"</a> in <a href="UIResources.html#924905">Chapter 2, "Palm OS Resources."</a></dl><a name="925196"> </a><h2> Menu Functions</h2><a name="936898"> </a><br> <br> <br><h3> MenuAddItem</h3><dl><dl><a name="936899"> </a><h4>Purpose </h4><dl><a name="936900"> </a><p></p><dt>Add an item to the currently active menu.</dl><a name="936901"> </a><h4>Prototype </h4><dl><a name="936902"> </a><dt><code>Err MenuAddItem (UInt16&nbsp;positionId, UInt16&nbsp;id, Char&nbsp;cmd, const&nbsp;Char&nbsp;*textP)</code></dl></dl><dl><a name="936903"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="936904"> </a><CODE>-&gt; <code>positionId</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>ID of an existing menu item. The new menu item is added after this menu item. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="936905"> </a><CODE>-&gt; <code>id</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>ID value to use for the new menu item. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="937054"> </a><CODE>-&gt; <code>cmd</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Shortcut key. If you provide shortcuts, make sure that each shortcut is unique among all commands available at that time. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="943529"> </a><CODE>-&gt; <code>textP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to the text to display for this menu item, including the shortcut key. To include a shortcut key, begin the string with the item's text, then type a tab character, and then the item's shortcut key. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="943591"> </a><CODE></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>To create a separator bar, create a one-character string containing the <code>MenuSeparatorChar</code> constant. <br></TD></TR></TABLE></dl><dl><a name="936908"> </a><h4>Result </h4><dl><a name="936909"> </a><p></p><dt>Returns 0 upon success or one of the following if an error occurs:<TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="936911"> </a><CODE><code>menuErrNoMenu</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The <code>textP</code> parameter is <code>NULL</code>. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="936913"> </a><CODE><code>menuErrSameId</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The menu already contains an item with the ID <code>id</code>. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="936915"> </a><CODE><code>menuErrNotFound</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The menu doesn't contain an item with the ID <code>positionId</code>. <br></TD></TR></TABLE><dl><a name="936916"> </a><p></p><dt>May display a fatal error message if there is no current menu. </dl></dl></dl><dl><a name="936917"> </a><h4>Comments </h4><dl><a name="936918"> </a><p></p><dt>This function creates a new <code><a href="Menu.html#938501"></code>MenuItemType<code></a></code> structure and adds it to the <code><a href="Menu.html#924976"></code>MenuBarType<code></a></code>'s item list. <a name="938981"> </a><p></p><dt>You should call this function only in response to a <code><a href="EventRef.html#928084"></code>menuOpenEvent<code></a></code>. This event is generated when the menu is first made active. In general, a form's menu becomes active the first time a <code><a href="EventRef.html#925881"></code>keyDownEvent<code></a></code> with a <code>vchrMenu</code> or <code>vchrCommand</code> is generated, and it remains active until a new form (including a modal form or alert panel) is displayed or until <code><a href="Form.html#927125"></code>FrmSetMenu<code></a></code> is called to change the form's menu. Palm OS<sup>&#174;</sup> user interface guidelines discourage adding or hiding menu items at any time other than when the menu is first made active. </dl><a name="937724"> </a><h4>Compatibility </h4><dl><a name="937753"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#486514">3.5 New Feature Set</a> is present. </dl></dl></dl><a name="927118"> </a><br> <br> <br><h3> MenuCmdBarAddButton</h3><dl><dl><a name="927136"> </a><h4>Purpose </h4><dl><a name="927158"> </a><p></p><dt>Define a button to be displayed on the command toolbar. </dl><a name="927168"> </a><h4>Prototype </h4><dl><a name="930606"> </a><dt><code>Err MenuCmdBarAddButton (UInt8&nbsp;where, UInt16&nbsp;bitmapId, MenuCmdBarResultType&nbsp;resultType, UInt32&nbsp;result, Char&nbsp;*nameP)</code></dl></dl><dl><a name="927282"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="938470"> </a><CODE>-&gt; <code>where</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Either <code>menuCmdBarOnLeft</code> to add the button to the left of the other buttons on the command toolbar, <code>menuCmdBarOnRight</code> to add it to the right of the other buttons, or a number indicating the exact position of the button. Button positions are numbered from right to left, and the rightmost position is number 1. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="938472"> </a><CODE>-&gt; <code>bitmapId</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Resource ID of the bitmap to display on the button. The bitmap's dimensions should be 13 pixels high by 16 pixels wide.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="930690"> </a><CODE>-&gt; <code>resultType</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The type of data contained in the <code>result</code> parameter. See <code><a href="Menu.html#949450"></code>MenuCmdBarResultType<code></a></code>. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="930699"> </a><CODE>-&gt; <code>result</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The data to send when the user taps this button. This can be a character, a menu item ID, or a notification constant. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="932735"> </a><CODE>-&gt; <code>nameP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to the text to display in the status message if the user taps the button. If <code>NULL</code>, the text is taken from the menu item that matches the ID or shortcut character contained in <code>result</code>, if a match is found. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="949094"> </a><CODE></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>If you supply a text buffer for this parameter, <code>MenuCmdBarAddButton</code> makes a copy of the buffer. <br></TD></TR></TABLE></dl><dl><a name="931592"> </a><h4>Result </h4><dl><a name="931659"> </a><p></p><dt>Returns 0 upon success, or one of the following error codes:<TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="932997"> </a><CODE><code>menuErrOutOfMemory</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>There is not enough memory available to perform the operation. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="933594"> </a><CODE><code>menuErrTooManyItems</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The command toolbar already has the maximum number of buttons allowed (currently 8). <br></TD></TR></TABLE></dl></dl><dl><a name="933499"> </a><h4>Comments </h4><dl><a name="931897"> </a><p></p><dt>Call this function in response to a <code><a href="EventRef.html#928023"></code>menuCmdBarOpenEvent<code></a></code> or to the notification <code>sysNotifyMenuCmdBarOpenEvent</code>. Both of these signal that the user has entered the command keystroke and the command toolbar is about to open. Your response should be to add buttons to the toolbar and to return <code>false</code>, indicating that you have not completely handled the event. <a name="946102"> </a><p></p><dt>The <code>sysNotifyMenuCmdBarOpenEvent</code> notification is intended to be used only by shared libraries, system extensions, and other code resources that do not use an event loop. If you're writing an application, always respond to the event instead of the notification; an application should only add buttons to the toolbar if it is the current application. If you register for the notification, you receive it each time the command toolbar is displayed, whether your application is active or not. <a name="944380"> </a><p></p><dt>Note that the command toolbar is allocated each time it is opened and is deallocated when it is erased from the screen. <a name="941032"> </a><p></p><dt>There is a limited amount of space in which to display buttons on the command toolbar. You should limit the number of buttons to four or five. The maximum allowed by the system is eight, but you should leave space for the status message that appears after the user chooses an action. Buttons should be contextual; for example, the field code only displays a paste button if there is text on the clipboard. Bitmaps for the buttons should be 16 X 13 pixels. <a name="941243"> </a><p></p><dt>If a field has focus when the command toolbar is opened, the field manager adds buttons for cut, copy, paste, and undo. If your application does not want this default behavior, set the <code>preventFieldButtons</code> field in the <code>menuCmdBarOpenEvent</code> structure to <code>true</code>. (Note that there is no way to prevent the field buttons from being drawn from within a notification handler.)<a name="950258"> </a><p></p><dt>The following bitmaps for command toolbar buttons are defined in <code>UIResources.h</code>. The system and the built-in applications use these bitmaps to represent the commands listed in the table. Your application should also use them if it performs the same actions. If you use any of these buttons, add them in the order shown from right to left. (For example, <code>BarDeleteBitmap</code>, if used, should always be the rightmost button.) <p><a name="950191"> </a> </p><p><div> <table border="3"><caption><B></B></caption><tr><th><a name="950148"> </a><strong>Bitmap</strong></th><th><a name="950150"> </a><strong>Command</strong></th></tr><tr><td><a name="950721"> </a><code>BarDeleteBitmap</code> </td><td><a name="950723"> </a>Delete record. </td></tr><tr><td><a name="950726"> </a><code>BarPasteBitmap</code> </td><td><a name="950728"> </a>Paste clipboard contents at insertion point. </td></tr><tr><td><a name="950731"> </a><code>BarCopyBitmap</code> </td><td><a name="950733"> </a>Copy selection. </td></tr><tr><td><a name="950736"> </a><code>BarCutBitmap</code> </td><td><a name="950738"> </a>Cut selection. </td></tr><tr><td><a name="950741"> </a><code>BarUndoBitmap</code> </td><td><a name="950743"> </a>Undo previous action. </td></tr><tr><td><a name="950746"> </a><code>BarSecureBitmap</code> </td><td><a name="950748"> </a>Show Security dialog. </td></tr><tr><td><a name="950751"> </a><code>BarBeamBitmap</code> </td><td><a name="950753"> </a>Beam current record. </td></tr><tr><td><a name="950756"> </a><code>BarInfoBitmap</code> </td><td><a name="950758"> </a>Show Info dialog (Launcher). </td></tr></table><table><tr><td></table></div></p><a name="933662"> </a><p></p><dt>It is best to add buttons on the left side. If you add buttons to the right, this function moves all existing buttons over one position to the left. You can also specify an exact position for the <code>where</code> parameter. The positions are numbered from right to left with the rightmost position being 1. If you specify an exact position, the function leaves space for the other buttons. For example, if you specify position 3 and there are no buttons displayed at positions 1 and 2, there will be blank spots to the right of your button. <a name="942764"> </a><p></p><dt>The <code>result</code> and <code>resultType</code> parameters specify what the result should be if the user taps the button. <code>result</code> contains the actual data, and <code>resultType</code> contains a constant that specifies the type of data in <code>result</code>. Typically, the result is to enqueue a <code><a href="EventRef.html#926033"></code>menuEvent<code></a></code>. In this case, <code>resultType</code> is <code>menuCmdBarResultMenuItem</code> and the <code>result</code> is the ID of the menu item that should included in the event. <a name="942935"> </a><p></p><dt>You may also specify the shortcut character instead of the menu ID; however, doing so is inefficient. When <code>result</code> is a shortcut character, the <code><a href="Menu.html#925345"></code>MenuHandleEvent<code></a></code> function enqueues a <code><a href="EventRef.html#925881"></code>keyDownEvent<code></a></code> with the character in <code>result</code>. During the next cycle of the event loop, <code>MenuHandleEvent</code> enqueues a <code>menuEvent</code> in response to the <code>keyDownEvent</code>. Thus, it is better to have your button enqueue the <code>menuEvent</code> directly. <a name="941430"> </a><p></p><dt>If you call <code>MenuCmdBarAddButton</code> outside of an application, you might not know of any menu items in the active menu (unless your code has added one using <code><a href="Menu.html#936898"></code>MenuAddItem<code></a></code>). In this case, specify a notification to be broadcast. The notification is broadcast at the top of the next event loop, and it must contain no custom data. (Applications may also use the notification result type.) </dl><a name="937770"> </a><h4>Compatibility </h4><dl><a name="937774"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#486514">3.5 New Feature Set</a> is present. </dl><a name="937807"> </a><h4>See Also </h4><dl><a name="937862"> </a><p></p><dt><code><a href="Menu.html#927802"></code>MenuCmdBarDisplay<code></a></code>, <code><a href="Menu.html#927742"></code>MenuCmdBarGetButtonData<code></a></code> </dl></dl></dl><a name="927802"> </a><br> <br> <br><h3> MenuCmdBarDisplay</h3><dl><dl><a name="930705"> </a><h4>Purpose </h4><dl><a name="930712"> </a><p></p><dt>Display the command toolbar.</dl><a name="930713"> </a><h4>Prototype </h4><dl><a name="930716"> </a><dt><code>void MenuCmdBarDisplay (void)</code></dl></dl><dl><a name="930881"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="930968"> </a><CODE></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT><br></TD></TR></TABLE></dl><dl><a name="934541"> </a><h4>Result </h4><dl><a name="934718"> </a><p></p><dt>Returns nothing. </dl></dl><dl><a name="934756"> </a><h4>Comments </h4><dl><a name="934799"> </a><p></p><dt>This function displays the command toolbar when the user enters the command keystroke. You normally do not call this function in your own code. The form manager calls it at the end of its handling of <code><a href="EventRef.html#928023"></code>menuCmdBarOpenEvent<code></a></code>. </dl><a name="937969"> </a><h4>Compatibility </h4><dl><a name="937973"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#486514">3.5 New Feature Set</a> is present. </dl><a name="937974"> </a><h4>See Also </h4><dl><a name="937981"> </a><p></p><dt><code><a href="Menu.html#927118"></code>MenuCmdBarAddButton<code></a></code>, <code><a href="Menu.html#927742"></code>MenuCmdBarGetButtonData<code></a></code> </dl></dl></dl><a name="927742"> </a><br> <br> <br><h3> MenuCmdBarGetButtonData</h3><dl><dl><a name="927910"> </a><h4>Purpose </h4><dl><a name="927941"> </a><p></p><dt>Get the data for a given command button. </dl><a name="927958"> </a><h4>Prototype </h4><dl><a name="931046"> </a><dt><code>Boolean MenuCmdBarGetButtonData (Int16&nbsp;buttonIndex, UInt16&nbsp;*bitmapIdP, MenuCmdBarResultType&nbsp;*resultTypeP, UInt32&nbsp;*resultP, Char&nbsp;*nameP)</code></dl></dl><dl><a name="928064"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="928149"> </a><CODE>-&gt; <code>buttonIndex</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Index of the button for which you want to obtain information. Buttons are ordered from right to left, with the rightmost button at index 0. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="931057"> </a><CODE>&lt;- <code>bitmapIdP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The resource ID of the bitmap displayed on the button. Pass <code>NULL</code> if you don't want to retrieve this value. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="931060"> </a><CODE>&lt;- <code>resultTypeP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The type of action this button takes. Pass <code>NULL</code> if you don't want to retrieve this value. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="931119"> </a><CODE>&lt;- <code>resultP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The result of tapping the button. Pass <code>NULL</code> if you don't want to retrieve this information. <br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="931176"> </a><CODE>&lt;- <code>nameP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The text displayed in the status message when this button is tapped. Pass <code>NULL</code> if you don't want to retrieve this information. If not <code>NULL</code>, <code>nameP</code> must point to a string of <code>menuCmdBarMaxTextLength</code> size. <br></TD></TR></TABLE></dl><dl><a name="933737"> </a><h4>Result </h4><dl><a name="933744"> </a><p></p><dt>Returns <code>true</code> if the information was retrieved successfully, <code>false</code> if there is no command toolbar or if there is no button at <code>buttonIndex</code>. </dl></dl><dl><a name="933745"> </a><h4>Comments </h4><dl><a name="950515"> </a><p></p><dt>You can use this function to retrieve information about the buttons that are displayed on the command toolbar. If the command toolbar has not yet been initialized, this function returns <code>false</code>. <a name="950516"> </a><p></p><dt>Note that the command toolbar is allocated when the user enters the command keystroke and deallocated when <code><a href="Menu.html#925261"></code>MenuEraseStatus<code></a></code> is called. Thus, the only logical place to call <code>MenuCmdBarGetButtonData</code> is in response to a <code><a href="EventRef.html#928023"></code>menuCmdBarOpenEvent<code></a></code> or <code>sysNotifyMenuCmdBarOpenEvent</code> notification. </dl><a name="938029"> </a><h4>Compatibility </h4><dl><a name="938033"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#486514">3.5 New Feature Set</a> is present. </dl><a name="938034"> </a><h4>See Also </h4><dl><a name="938041"> </a><p></p><dt><code><a href="Menu.html#927802"></code>MenuCmdBarDisplay<code></a></code>, <code><a href="Menu.html#927118"></code>MenuCmdBarAddButton<code></a></code> </dl></dl></dl><a name="925199"> </a><br> <br> <br><h3> MenuDispose</h3><dl><dl><a name="947633"> </a><h4>Purpose </h4><dl><a name="947634"> </a><p></p><dt>Release any memory allocated to the menu and the command status and restore any saved bits to the screen.</dl><a name="925202"> </a><h4>Prototype </h4><dl><a name="925203"> </a><dt><code>void MenuDispose (MenuBarType&nbsp;*menuP)</code></dl></dl><dl><a name="925204"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925205"> </a><CODE>-&gt; <code>menuP</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to the menu object to dispose. (See <code><a href="Menu.html#924976"></code>MenuBarType<code></a></code>.) If <code>NULL</code>, this function returns immediately. <br></TD></TR></TABLE></dl><dl><a name="925209"> </a><h4>Result </h4><dl><a name="925210"> </a><p></p><dt>Returns nothing.</dl></dl><dl><a name="925211"> </a><h4>Comments </h4><dl><a name="925212"> </a><p></p><dt>Most applications do not need to call this function directly. <code>MenuDispose</code> is called by the system when the form that contains the menu is no longer the active form, when the form that contains the menu is freed, and when <code><a href="Form.html#927125"></code>FrmSetMenu<code></a></code> is called to change the form's menu bar. </dl><a name="925216"> </a><h4>See Also </h4><dl><a name="925223"> </a><p></p><dt><a href="Menu.html#925392">MenuInit</a>, <a href="Menu.html#925226">MenuDrawMenu</a></dl></dl></dl><a name="925226"> </a><br> <br> <br><h3> MenuDrawMenu</h3><dl><dl><a name="925227"> </a><h4>Purpose </h4><dl><a name="925228"> </a><p></p><dt>Draw the current menu bar and the last pull-down that was visible.</dl><a name="925229"> </a><h4>Prototype </h4><dl><a name="925230"> </a><dt><code>void MenuDrawMenu (MenuBarType&nbsp;*menuP)</code></dl></dl><dl><a name="925231"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925235"> </a><CODE>-&gt; menuP</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to a <code><a href="Menu.html#924976"></code>MenuBarType<code></a></code>. Must not be <code>NULL</code>.<br></TD></TR></TABLE></dl><dl><a name="925236"> </a><h4>Result </h4><dl><a name="925237"> </a><p></p><dt>Returns nothing.</dl></dl><dl><a name="925238"> </a><h4>Comments </h4><dl><a name="925239"> </a><p></p><dt>Most applications do not need to call this function directly. <code><a href="Menu.html#925345"></code>MenuHandleEvent<code></a></code> calls <code>MenuDrawMenu</code> when the user taps the Menu silk-screen button (or taps the form's title on Palm OS 3.5 and higher). <a name="925243"> </a><p></p><dt>The menu bar and the pull-down menu are drawn in front of all the application windows. The state of the insertion point, the bits that are obscured by the menu bar and the pull-down menu, and the currently active window are saved before the menu is drawn. These are all restored when the menu is erased. <a name="925244"> </a><p></p><dt>A menu keeps track of the last pull-down menu displayed for as long as the menu is active. A menu loses its active status under these conditions:<ul type="SQUARE"><a name="925248"> </a><br><li>When <code><a href="Form.html#927125"></code>FrmSetMenu<code></a></code> is called to change the active menu on the form. <br><a name="925249"> </a><br><li>When a new form, even a modal form or alert panel, becomes active.<br></ul><a name="925250"> </a><p></p><dt>Suppose a user selects your application's About item from the Options menu then clicks the OK button to return to the main form. When the About dialog is displayed, it becomes the active form, which causes the main form's menu state to be erased. This menu state is not restored when the main form becomes active again. The next time <code>MenuDrawMenu</code> is called (that is, the next time the user taps the Menu silk-screen button), the menu bar is displayed as it was before, and the first pull-down menu listed in the menu bar is displayed instead of the Options pull-down menu. </dl><a name="925251"> </a><h4>See Also </h4><dl><a name="925258"> </a><p></p><dt><a href="Menu.html#925392">MenuInit</a>, <a href="Menu.html#925199">MenuDispose</a></dl></dl></dl><a name="925261"> </a><br> <br> <br><h3> MenuEraseStatus</h3><dl><dl><a name="925262"> </a><h4>Purpose </h4><dl><a name="925263"> </a><p></p><dt>Erase the menu command status.</dl><a name="925264"> </a><h4>Prototype </h4><dl><a name="925265"> </a><dt><code>void MenuEraseStatus (MenuBarType&nbsp;*menuP)</code></dl></dl><dl><a name="925266"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925270"> </a><CODE>-&gt; menuP</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to a <code><a href="Menu.html#924976"></code>MenuBarType<code></a></code>, or <code>NULL</code> for the current menu.<br></TD></TR></TABLE></dl><dl><a name="925271"> </a><h4>Result </h4><dl><a name="925272"> </a><p></p><dt>Returns nothing.</dl></dl><dl><a name="925273"> </a><h4>Comments </h4><dl><a name="925274"> </a><p></p><dt>When the user selects a menu command using the command keystroke, the command toolbar or status message is displayed at the bottom of the screen. <code>MenuEraseStatus</code> erases the toolbar or status message. <a name="925275"> </a><p></p><dt>Under most circumstances, you do not need to call this function explicitly--just let the current menu command status remove itself automatically. Otherwise, you may cause text to be erased before the user has a chance to see it. <a name="939314"> </a><p></p><dt>You need to call <code>MenuEraseStatus</code> explicitly only if the command toolbar covers something that is going to be changed by the menu command the user has selected. For example, if the user selects a command that displays a new form, call <code>MenuEraseStatus</code> before executing the command. Also, if the command performs some drawing in the lower portion of the window, call <code>MenuEraseStatus</code> before performing the drawing function. </dl><a name="939326"> </a><h4>Compatibility </h4><dl><a name="939327"> </a><p></p><dt>The exact behavior when a menu shortcut character is entered depends on which version of the operating system is running. In versions prior to release 3.5, the system displays the string "Command:" in the lower-left portion of the screen when the user enters the Graffiti command keystroke. <a name="943620"> </a><p></p><dt>In Palm OS 3.5 and higher, entering the Graffiti command keystroke displays the command toolbar. This toolbar is the entire width of the screen and it displays buttons that the user can tap instead of entering another keystroke. If the user taps a button or enters a character that matches a shortcut character for an item on the active menu, a status message is displayed in the toolbar while the command is executed. Calling <code>MenuEraseStatus</code> on Palm OS 3.5 and higher deallocates the command toolbar data structure as well as erasing the command toolbar from the screen. <a name="943612"> </a><p></p><dt>Because the command toolbar takes up more of the display than the pre-Palm OS 3.5 status message, you may find you need to call <code>MenuEraseStatus</code> more frequently in Palm OS 3.5 than in earlier versions. </dl><a name="939315"> </a><h4>See Also </h4><dl><a name="939319"> </a><p></p><dt><code><a href="Menu.html#925392"></code>MenuInit<code></a> </code></dl></dl></dl><a name="925284"> </a><br> <br> <br><h3> MenuGetActiveMenu</h3><dl><dl><a name="925285"> </a><h4>Purpose </h4><dl><a name="925286"> </a><p></p><dt>Returns a pointer to the currently active menu.</dl><a name="925287"> </a><h4>Prototype </h4><dl><a name="925288"> </a><dt><code>MenuBarType&nbsp;*MenuGetActiveMenu (void)</code></dl></dl><dl><a name="925289"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925290"> </a><CODE></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT><br></TD></TR></TABLE></dl><dl><a name="925291"> </a><h4>Result </h4><dl><a name="925292"> </a><p></p><dt>Returns a pointer to the currently active menu, or <code>NULL</code> if there is none.</dl></dl><dl><a name="925293"> </a><h4>Comments </h4><dl><a name="925294"> </a><p></p><dt>An active menu is not necessarily visible on the screen. A menu might be active but not visible, for example, if a command shortcut has been entered. In general, a form's menu becomes active the first time a <code><a href="EventRef.html#925881"></code>keyDownEvent<code></a></code> with a <code>vchrMenu</code> or <code>vchrCommand</code> is generated, and it remains active until a new form (including a modal form or alert panel) is displayed or until <code><a href="Form.html#927125"></code>FrmSetMenu<code></a></code> is called to change the form's menu. <a name="925301"> </a><p></p><dt>If you want to know if the menu is visible rather than merely active, there are two options:<ul type="SQUARE"><a name="925302"> </a><br><li>You can check the <code>visible</code> attribute. For example:<br></ul></dl></dl><dl><a name="925303"> </a><br><code>myMenu = MenuGetActiveMenu();</code><br></dl><dl><a name="925304"> </a><code>if (myMenu &amp;&amp; myMenu-&gt;attr.visible) {</code><br><a name="925305"> </a><code>&nbsp&nbsp&nbsp // menu is visible</code><br><a name="925306"> </a><code>}</code><br><ul type="SQUARE"><a name="925313"> </a><br><li>You can check for <code><a href="EventRef.html#926434"></code>winEnterEvent<code></a></code> and <code><a href="EventRef.html#926458"></code>winExitEvent<code></a></code>. <br><dl><a name="925314"> </a><p></p><dt>When the system draws a menu, the menu's window becomes the active drawing window. The system generates a <code>winExitEvent</code> for the previous active drawing window and a <code>winEnterEvent</code> for the menu's window. When the menu is erased, the system generates a <code>winExitEvent</code> for the menu's window and a <code>winEnterEvent</code> for the window that was active before the menu was drawn. <a name="925315"> </a><p></p><dt>It's common to want to check if the menu is visible in applications that perform custom drawing to a window. Such applications want to make sure that they don't draw on top of the menu. The recommended way to do this is to stop drawing when you receive a <code>winExitEvent</code> matching your drawing window and resume drawing when you receive the corresponding <code>winEnterEvent</code>. For example, the following code is excerpted from the Reptoids example application's main event loop:</dl></ul></dl><dl><a name="925316"> </a><br><code>EvtGetEvent (&amp;event, TimeUntillNextPeriod());</code><br></dl><dl><a name="925317"> </a><code></code><br><a name="925318"> </a><code>if (event.eType == winExitEvent) {</code><br><a name="925319"> </a><code>&nbsp&nbsp&nbsp if (event.data.winExit.exitWindow == </code><br><a name="925320"> </a><code>&nbsp&nbsp&nbsp 	 (WinHandle) FrmGetFormPtr(MainView)) {</code><br><a name="925321"> </a><code>&nbsp&nbsp&nbsp 	 	 // stop drawing. </code><br><a name="925322"> </a><code>&nbsp&nbsp&nbsp }</code><br><a name="925323"> </a><code>}</code><br><a name="925324"> </a><code></code><br><a name="925325"> </a><code></code><br><a name="925326"> </a><code>else if (event.eType == winEnterEvent) {</code><br><a name="925327"> </a><code>&nbsp&nbsp&nbsp if (event.data.winEnter.enterWindow == </code><br><a name="925328"> </a><code>&nbsp&nbsp&nbsp 	 (WinHandle) FrmGetFormPtr(MainView) &amp;&amp;</code><br><a name="925329"> </a><code>&nbsp&nbsp&nbsp 	 event.data.winEnter.enterWindow == </code><br><a name="925330"> </a><code>&nbsp&nbsp&nbsp 	 (WinHandle) FrmGetFirstForm ()) {</code><br><a name="925331"> </a><code>&nbsp&nbsp&nbsp 	 	 // start drawing</code><br><a name="925332"> </a><code>&nbsp&nbsp&nbsp }</code><br><a name="925333"> </a><code>}</code><br><dl><a name="925334"> </a><p></p><dt>Note that the second method of checking to see if a menu is visible is preferred because it is not specific to menus--your application should stop drawing if any window obscures your drawing window, and it will do so if you check for <code>winEnterEvent</code> and <code>winExitEvent</code>. </dl></dl><dl><a name="925335"> </a><h4>See Also </h4><dl><a name="925342"> </a><p></p><dt><code><a href="Menu.html#925345"></code>MenuHandleEvent<code></a></code>, <code><a href="Menu.html#925423"></code>MenuSetActiveMenu<code></a></code> </dl></dl></dl><a name="925345"> </a><br> <br> <br><h3> MenuHandleEvent</h3><dl><dl><a name="925346"> </a><h4>Purpose </h4><dl><a name="925347"> </a><p></p><dt>Handle events in the current menu. This routine handles two types of events, <a href="EventRef.html#926061">penDownEvent</a> and <a href="EventRef.html#925881">keyDownEvent</a>.</dl><a name="925356"> </a><h4>Prototype </h4><dl><a name="925357"> </a><dt><code>Boolean MenuHandleEvent (MenuBarType&nbsp;*menuP, EventType&nbsp;*event, Uint16&nbsp;*error)</code></dl></dl><dl><a name="925358"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925359"> </a><CODE>-&gt; menuP</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to a MenuBarType data structure.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925360"> </a><CODE>-&gt; event</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to an EventType structure.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925361"> </a><CODE>-&gt; error</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Error (or 0 if no error).<br></TD></TR></TABLE></dl><dl><a name="925362"> </a><h4>Result </h4><dl><a name="925363"> </a><p></p><dt>Returns true if the event is handled; that is, if the event is a <a href="EventRef.html#926061">penDownEvent</a> within the menu bar or the menu, or the event is a <a href="EventRef.html#925881">keyDownEvent</a> that the menu supports. Returns <code>false</code> on any other event. </dl></dl><dl><a name="925370"> </a><h4>Comments </h4><dl><a name="925374"> </a><p></p><dt>When a <a href="EventRef.html#926061">penDownEvent</a> is received in the menu bar, <code>MenuHandleEvent</code> tracks the pen until it comes up. If the pen comes up within the bounds of the menu bar, the selected title is inverted and the appropriate pull-down menu is drawn. Any previous pull-down menu is erased. If the pen comes up outside of the menu bar and pull-down menu, the menu is erased. <a name="938676"> </a><p></p><dt>When a <code>penDownEvent</code> is received in a pull-down menu, <code>MenuHandleEvent</code> tracks the pen until it comes up. If the pen comes up within the bounds of the menu, a <a href="EventRef.html#926033">menuEvent</a> containing the resource ID of the selected menu item is added to the event queue. If the pen comes up outside of the bounds of the menu and menu bar, the menu is erased. <a name="925384"> </a><p></p><dt>If a <code><a href="EventRef.html#925881"></code>keyDownEvent<code></a></code> is received with a <code>vchrMenu</code>, the menu is drawn if it is not visible and erased if it is visible. <a name="925386"> </a><p></p><dt>If a <code>keyDownEvent</code> is received with a <code>vchrCommand</code>, a command shortcut is in progress. Command shortcuts are handled differently depending on which version of Palm OS is running. On versions earlier than 3.5, the next <code>keyDownEvent</code> is checked to see if it is a valid menu shortcut. If so, a <code><a href="EventRef.html#926033"></code>menuEvent<code></a></code> is added to the event queue. <a name="945365"> </a><p></p><dt>If a <code>keyDownEvent</code> is received with a <code>vchrCommand</code> on Palm OS 3.5 and higher, <code>MenuHandleEvent</code> enqueues a <code><a href="EventRef.html#928023"></code>menuCmdBarOpenEvent<code></a></code> if the command toolbar is not already open. The <code>menuCmdBarOpenEvent</code> provides a chance for applications to add their own buttons to the command toolbar. The next event might be either a <code>keyDownEvent</code> with a character that completes the shortcut or a <code>penDownEvent</code> on one of the buttons on the toolbar. The <code>keyDownEvent</code> is processed as with the earlier releases-- if it is a valid menu shortcut, a <code><a href="EventRef.html#926033"></code>menuEvent<code></a></code> is added to the event queue. If the next event is a <code>penDownEvent</code>, the pen is tracked until it comes up. If the pen comes up within the bounds of a button, the appropriate action is taken. See the description of <code><a href="Menu.html#927118"></code>MenuCmdBarAddButton<code></a></code> for more information. <a name="938686"> </a><p></p><dt>In Palm OS version 3.5 or higher, if either the <code>vchrMenu</code> or the <code>vchrCommand</code> event causes a menu to be activated and initialized for the first time, a <code><a href="EventRef.html#928084"></code>menuOpenEvent<code></a></code> containing the reason the menu was initialized (<code>menuButtonCause</code> for a <code>vchrMenu</code> or <code>menuCommandCause</code> for a <code>vchrCommand</code>) is added to the event queue, and then the current event is added after it. </dl></dl></dl><a name="927877"> </a><br> <br> <br><h3> MenuHideItem</h3><dl><dl><a name="931415"> </a><h4>Purpose </h4><dl><a name="931434"> </a><p></p><dt>Hide a menu item. </dl><a name="931447"> </a><h4>Prototype </h4><dl><a name="931462"> </a><dt><code>Boolean MenuHideItem (UInt16&nbsp;id)</code></dl></dl><dl><a name="931514"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="931545"> </a><CODE>-&gt; <code>id</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>ID of the menu item to hide. <br></TD></TR></TABLE></dl><dl><a name="936441"> </a><h4>Result </h4><dl><a name="936452"> </a><p></p><dt>Returns <code>true</code> if the menu item was hidden; <code>false</code> otherwise. </dl></dl><dl><a name="945656"> </a><h4>Comments </h4><dl><a name="945661"> </a><p></p><dt>You should call this function only in response to a <code><a href="EventRef.html#928084"></code>menuOpenEvent<code></a></code>. This event is generated when the menu is first made active. In general, a form's menu becomes active the first time a <code><a href="EventRef.html#925881"></code>keyDownEvent<code></a></code> with a <code>vchrMenu</code> or <code>vchrCommand</code> is generated, and it remains active until a new form (including a modal form or alert panel) is displayed or until <code><a href="Form.html#927125"></code>FrmSetMenu<code></a></code> is called to change the form's menu. Palm OS user interface guidelines discourage adding or hiding menu items at any time other than when the menu is first made active. </dl><a name="938052"> </a><h4>Compatibility </h4><dl><a name="938056"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#486514">3.5 New Feature Set</a> is present. </dl><a name="938085"> </a><h4>See Also </h4><dl><a name="938102"> </a><p></p><dt><code><a href="Menu.html#927876"></code>MenuShowItem<code></a></code> </dl></dl></dl><a name="925392"> </a><br> <br> <br><h3> MenuInit</h3><dl><dl><a name="925393"> </a><h4>Purpose </h4><dl><a name="925394"> </a><p></p><dt>Load a menu resource from a resource file.</dl><a name="925395"> </a><h4>Prototype </h4><dl><a name="925396"> </a><dt><code>MenuBarType&nbsp;*MenuInit (Uint16&nbsp;resourceId)</code></dl></dl><dl><a name="925397"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925398"> </a><CODE>-&gt; resourceId</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>ID that identifies the menu resource.<br></TD></TR></TABLE></dl><dl><a name="925399"> </a><h4>Result </h4><dl><a name="925400"> </a><p></p><dt>Returns the pointer to a memory block allocated to hold the menu resource (a pointer to a <code><a href="Menu.html#924976"></code>MenuBarType<code></a></code>).</dl></dl><dl><a name="925404"> </a><h4>Comments </h4><dl><a name="925408"> </a><p></p><dt>The menu is not usable until <a href="Menu.html#925423">MenuSetActiveMenu</a> is called.<a name="925409"> </a><p></p><dt>Typically, you do not need to call this function directly. A form stores the resource ID of the menu associated with it and initializes that menu as necessary. If you want to change the form's menu, call <code><a href="Form.html#927125"></code>FrmSetMenu<code></a></code>, which handles disposing of the form's current menu, associating the new menu with the form, and initializing when needed. </dl><a name="925413"> </a><h4>See Also </h4><dl><a name="925420"> </a><p></p><dt><a href="Menu.html#925423">MenuSetActiveMenu</a>, <a href="Menu.html#925199">MenuDispose</a></dl></dl></dl><a name="925423"> </a><br> <br> <br><h3> MenuSetActiveMenu</h3><dl><dl><a name="925424"> </a><h4>Purpose </h4><dl><a name="925425"> </a><p></p><dt>Set the current menu.</dl><a name="925426"> </a><h4>Prototype </h4><dl><a name="925427"> </a><dt><code>MenuBarType&nbsp;*MenuSetActiveMenu (MenuBarType&nbsp;*menuP)</code></dl></dl><dl><a name="925428"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925429"> </a><CODE>-&gt; menuP</CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to the memory block that contains the new menu, or <code>NULL</code> for none. <br></TD></TR></TABLE></dl><dl><a name="925430"> </a><h4>Result </h4><dl><a name="925431"> </a><p></p><dt>Returns a pointer to the menu that was active before the new menu was set, or NULL if no menu was active.</dl></dl><dl><a name="925432"> </a><h4>Comments </h4><dl><a name="925433"> </a><p></p><dt>This function sets the active menu but does not associate it with a form. It's recommended that you call <code><a href="Form.html#927125"></code>FrmSetMenu<code></a></code> instead of <code>MenuSetActiveMenu</code>. <code>FrmSetMenu</code> sets the active menu, frees the old menu, and associates the newly active menu with the form, which means the menu will be freed when the form is freed. </dl><a name="925437"> </a><h4>See Also </h4><dl><a name="925442"> </a><p></p><dt><a href="Menu.html#925284">MenuGetActiveMenu</a> </dl></dl></dl><a name="925444"> </a><br> <br> <br><h3> MenuSetActiveMenuRscID</h3><dl><dl><a name="925445"> </a><h4>Purpose </h4><dl><a name="925446"> </a><p></p><dt>Set the current menu by resource ID.</dl><a name="925447"> </a><h4>Prototype </h4><dl><a name="925448"> </a><dt><code>void MenuSetActiveMenuRscID (Uint16&nbsp;resourceId)</code></dl></dl><dl><a name="925449"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925450"> </a><CODE>-&gt; <code>resourceId</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Resource ID of the menu to be made active. <br></TD></TR></TABLE></dl><dl><a name="925451"> </a><h4>Result </h4><dl><a name="925452"> </a><p></p><dt>Returns nothing. </dl></dl><dl><a name="925453"> </a><h4>Comments </h4><dl><a name="925457"> </a><p></p><dt>This function is similar to <code><a href="Menu.html#925423"></code>MenuSetActiveMenu<code></a></code> except that you pass the menu's resource ID instead of a pointer to a menu structure. It is used as an optimization; with <code>MenuSetActiveMenu</code>, you must initialize the menu before making it active. Potentially, the application may exit before the menu is needed, making this memory allocation unnecessary. MenuSetActiveMenuRscID simply stores the resource ID. The next time a menu is requested, the menu is initialized from this resource. <a name="925461"> </a><p></p><dt>It's recommended that you call <code><a href="Form.html#927125"></code>FrmSetMenu<code></a></code> instead of calling this function for the reasons given in <code>MenuSetActiveMenu</code>. </dl><a name="925462"> </a><h4>Compatibility </h4><dl><a name="925466"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483165">2.0 New Feature Set</a> is present.</dl></dl></dl><a name="927876"> </a><br> <br> <br><h3> MenuShowItem</h3><dl><dl><a name="931572"> </a><h4>Purpose </h4><dl><a name="931574"> </a><p></p><dt>Display a menu item that is currently hidden. </dl><a name="931576"> </a><h4>Prototype </h4><dl><a name="931578"> </a><dt><code>Boolean MenuShowItem (UInt16&nbsp;id)</code></dl></dl><dl><a name="931584"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="931586"> </a><CODE>-&gt; <code>id</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>ID of the menu item to display. <br></TD></TR></TABLE></dl><dl><a name="938110"> </a><h4>Result </h4><dl><a name="945855"> </a><p></p><dt>Returns <code>true</code> if the menu item was successfully displayed, <code>false</code> otherwise. </dl></dl><dl><a name="945878"> </a><h4>Comments </h4><dl><a name="945879"> </a><p></p><dt>You should call this function only in response to a <code><a href="EventRef.html#928084"></code>menuOpenEvent<code></a></code>. This event is generated when the menu is first made active. In general, a form's menu becomes active the first time a <code><a href="EventRef.html#925881"></code>keyDownEvent<code></a></code> with a <code>vchrMenu</code> or <code>vchrCommand</code> is generated, and it remains active until a new form (including a modal form or alert panel) is displayed or until <code><a href="Form.html#927125"></code>FrmSetMenu<code></a></code> is called to change the form's menu. Palm OS user interface guidelines discourage adding or hiding menu items at any time other than when the menu is first made active. </dl><a name="945856"> </a><h4>Compatibility </h4><dl><a name="940004"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#486514">3.5 New Feature Set</a> is present. </dl><a name="938118"> </a><h4>See Also </h4><dl><a name="938158"> </a><p></p><dt><code><a href="Menu.html#927877"></code>MenuHideItem<code></a></code> <dl><a name="925477"> </a><p></p><dt><strong></strong></dl></dl></dl></dl><hr><br><center><B>Palm OS SDK Reference</B></center><br><TABLE WIDTH="100%">  <TR>    <TD WIDTH=10%>&nbsp</TD>    <TD WIDTH=20%><a href="List.html"><IMG SRC="images/prev.html" BORDER=0 ALT="Previous Page"></TD>    <TD WIDTH=20%><a href="ReferenceTOC.html"><IMG SRC="images/content.gif" BORDER=0 ALT="Table of Contents"></TD>    <TD WIDTH=20%><a href="ReferenceIX.html"><IMG SRC="images/index.gif" BORDER=0 ALT="Index"></TD>    <TD WIDTH=20%><a href="PrivateRecords.html"><IMG SRC="images/next.html" BORDER=0 ALT="Next Page"></TD>    <TD WIDTH=10%>&nbsp</TD>  </TR></TABLE><br><small><em>This is page 16 of 85 in this book</em></small><hr><br><address><a href="http://www.palmos.com/dev/">Palm Computing Platform Development Zone</a></address><i>Copyright &#169; 2000, Palm, Inc.   All rightsreserved.</i><!-- This file was created with Quadralay WebWorks Publisher 5.0.2 --><!-- --><!-- For more information on how this document, and how the rest of --><!-- this server was created, email devsupp@palm.com --><!-- --><!-- Last updated: 03/27/00 21:28:19 --></body>
<!-- Mirrored from users.fuw.edu.pl/~michalj/palmos/Menu.html by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 17 Feb 2015 19:10:01 GMT -->
</html>