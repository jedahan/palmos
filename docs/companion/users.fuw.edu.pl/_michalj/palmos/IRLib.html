<html>
<!-- Mirrored from users.fuw.edu.pl/~michalj/palmos/IRLib.html by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 17 Feb 2015 19:10:02 GMT -->
<head><title>IR Library</title></head><body bgcolor="#ffffff"><TABLE WIDTH="100%">  <TR>    <TD WIDTH=25%><a href="ExchangeManager.html"><IMG SRC="images/prev.html" BORDER=0 ALT="Previous Page"></TD>    <TD WIDTH=25%><a href="ReferenceTOC.html"><IMG SRC="images/content.gif" BORDER=0 ALT="Table of Contents"></TD>    <TD WIDTH=25%><a href="ReferenceIX.html"><IMG SRC="images/index.gif" BORDER=0 ALT="Index"></TD>    <TD WIDTH=25%><a href="ModemManager.html"><IMG SRC="images/next.html" BORDER=0 ALT="Next Page"></TD>  </TR></TABLE><br><center><B>Palm OS SDK Reference</B></center><hr><br><a name="924906"> </a><h1><IMG SRC="images/PCPplain.gif" ALT="Palm Logo" WIDTH="45" HEIGHT="44"> <a name="924903"> </a>52 IR Library</h1><dl><a name="924907"> </a><p></p><dt>The IR (InfraRed) library is a shared library that provides a direct interface to the IR communications capabilities of the Palm OS<sup>&#174;</sup>. This chapter provides reference material for the IR library API:<ul type="SQUARE"><a name="924911"> </a><br><li><a href="IRLib.html#924934">IR Library Data Structures</a><br><a name="924915"> </a><br><li><a href="IRLib.html#925221">IR Stack Callback Events</a><br><a name="924919"> </a><br><li><a href="IRLib.html#925267">IR Library Functions</a><br><a name="924923"> </a><br><li><a href="IRLib.html#925782">IAS Functions</a><br><a name="924927"> </a><br><li><a href="IRLib.html#926155">Application-Defined Functions</a><br></ul><a name="924929"> </a><p></p><dt>The header file <code>irlib.h</code> declares the IR library API. For more information on the IR library, see the chapter <a href="Beaming.html#924904">"Beaming (Infrared Communication)"</a> in the <em>Palm OS Programmer's Companion</em>. </dl><a name="924934"> </a><h2> IR Library Data Structures</h2><dl><a name="924935"> </a><p></p><dt>This section lists some of the more important data types used by IR library functions.</dl><a name="924937"> </a><h3> IrConnect</h3><dl><a name="924938"> </a><p></p><dt>This data structure is used to manage an IrLMP or Tiny TP connection.</dl><a name="924940"> </a><h4>Listing 52.1	 IrConnect Data Structure</h4><a name="924941"> </a><hr><code>/* Forward declaration of the IrConnect structure */</code><br><a name="924942"> </a><code>typedef struct _hconnect IrConnect;</code><br><a name="924943"> </a><code></code><br><a name="924944"> </a><code>/*------------------------------------------------------------- */</code><br><a name="924945"> </a><code>typedef struct _hconnect {</code><br><a name="924946"> </a><code>UInt8&nbsp;lLsap; /* Local LSAP this connection will listen on */</code><br><a name="924947"> </a><code>UInt8&nbsp;rLsap; /* Remote Lsap */</code><br><a name="924948"> </a><code></code><br><a name="924949"> </a><code>/*============== For Internal Use Only =======================</code><br><a name="924950"> </a><code> *</code><br><a name="924951"> </a><code> * The following is used internally by the stack and should not be</code><br><a name="924952"> </a><code> * modified by the user.</code><br><a name="924953"> </a><code> *</code><br><a name="924954"> </a><code> *=============================================================*/</code><br><a name="924955"> </a><code></code><br><a name="924956"> </a><code>UInt8&nbsp;flags; /* Flags containing state, type, etc. */</code><br><a name="930370"> </a><code>UInt8&nbsp;reserved; /* Explicitly account for 16-bit alignment padding */</code><br><a name="924957"> </a><code>IrCallBack&nbsp;callBack; /* Pointer to callback function */</code><br><a name="924958"> </a><code></code><br><a name="924959"> </a><code>/* Tiny TP fields */</code><br><a name="924963"> </a><code><code><a href="IRLib.html#925009"></code>IrPacket<code></a></code> packet; /* Packet for internal use */</code><br><a name="924964"> </a><code>ListEntry&nbsp;packets; /* List of packets to send */</code><br><a name="924965"> </a><code>UInt16&nbsp;sendCredit; /* Amount of credit from peer */</code><br><a name="924966"> </a><code>UInt8&nbsp;availCredit; /* Amount of credit to give to peer */</code><br><a name="924967"> </a><code>UInt8&nbsp;dataOff; /* Amount of data less than IrLAP size */</code><br><a name="924968"> </a><code>} _hconnect;</code><br><hr><br><a name="924969"> </a><h4> Field Descriptions</h4><p><a name="925007"> </a> </p><p><div> <table border="3"><caption><B></B></caption><tr><td><a name="924972"> </a><code>lLsap</code></td><td><a name="924974"> </a>Local LSAP this connection will listen on</td></tr><tr><td><a name="924976"> </a><code>rLsap</code></td><td><a name="924978"> </a>Remote Lsap</td></tr><tr><td><a name="924980"> </a><code>flags</code></td><td><a name="924982"> </a>Flags containing state, type, etc. Do NOT modify, internal use only.</td></tr><tr><td><a name="930379"> </a><code>reserved</code></td><td><a name="930381"> </a>Reserved for future use</td></tr><tr><td><a name="924984"> </a><code>callBack</code></td><td><a name="924986"> </a>Pointer to callback function. Do NOT modify, internal use only.</td></tr><tr><td><a name="924988"> </a><code>packet</code></td><td><a name="924990"> </a>Packet for internal use</td></tr><tr><td><a name="924992"> </a><code>packets</code></td><td><a name="924994"> </a>List of packets to send</td></tr><tr><td><a name="924996"> </a><code>sendCredit</code></td><td><a name="924998"> </a>Amount of credit from peer</td></tr><tr><td><a name="925000"> </a><code>availCredit</code></td><td><a name="925002"> </a>Amount of credit to give to peer</td></tr><tr><td><a name="925004"> </a><code>dataOff</code></td><td><a name="925006"> </a>Amount of data less than IrLAP size</td></tr></table><table><tr><td></table></div></p><a name="925009"> </a><h3> IrPacket</h3><dl><a name="925010"> </a><p></p><dt>This data structure is used for sending IrDA packets.</dl><a name="925012"> </a><h4>Listing 52.2	 IrPacket Data Structure</h4><a name="925013"> </a><hr><code>typedef struct _IrPacket {</code><br><a name="925014"> </a><code>/* The node field must be the first field in the structure. It is</code><br><a name="925015"> </a><code> * used internally by the stack. */</code><br><a name="925016"> </a><code>ListEntry&nbsp;node;</code><br><a name="925017"> </a><code></code><br><a name="925018"> </a><code>/* The buff field is used to point to a buffer of data to send and</code><br><a name="925019"> </a><code> * len field indicates the number of bytes in buff. */</code><br><a name="925020"> </a><code>UInt8&nbsp;*buff;</code><br><a name="925021"> </a><code>UInt16&nbsp;len;</code><br><a name="925022"> </a><code></code><br><a name="925023"> </a><code>/*==================  For Internal Use Only ======================</code><br><a name="925024"> </a><code> *</code><br><a name="925025"> </a><code> * The following is used internally by the stack and should not be</code><br><a name="925026"> </a><code> * modified by the upper layer.</code><br><a name="925027"> </a><code> *</code><br><a name="925028"> </a><code> *==============================================================*/</code><br><a name="925029"> </a><code>IrConnect*&nbsp;origin; /* Pointer to connection which owns packet */</code><br><a name="925030"> </a><code>UInt8&nbsp;headerLen; /* Number of bytes in the header */</code><br><a name="925031"> </a><code>UInt8&nbsp;header[14]; /* Storage for the header */</code><br><a name="930060"> </a><code>UInt8&nbsp;reserved; /*Explicitly account for 16-bit alignment padding*/</code><br><a name="925032"> </a><code>} IrPacket;</code><br><hr><br><a name="925033"> </a><h4> Field Descriptions</h4><p><a name="925059"> </a> </p><p><div> <table border="3"><caption><B></B></caption><tr><td><a name="925036"> </a><code>node</code></td><td><a name="925038"> </a>Reserved for internal use</td></tr><tr><td><a name="925040"> </a><code>buff</code></td><td><a name="925042"> </a>Points to a buffer of data to send</td></tr><tr><td><a name="925044"> </a><code>len</code></td><td><a name="925046"> </a>Number of bytes in <code>buff</code></td></tr><tr><td><a name="925048"> </a><code>origin</code></td><td><a name="925050"> </a>Pointer to connection which owns packet. Do NOT modify, internal use only.</td></tr><tr><td><a name="925052"> </a><code>headerLen</code></td><td><a name="925054"> </a>Number of bytes in the header. Do NOT modify, internal use only.</td></tr><tr><td><a name="925056"> </a><code>header</code></td><td><a name="925058"> </a>Storage for the header. Do NOT modify, internal use only.</td></tr><tr><td><a name="930085"> </a><code>reserved</code></td><td><a name="930087"> </a>Reserved for future use</td></tr></table><table><tr><td></table></div></p><a name="925061"> </a><h3> IrIASObject</h3><dl><a name="925062"> </a><p></p><dt>This data structure is used as storage for an IAS object managed by the local IAS server. An object of this type is passed as the <code>obj</code> parameter to the <code><a href="IRLib.html#925842"></code>IrIAS_Add<code></a></code> function.</dl><a name="925067"> </a><h4>Listing 52.3	 IrIASObject Data Structure</h4><a name="925068"> </a><hr><code>typedef struct _IrIasObject {</code><br><a name="925069"> </a><code>UInt8&nbsp;*name; /* Pointer to name of object */</code><br><a name="925070"> </a><code>UInt8&nbsp;len; /* Length of object name */</code><br><a name="925071"> </a><code></code><br><a name="925072"> </a><code>UInt8&nbsp;nAttribs; /* Number of attributes */</code><br><a name="925073"> </a><code>IrIasAttribute*&nbsp;attribs; /* A pointer to an array of attributes */</code><br><a name="925074"> </a><code>} IrIasObject;</code><br><hr><br><a name="925075"> </a><h4> Field Descriptions</h4><p><a name="925093"> </a> </p><p><div> <table border="3"><caption><B></B></caption><tr><td><a name="925078"> </a><code>name</code></td><td><a name="925080"> </a>Pointer to name of object</td></tr><tr><td><a name="925082"> </a><code>len</code></td><td><a name="925084"> </a>Length of object name</td></tr><tr><td><a name="925086"> </a><code>nAttribs</code></td><td><a name="925088"> </a>Number of attributes</td></tr><tr><td><a name="925090"> </a><code>attribs</code></td><td><a name="925092"> </a>Pointer to an array of attributes</td></tr></table><table><tr><td></table></div></p><a name="925095"> </a><h3> IrIasQuery</h3><dl><a name="925096"> </a><p></p><dt>This data structure is used for performing IAS queries. An object of this type is passed as the<code> token </code>parameter to the <code><a href="IRLib.html#926083"></code>IrIAS_Query<code></a></code> function (and several other functions as well).</dl><a name="925101"> </a><h4>Listing 52.4	 IrIasQuery Data Structure</h4><a name="925102"> </a><hr><code>* Forward declaration of a structure used for performing IAS</code><br><a name="925103"> </a><code>* Queries so that a callback type can be defined for use in </code><br><a name="925104"> </a><code>* the structure. */</code><br><a name="925105"> </a><code>typedef struct _IrIasQuery IrIasQuery;</code><br><a name="925106"> </a><code>typedef void (*IrIasQueryCallBack)(IrStatus);</code><br><a name="925107"> </a><code></code><br><a name="925108"> </a><code>* Actual definition of the IrIasQuery structure. */</code><br><a name="925109"> </a><code>typedef struct _IrIasQuery</code><br><a name="925110"> </a><code>{</code><br><a name="925111"> </a><code>/* Query fields. The query buffer contains the class name and</code><br><a name="925112"> </a><code> * class attribute whose value is being queried--it is as follows:</code><br><a name="925113"> </a><code> *</code><br><a name="925114"> </a><code> * 1 byte - Length of class name</code><br><a name="925115"> </a><code> * "Length" bytes - class name</code><br><a name="925116"> </a><code> * 1 byte - length of attribute name</code><br><a name="925117"> </a><code> * "Length" bytes - attribute name</code><br><a name="925118"> </a><code> *</code><br><a name="925119"> </a><code> * queryLen - contains the total number of byte in the query */</code><br><a name="925120"> </a><code>UInt8&nbsp;queryLen; /* Total length of the query */</code><br><a name="930389"> </a><code>UInt8&nbsp;reserved; /* Explicitly account for 16-bit alignment padding */</code><br><a name="925121"> </a><code>UInt8&nbsp;*queryBuf; /* Points to buffer containing the query */</code><br><a name="925122"> </a><code></code><br><a name="925123"> </a><code>/* Fields for the query result */</code><br><a name="925124"> </a><code>UInt16&nbsp;resultBufSize; /* Size of the result buffer */</code><br><a name="925125"> </a><code>UInt16&nbsp;resultLen; /* Actual number of bytes in the result buffer */</code><br><a name="925126"> </a><code>UInt16&nbsp;listLen; /* Number of items in the result list. */</code><br><a name="925127"> </a><code>UInt16&nbsp;offset; /* Offset into results buffer */</code><br><a name="925128"> </a><code>UInt8&nbsp;retCode; /* Return code of operation */</code><br><a name="925129"> </a><code>UInt8&nbsp;overFlow; /* Set TRUE if result exceeded result buffer size*/</code><br><a name="925130"> </a><code>UInt8&nbsp;*result; /* Pointer to buffer containing result; */</code><br><a name="925131"> </a><code></code><br><a name="925132"> </a><code>/* Pointer to callback function */</code><br><a name="925133"> </a><code>IrIasQueryCallBack callBack;</code><br><a name="925134"> </a><code>} _IrIasQuery;</code><br><hr><br><a name="925135"> </a><h4> Field Descriptions</h4><p><a name="925177"> </a> </p><p><div> <table border="3"><caption><B></B></caption><tr><td><a name="925138"> </a><code>queryLen</code></td><td><a name="925140"> </a>Total length of the query</td></tr><tr><td><a name="930428"> </a><code>reserved</code></td><td><a name="930430"> </a>Reserved for future use</td></tr><tr><td><a name="925142"> </a><code>queryBuf</code></td><td><a name="925144"> </a>Pointer to buffer containing the query</td></tr><tr><td><a name="925146"> </a><code>resultBufSize</code></td><td><a name="925148"> </a>Size of the result buffer</td></tr><tr><td><a name="925150"> </a><code>resultLen</code></td><td><a name="925152"> </a>Actual number of bytes in the result buffer</td></tr><tr><td><a name="925154"> </a><code>listLen</code></td><td><a name="925156"> </a>Number of items in the result list</td></tr><tr><td><a name="925158"> </a><code>offset</code></td><td><a name="925160"> </a>Offset into results buffer</td></tr><tr><td><a name="925162"> </a><code>retCode</code></td><td><a name="925164"> </a>Return code of operation</td></tr><tr><td><a name="925166"> </a><code>overFlow</code></td><td><a name="925168"> </a>Set TRUE if result exceeded result buffer size</td></tr><tr><td><a name="925170"> </a><code>result</code></td><td><a name="925172"> </a>Pointer to buffer containing result</td></tr><tr><td><a name="925174"> </a><code>callBack</code></td><td><a name="925176"> </a>Pointer to query callback function</td></tr></table><table><tr><td></table></div></p><a name="925178"> </a><h3> IrCallbackParms</h3><dl><a name="925179"> </a><p></p><dt>This data structure is used to pass information from the stack to the upper layer of the stack (application). Not all fields are valid at any given time. The type of event determines which fields are valid. An object of this type is passed as the second parameter to the <code>IrCallback</code> function.</dl><a name="925181"> </a><h4>Listing 52.5	 IrCallbackParms Data Structure</h4><a name="925182"> </a><hr><code>typedef struct {</code><br><a name="925183"> </a><code>IrEvent&nbsp;event; /* Event causing callback */</code><br><a name="930321"> </a><code>UInt8&nbsp;reserved1; /* Explicitly account for 16-bit alignment padding */</code><br><a name="925184"> </a><code>UInt8&nbsp;*rxBuff; /* Receive buffer already advanced to app data */</code><br><a name="925185"> </a><code>UInt16&nbsp;rxLen; /* Length of data in receive buffer */</code><br><a name="925189"> </a><code><a href="IRLib.html#925009">IrPacket</a>*&nbsp;packet; /* Pointer to packet being returned */</code><br><a name="925190"> </a><code>IrDeviceList*&nbsp;deviceList; /* Pointer to discovery device list */</code><br><a name="925191"> </a><code>IrStatus&nbsp;status; /* Status of stack */</code><br><a name="930094"> </a><code>UInt8&nbsp;reserved2; /* Explicitly account for 16-bit alignment padding */</code><br><a name="925192"> </a><code>} IrCallBackParms;</code><br><hr><br><a name="925193"> </a><h4> Field Descriptions</h4><p><a name="925219"> </a> </p><p><div> <table border="3"><caption><B></B></caption><tr><td><a name="925196"> </a><code>event</code></td><td><a name="925198"> </a>Event causing callback</td></tr><tr><td><a name="930359"> </a><code>reserved1</code></td><td><a name="930361"> </a>Reserved for future use</td></tr><tr><td><a name="925200"> </a><code>rxBuff</code></td><td><a name="925202"> </a>Receive buffer already advanced to app data</td></tr><tr><td><a name="925204"> </a><code>rxLen</code></td><td><a name="925206"> </a>Length of data in receive buffer</td></tr><tr><td><a name="925208"> </a><code>packet</code></td><td><a name="925210"> </a>Pointer to packet being returned</td></tr><tr><td><a name="925212"> </a><code>deviceList</code></td><td><a name="925214"> </a>Pointer to discovery device list</td></tr><tr><td><a name="925216"> </a><code>status</code></td><td><a name="925218"> </a>Status of stack</td></tr><tr><td><a name="930363"> </a><code>reserved2</code></td><td><a name="930365"> </a>Reserved for future use</td></tr></table><table><tr><td></table></div></p><a name="925221"> </a><h2> IR Stack Callback Events</h2><dl><a name="925222"> </a><p></p><dt>The IR stack calls the application via a callback function stored in each <code><a href="IRLib.html#924937"></code>IrConnect<code></a></code> structure. The callback function is called with a pointer to the <code>IrConnect</code> structure and a pointer to a parameter structure. The parameter structure contains an <code>event</code> field, which indicates the reason the callback is called, and other parameters, which have meaning based on the event. <a name="925226"> </a><p></p><dt>The meaning of the events is described in the following sections.</dl><a name="925228"> </a><h3> LEVENT_DATA_IND</h3><dl><a name="925229"> </a><p></p><dt>Data has been received. The received data is accessed using fields <code>rxBuff</code> and <code>rxLen</code>.</dl><a name="925231"> </a><h3> LEVENT_DISCOVERY_CNF</h3><dl><a name="925232"> </a><p></p><dt>Indicates the completion of a discovery operation. The field <code>deviceList</code> points to the discovery list.</dl><a name="925234"> </a><h3> LEVENT_LAP_CON_CNF</h3><dl><a name="925235"> </a><p></p><dt>The requested IrLAP connection has been made successfully. The callback function of all bound <code>IrConnect</code> structures is called.</dl><a name="925237"> </a><h3> LEVENT_LAP_CON_IND</h3><dl><a name="925238"> </a><p></p><dt>Indicates that the IrLAP connection has come up. The callback of all bound <code>IrConnect</code> structures is called.</dl><a name="925240"> </a><h3> LEVENT_LAP_DISCON_IND</h3><dl><a name="925241"> </a><p></p><dt>Indicates that the IrLAP connection has gone down. This means that all IrLMP connections are also down. A callback with event <code>LEVENT_LM_CON_IND</code> will not be given. The callback function of all bound <code>IrConnect</code> structures is called.</dl><a name="925243"> </a><h3> LEVENT_LM_CON_CNF</h3><dl><a name="925244"> </a><p></p><dt>The requested IrLMP/Tiny TP connection has been made successfully. Connection data from the other side is found using fields <code>rxBuff</code> and <code>rxLen</code>.</dl><a name="925246"> </a><h3> LEVENT_LM_CON_IND</h3><dl><a name="925247"> </a><p></p><dt>Other device has initiated a connection. <code>IrConnectRsp</code> should be called to accept the connection. Any data associated with the connection request can be found using fields <code>rxBuff</code> and <code>rxLen</code>, for the data pointer and length, respectively.</dl><a name="925249"> </a><h3> LEVENT_LM_DISCON_IND</h3><dl><a name="925250"> </a><p></p><dt>The IrLMP/Tiny TP connection has been disconnected. Any data associated with the disconnect indication can be found using fields <code>rxBuff</code> and <code>rxLen</code>, for the data pointer and length, respectively.</dl><a name="925252"> </a><h3> LEVENT_PACKET_HANDLED</h3><dl><a name="925253"> </a><p></p><dt>A packet is being returned. A pointer to the packet exists in field <code>packet</code>.</dl><a name="925255"> </a><h3> LEVENT_STATUS_IND</h3><dl><a name="925256"> </a><p></p><dt>Indicates that a status event from the stack has occurred. The <code>status</code> field indicates the status generating the event. Possible statuses are as follows.<ul type="SQUARE"><a name="925257"> </a><br><li><code>IR_STATUS_NO_PROGRESS</code> means that IrLAP has no progress for 3 seconds threshold time (e.g. the beam is blocked).<br><a name="925258"> </a><br><li><code>IR_STATUS_LINK_OK</code> indicates that the no progress condition has cleared.<br><a name="925259"> </a><br><li><code>IR_STATUS_MEDIA_NOT_BUSY</code> indicates that the IR media has transitioned from busy to not busy.<br></ul></dl><a name="925261"> </a><h3> LEVENT_TEST_CNF</h3><dl><a name="925262"> </a><p></p><dt>Indicates that a TEST command has completed. The <code>status</code> field indicates if the test was successful. <code>IR_STATUS_SUCCESS</code> indicates that operation was successful and the data in the test response can be found by using the <code>rxBuff</code> and <code>rxLen</code> fields. <code>IR_STATUS_FAILED</code> indicates that no TEST response was received. The packet passed to perform the test command is passed back in the <code>packet</code> field and is now available (no separate packet handled event will occur).</dl><a name="925264"> </a><h3> LEVENT_TEST_IND</h3><dl><a name="925265"> </a><p></p><dt>Indicates that a TEST command frame has been received. A pointer to the received data is in <code>rxBuff</code> and <code>rxLen</code>. A pointer to the packet that will be sent in response to the test command is in the <code>packet</code> field. The packet is currently set up to respond with the same data sent in the command TEST frame. If different data is desired as a response, then modify the packet structure. This event is sent to the callback function in all bound <code>IrConnect</code> structures. The IAS connections ignore this event.</dl><a name="925267"> </a><h2> IR Library Functions</h2><a name="925273"> </a><br> <br> <br><h3> IrAdvanceCredit</h3><dl><dl><a name="925274"> </a><h4>Purpose </h4><dl><a name="925275"> </a><p></p><dt>Advances credit to the other side of the connection.</dl><a name="925276"> </a><h4>Prototype </h4><dl><a name="925277"> </a><dt><code>void IrAdvanceCredit (IrConnect*&nbsp;con, UInt8&nbsp;credit)</code></dl></dl><dl><a name="925278"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925282"> </a><CODE>--&gt; <code>con</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to <code><a href="IRLib.html#924937"></code>IrConnect<code></a></code> structure representing connection to which credit is advanced.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925283"> </a><CODE>--&gt; <code>credit</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Amount of credit to advance.<br></TD></TR></TABLE></dl><dl><a name="925284"> </a><h4>Result </h4><dl><a name="925285"> </a><p></p><dt>Returns nothing.</dl></dl><dl><a name="925286"> </a><h4>Comments </h4><dl><a name="925287"> </a><p></p><dt>The total amount of credit should not exceed 127. The credit passed by this function is added to the existing available credit, which is must not exceed 127. This function only makes sense for a Tiny TP connection.</dl><a name="925288"> </a><h4>Compatibility </h4><dl><a name="925292"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="925295"> </a><br> <br> <br><h3> IrBind</h3><dl><dl><a name="925296"> </a><h4>Purpose </h4><dl><a name="925297"> </a><p></p><dt>Obtains a local LSAP selector and registers the connection with the protocol stack. </dl><a name="925298"> </a><h4>Prototype </h4><dl><a name="925299"> </a><dt><code>IrStatus IrBind (UInt16&nbsp;refNum, IrConnect*&nbsp;con, IrCallBack&nbsp;callBack)</code></dl></dl><dl><a name="925300"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925301"> </a><CODE>--&gt; <code>refnum</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>IR library refNum.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925305"> </a><CODE>&lt;--&gt; <code>con</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to <code><a href="IRLib.html#924937"></code>IrConnect<code></a></code> structure.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925306"> </a><CODE>--&gt; <code>callBack</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to a callBack function that handles the indications and confirmation from the protocol stack.<br></TD></TR></TABLE></dl><dl><a name="925307"> </a><h4>Result </h4><dl><a name="925308"> </a><p></p><dt><code>IR_STATUS_SUCCESS</code> means the operation completed successfully. The assigned LSAP can be found in <code>con-&gt;lLsap</code>.<a name="925309"> </a><p></p><dt><code>IR_STATUS_FAILED</code> means the operation failed for one of the following reasons:<ul type="SQUARE"><a name="925310"> </a><br><li><code>con</code> is already bound to the stack<br><a name="925311"> </a><br><li>no room in the connection table<br></ul></dl></dl><dl><a name="925312"> </a><h4>Comments </h4><dl><a name="925313"> </a><p></p><dt>This <code>IrConnect</code> structure will be initialized. Any values stored in the structure will be lost. The assigned LSAP will be in the <code>lLsap</code> field of <code>con</code>. The type of the connection will be set to IrLMP. The <code>IrConnect</code> must be bound to the stack before it can be used.</dl><a name="925314"> </a><h4>Compatibility </h4><dl><a name="925318"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="925321"> </a><br> <br> <br><h3> IrClose</h3><dl><dl><a name="925322"> </a><h4>Purpose </h4><dl><a name="925323"> </a><p></p><dt>Closes the IR library. This releases the global memory for the IR stack and any system resources it uses. This must be called when an application is done with the IR library.</dl><a name="925324"> </a><h4>Prototype </h4><dl><a name="925325"> </a><dt><code>Err IrClose (UInt16&nbsp;refnum)</code></dl></dl><dl><a name="925326"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925327"> </a><CODE>--&gt; <code>refnum</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>IR library refNum.<br></TD></TR></TABLE></dl><dl><a name="925328"> </a><h4>Result </h4><dl><a name="925329"> </a><p></p><dt>Returns 0 if successful.</dl></dl><dl><a name="925331"> </a><h4>Compatibility </h4><dl><a name="925335"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="925338"> </a><br> <br> <br><h3> IrConnectIrLap</h3><dl><dl><a name="925339"> </a><h4>Purpose </h4><dl><a name="925340"> </a><p></p><dt>Starts an IrLAP connection.</dl><a name="925341"> </a><h4>Prototype </h4><dl><a name="925342"> </a><dt><code>IrStatus IrConnectIrLap (UInt16&nbsp;refNum, IrDeviceAddr&nbsp;deviceAddr)</code></dl></dl><dl><a name="925343"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925344"> </a><CODE>--&gt; <code>refnum</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>IR library refNum.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925345"> </a><CODE>--&gt; <code>deviceAddr</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>32-bit address of device to which connection should be made.<br></TD></TR></TABLE></dl><dl><a name="925346"> </a><h4>Result </h4><dl><a name="925347"> </a><p></p><dt><code>IR_STATUS_PENDING</code> means the operation is started successfully; the result is returned via callback.<a name="925348"> </a><p></p><dt><code>IR_STATUS_MEDIA_BUSY</code> means the operation failed because the media is busy. Media busy is caused by one of the following reasons:<ul type="SQUARE"><a name="925349"> </a><br><li>Other devices are using the IR medium.<br><a name="925350"> </a><br><li>An IrLAP connection already exists.<br><a name="925351"> </a><br><li>A discovery process is in progress.<br></ul></dl></dl><dl><a name="925352"> </a><h4>Comments </h4><dl><a name="925353"> </a><p></p><dt>The result is signaled to all bound <code>IrConnect</code> structures via the callback function. The callback event is <code>LEVENT_LAP_CON_CNF</code> if successful or <code>LEVENT_LAP_DISCON_IND</code> if unsuccessful.</dl><a name="925354"> </a><h4>Compatibility </h4><dl><a name="925358"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="925361"> </a><br> <br> <br><h3> IrConnectReq</h3><dl><dl><a name="925362"> </a><h4>Purpose </h4><dl><a name="925363"> </a><p></p><dt>Requests an IrLMP or Tiny TP connection.</dl><a name="925364"> </a><h4>Prototype </h4><dl><a name="925365"> </a><dt><code>IrStatus IrConnectReq (UInt16&nbsp;refNum, IrConnect*&nbsp;con, IrPacket*&nbsp;packet, UInt8&nbsp;credit)</code></dl></dl><dl><a name="925366"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925367"> </a><CODE>--&gt; <code>refnum</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>IR library refNum.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925371"> </a><CODE>--&gt; <code>con</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to <code><a href="IRLib.html#924937"></code>IrConnect<code></a></code> structure for handling the connection. The <code>rLsap</code> field must contain the LSAP selector for the peer on the other device. Also the type of the connection must be set. Use <code>IR_SetConTypeLMP</code> to set the type to an IrLMP connection or <code>IR_SetConTypeTTP</code> to set the type to a Tiny TP connection.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925372"> </a><CODE>--&gt; <code>packet</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to a packet that contains connection data. Even if no connection data is needed, the packet must point to a valid <code><a href="IRLib.html#925009"></code>IrPacket<code></a></code> structure. The packet will be returned via the callback with the <code>LEVENT_PACKET_HANDLED</code> event if no errors occur. The maximum size of the packet is <code>IR_MAX_CON_PACKET</code> for an IrLMP connection or <code>IR_MAX_TTP_CON_PACKET</code> for a Tiny TP connection.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925376"> </a><CODE>--&gt; <code>credit</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Initial amount of credit advanced to the other side. Must be less than 127. It is ANDed with 0x7f, so if it is greater than 127 unexpected results will occur. This parameter is ignored if the connection is an IrLMP connection.<br></TD></TR></TABLE></dl><dl><a name="925377"> </a><h4>Result </h4><dl><a name="925378"> </a><p></p><dt><code>IR_STATUS_PENDING</code> means the operation has been started successfully and the result will be returned via the callback function with the event <code>LEVENT_LM_CON_CNF</code> if the connection is made or <code>LEVENT_LM_DISCON_IND</code> if connection fails. The packet is returned via the callback with the event <code>LEVENT_PACKET_HANDLED</code>.<a name="925379"> </a><p></p><dt><code>IR_STATUS_FAILED</code> means the operation failed because of one of the following reasons. Note that the packet is available immediately.<ul type="SQUARE"><a name="925380"> </a><br><li>Connection is busy (already involved in a connection)<br><a name="925381"> </a><br><li><code>IrConnect</code> structure is not bound to the stack<br><a name="925382"> </a><br><li>Packet size exceeds maximum allowed<br></ul><a name="925383"> </a><p></p><dt><code>IR_STATUS_NO_IRLAP</code> means the operation failed because there is no IrLAP connection (the packet is available immediately).</dl></dl><dl><a name="925384"> </a><h4>Comments </h4><dl><a name="925385"> </a><p></p><dt>The result is signaled via the callback specified in the <code>IrConnect</code> structure. The callback event is <code>LEVENT_LM_CON_CNF</code> indicates that the connection is up and <code>LEVENT_LM_DISCON_IND</code> indicates that the connection failed. Before calling this function the fields in the con structure must be properly set.</dl><a name="925386"> </a><h4>Compatibility </h4><dl><a name="925390"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="925393"> </a><br> <br> <br><h3> IrConnectRsp</h3><dl><dl><a name="925394"> </a><h4>Purpose </h4><dl><a name="925395"> </a><p></p><dt>Accepts an incoming connection that has been signaled via the callback with the event <code>LEVENT_LM_CON_IND</code>.</dl><a name="925396"> </a><h4>Prototype </h4><dl><a name="925397"> </a><dt><code>IrStatus IrConnectRsp (UInt16&nbsp;refNum, IrConnect*&nbsp;con, IrPacket*&nbsp;packet, UInt8&nbsp;credit)</code></dl></dl><dl><a name="925398"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925399"> </a><CODE>--&gt; <code>refnum</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>IR library refNum.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925403"> </a><CODE>--&gt; <code>con</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to <code><a href="IRLib.html#924937"></code>IrConnect<code></a></code> structure to managed connection.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925404"> </a><CODE>--&gt; <code>packet</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to a packet that contains connection data. Even if no connection data is needed, the packet must point to a valid <code><a href="IRLib.html#925009"></code>IrPacket<code></a></code> structure. The packet will be returned via the callback with the <code>LEVENT_PACKET_HANDLED</code> event if no errors occur. The maximum size of the packet is <code>IR_MAX_CON_PACKET</code> for an IrLMP connection or <code>IR_MAX_TTP_CON_PACKET</code> for a Tiny TP connection.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925408"> </a><CODE>--&gt; <code>credit</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Initial amount of credit advanced to the other side. Must be less than 127. It is ANDed with 0x7f, so if it is greater than 127 unexpected results will occur. This parameter is ignored if the connection is an IrLMP connection.<br></TD></TR></TABLE></dl><dl><a name="925409"> </a><h4>Result </h4><dl><a name="925410"> </a><p></p><dt><code>IR_STATUS_PENDING</code> means the operation has been started successfully and the packet will be returned via the callback function with the event <code>LEVENT_PACKET_HANDLED</code>.<a name="925411"> </a><p></p><dt><code>IR_STATUS_FAILED</code> means the operation failed because of one of the following reasons. Note that the packet is available immediately.<ul type="SQUARE"><a name="925412"> </a><br><li>Connection is not in the proper state to require a response<br><a name="925413"> </a><br><li><code>IrConnect</code> structure is not bound to the stack<br><a name="925414"> </a><br><li>Packet size exceeds maximum allowed<br></ul><a name="925415"> </a><p></p><dt><code>IR_STATUS_NO_IRLAP</code> means the operation failed because there is no IrLAP connection (the packet is available immediately).</dl></dl><dl><a name="925416"> </a><h4>Comments </h4><dl><a name="925417"> </a><p></p><dt><code>IrConnectRsp</code> can be called during the callback or later to accept the connection. The type of the connection must already have been set to IrLMP or Tiny TP before the <code>LEVENT_LM_CON_IND</code> event.</dl><a name="925418"> </a><h4>Compatibility </h4><dl><a name="925422"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="925425"> </a><br> <br> <br><h3> IrDataReq</h3><dl><dl><a name="925426"> </a><h4>Purpose </h4><dl><a name="925427"> </a><p></p><dt>Sends a data packet.</dl><a name="925428"> </a><h4>Prototype </h4><dl><a name="925429"> </a><dt><code>IrStatus IrDataReq (UInt16&nbsp;refNum, IrConnect*&nbsp;con, IrPacket*&nbsp;packet)</code></dl></dl><dl><a name="925430"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925431"> </a><CODE>--&gt; <code>refnum</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>IR library refNum.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925435"> </a><CODE>--&gt; <code>con</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to <code><a href="IRLib.html#924937"></code>IrConnect<code></a></code> structure that specifies the connection over which the packet should be sent.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925439"> </a><CODE>--&gt; <code>packet</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to a valid <code><a href="IRLib.html#925009"></code>IrPacket<code></a></code> structure that contains data to send. The packet should not exceed the max size found with <code><a href="IRLib.html#925614"></code>IrMaxTxSize<code></a></code>.<br></TD></TR></TABLE></dl><dl><a name="925443"> </a><h4>Result </h4><dl><a name="925444"> </a><p></p><dt><code>IR_STATUS_PENDING</code> means the packet has been queued by the stack. The packet will be returned via the callback with event <code>LEVENT_PACKET_HANDLED</code>.<a name="925445"> </a><p></p><dt><code>IR_STATUS_FAILED</code> means the operation failed because of one of the following reasons. Note that the packet is available immediately.<ul type="SQUARE"><a name="925446"> </a><br><li><code>IrConnect</code> structure is not bound to the stack<br><a name="925447"> </a><br><li>Packet size exceeds maximum allowed<br><a name="925448"> </a><br><li><code>IrConnect</code> structure does not represent an active connection<br></ul></dl></dl><dl><a name="925449"> </a><h4>Comments </h4><dl><a name="925450"> </a><p></p><dt>The packet is owned by the stack until it is returned via the callback with event <code>LEVENT_PACKET_HANDLED</code>. The largest packet that can be sent is found by calling <code><a href="IRLib.html#925614"></code>IrMaxTxSize<code></a></code>.</dl><a name="925454"> </a><h4>Compatibility </h4><dl><a name="925458"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="925461"> </a><br> <br> <br><h3> IrDisconnectIrLap</h3><dl><dl><a name="925462"> </a><h4>Purpose </h4><dl><a name="925463"> </a><p></p><dt>Disconnects an IrLAP connection.</dl><a name="925464"> </a><h4>Prototype </h4><dl><a name="925465"> </a><dt><code>IrStatus IrDisconnectIrLap (UInt16&nbsp;refNum)</code></dl></dl><dl><a name="925466"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925467"> </a><CODE>--&gt; <code>refnum</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>IR library refNum.<br></TD></TR></TABLE></dl><dl><a name="925468"> </a><h4>Result </h4><dl><a name="925469"> </a><p></p><dt><code>IR_STATUS_PENDING</code> means the operation started successfully and all bound <code>IrConnect</code> structures will be called back when complete.<a name="925470"> </a><p></p><dt><code>IR_STATUS_NO_IRLAP</code> means the operation failed because no IrLAP connection exists.</dl></dl><dl><a name="925471"> </a><h4>Comments </h4><dl><a name="925472"> </a><p></p><dt>When the IrLAP connection goes down, the callback of all bound <code>IrConnect</code> structures is called with event <code>LEVENT_LAP_DISCON_IND</code>.</dl><a name="925473"> </a><h4>Compatibility </h4><dl><a name="925477"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="925480"> </a><br> <br> <br><h3> IrDiscoverReq</h3><dl><dl><a name="925481"> </a><h4>Purpose </h4><dl><a name="925482"> </a><p></p><dt>Starts an IrLMP discovery process.</dl><a name="925483"> </a><h4>Prototype </h4><dl><a name="925484"> </a><dt><code>IrStatus IrDiscoverReq (UInt16&nbsp;refNum, IrConnect*&nbsp;con)</code></dl></dl><dl><a name="925485"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925486"> </a><CODE>--&gt; <code>refnum</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>IR library refNum.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925490"> </a><CODE>--&gt; <code>con</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to a bound <code><a href="IRLib.html#924937"></code>IrConnect<code></a></code> structure.<br></TD></TR></TABLE></dl><dl><a name="925491"> </a><h4>Result </h4><dl><a name="925492"> </a><p></p><dt><code>IR_STATUS_PENDING</code> means the operation is started successfully; the result is returned via callback.<a name="925493"> </a><p></p><dt><code>IR_STATUS_MEDIA_BUSY</code> means the operation failed because the media is busy. Media busy is caused by one of the following reasons:<ul type="SQUARE"><a name="925494"> </a><br><li>Other devices are using the IR medium.<br><a name="925495"> </a><br><li>A discovery process is already in progress.<br><a name="925496"> </a><br><li>An IrLAP connection exists.<br></ul><a name="925497"> </a><p></p><dt><code>IR_STATUS_FAILED</code> means the operation failed because the <code>IrConnect</code> structure is not bound to the stack.</dl></dl><dl><a name="925498"> </a><h4>Comments </h4><dl><a name="925499"> </a><p></p><dt>The result will be signaled via the callback function specified in the <code>IrConnect</code> structure with the event <code>LEVENT_DISCOVERY_CNF</code>. Only one discovery can be invoked at a time.</dl><a name="925500"> </a><h4>Compatibility </h4><dl><a name="925504"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="925507"> </a><br> <br> <br><h3> IrIsIrLapConnected</h3><dl><dl><a name="925508"> </a><h4>Purpose </h4><dl><a name="925509"> </a><p></p><dt>Determines if an IrLAP connection exists.</dl><a name="925510"> </a><h4>Prototype </h4><dl><a name="925511"> </a><dt><code>BOOL IrIsIrLapConnected (UInt16&nbsp;refNum)</code></dl></dl><dl><a name="925512"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925513"> </a><CODE>--&gt; <code>refnum</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>IR library refNum.<br></TD></TR></TABLE></dl><dl><a name="925514"> </a><h4>Result </h4><dl><a name="925515"> </a><p></p><dt>True if IrLAP is connected, false otherwise.</dl></dl><dl><a name="925516"> </a><h4>Comments </h4><dl><a name="925517"> </a><p></p><dt>Only available if <code>IR_IS_LAP_FUNCS</code> is defined.</dl><a name="925518"> </a><h4>Compatibility </h4><dl><a name="925522"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="925525"> </a><br> <br> <br><h3> IrIsMediaBusy</h3><dl><dl><a name="925526"> </a><h4>Purpose </h4><dl><a name="925527"> </a><p></p><dt>Determines if the IR media is busy.</dl><a name="925528"> </a><h4>Prototype </h4><dl><a name="925529"> </a><dt><code>BOOL IrIsMediaBusy (UInt16&nbsp;refNum)</code></dl></dl><dl><a name="925530"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925531"> </a><CODE>--&gt; <code>refnum</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>IR library refNum.<br></TD></TR></TABLE></dl><dl><a name="925532"> </a><h4>Result </h4><dl><a name="925533"> </a><p></p><dt>True if IR media is busy, false otherwise.</dl></dl><dl><a name="925534"> </a><h4>Compatibility </h4><dl><a name="925538"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="925541"> </a><br> <br> <br><h3> IrIsNoProgress</h3><dl><dl><a name="925542"> </a><h4>Purpose </h4><dl><a name="925543"> </a><p></p><dt>Determines if IrLAP is not making progress.</dl><a name="925544"> </a><h4>Prototype </h4><dl><a name="925545"> </a><dt><code>BOOL IrIsNoProgress (UInt16&nbsp;refNum)</code></dl></dl><dl><a name="925546"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925547"> </a><CODE>--&gt; <code>refnum</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>IR library refNum.<br></TD></TR></TABLE></dl><dl><a name="925548"> </a><h4>Result </h4><dl><a name="925549"> </a><p></p><dt>True if IrLAP is not making progress, false otherwise.</dl></dl><dl><a name="925550"> </a><h4>Compatibility </h4><dl><a name="925554"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="925557"> </a><br> <br> <br><h3> IrIsRemoteBusy</h3><dl><dl><a name="925558"> </a><h4>Purpose </h4><dl><a name="925559"> </a><p></p><dt>Determines if the other device's IrLAP is busy.</dl><a name="925560"> </a><h4>Prototype </h4><dl><a name="925561"> </a><dt><code>BOOL IrIsRemoteBusy (UInt16&nbsp;refNum)</code></dl></dl><dl><a name="925562"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925563"> </a><CODE>--&gt; <code>refnum</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>IR library refNum.<br></TD></TR></TABLE></dl><dl><a name="925564"> </a><h4>Result </h4><dl><a name="925565"> </a><p></p><dt>True if the other device's IrLAP is busy, false otherwise.</dl></dl><dl><a name="925566"> </a><h4>Compatibility </h4><dl><a name="925570"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="925573"> </a><br> <br> <br><h3> IrLocalBusy</h3><dl><dl><a name="925574"> </a><h4>Purpose </h4><dl><a name="925575"> </a><p></p><dt>Sets the IrLAP local busy flag.</dl><a name="925576"> </a><h4>Prototype </h4><dl><a name="925577"> </a><dt><code>void IrLocalBusy (UInt16&nbsp;refNum, BOOL&nbsp;flag)</code></dl></dl><dl><a name="925578"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925579"> </a><CODE>--&gt; <code>refnum</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>IR library refNum.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925580"> </a><CODE>--&gt; <code>flag</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Value (true or false) to set for IrLAP's local busy flag.<br></TD></TR></TABLE></dl><dl><a name="925581"> </a><h4>Result </h4><dl><a name="925582"> </a><p></p><dt>Returns nothing.</dl></dl><dl><a name="925583"> </a><h4>Comments </h4><dl><a name="925584"> </a><p></p><dt>If local busy is set to true, then the local IrLAP layer will send RNR (Receive Not Ready) frames to the other side indicating it cannot receive any more data. If the local busy is set to false, IrLAP is ready to receive frames. <a name="925585"> </a><p></p><dt>The setting takes effect the next time IrLAP sends an RR (Receive Ready) frame. If IrLAP has data to send, the data will be sent first, so it should be used carefully.<a name="925586"> </a><p></p><dt>This function should not be used when using Tiny TP or when multiple connections exist.</dl><a name="925587"> </a><h4>Compatibility </h4><dl><a name="925591"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="925594"> </a><br> <br> <br><h3> IrMaxRxSize</h3><dl><dl><a name="925595"> </a><h4>Purpose </h4><dl><a name="925596"> </a><p></p><dt>Returns the maximum size buffer that can be sent by the other device.</dl><a name="925597"> </a><h4>Prototype </h4><dl><a name="925598"> </a><dt><code>UInt16 IrMaxRxSize (UInt16&nbsp;refNum, IrConnect*&nbsp;con)</code></dl></dl><dl><a name="925599"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925600"> </a><CODE>--&gt; <code>refnum</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>IR library refNum.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925604"> </a><CODE>--&gt; <code>con</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to <code><a href="IRLib.html#924937"></code>IrConnect<code></a></code> structure that represents an active connection.<br></TD></TR></TABLE></dl><dl><a name="925605"> </a><h4>Result </h4><dl><a name="925606"> </a><p></p><dt>Returns the maximum size buffer that can be sent by the other device (maximum bytes that can be received). The value returned is only valid for active connections. The maximum size will vary for each connection and is based on the negotiated IrLAP parameters and the type of the connection.</dl></dl><dl><a name="925607"> </a><h4>Compatibility </h4><dl><a name="925611"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="925614"> </a><br> <br> <br><h3> IrMaxTxSize</h3><dl><dl><a name="925615"> </a><h4>Purpose </h4><dl><a name="925616"> </a><p></p><dt>Returns the maximum size allowed for a transmit packet.</dl><a name="925617"> </a><h4>Prototype </h4><dl><a name="925618"> </a><dt><code>UInt16 IrMaxTxSize (UInt16&nbsp;refNum, IrConnect*&nbsp;con)</code></dl></dl><dl><a name="925619"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925620"> </a><CODE>--&gt; <code>refnum</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>IR library refNum.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925624"> </a><CODE>--&gt; <code>con</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to <code><a href="IRLib.html#924937"></code>IrConnect<code></a></code> structure that represents an active connection.<br></TD></TR></TABLE></dl><dl><a name="925625"> </a><h4>Result </h4><dl><a name="925626"> </a><p></p><dt>Returns the maximum size allowed for a transmit packet. The value returned is only valid for active connections. The maximum size will vary for each connection and is based on the negotiated IrLAP parameters and the type of the connection.</dl></dl><dl><a name="925627"> </a><h4>Compatibility </h4><dl><a name="925631"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="925634"> </a><br> <br> <br><h3> IrOpen</h3><dl><dl><a name="925635"> </a><h4>Purpose </h4><dl><a name="925636"> </a><p></p><dt>Opens the IR library. This allocates the global memory for the IR stack and reserves the system resources it requires. This must be done before any other IR library calls are made.</dl><a name="925637"> </a><h4>Prototype </h4><dl><a name="925638"> </a><dt><code>Err IrOpen (UInt16&nbsp;refnum, UInt32&nbsp;options)</code></dl></dl><dl><a name="925639"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925640"> </a><CODE>--&gt; <code>refnum</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>IR library refNum. This value is returned from the function <code><a href="SystemManager.html#925491"></code>SysLibFind<code></a></code>, which you must call first to load the IR library.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925644"> </a><CODE>--&gt; <code>options</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Open options flags. See the Comments section for details.<br></TD></TR></TABLE></dl><dl><a name="925645"> </a><h4>Result </h4><dl><a name="925646"> </a><p></p><dt>Returns 0 if successful.</dl></dl><dl><a name="925648"> </a><h4>Comments </h4><dl><a name="925649"> </a><p></p><dt>The following flags can be specified for the <code>options</code> parameter to set the speed of the connection:<p><a name="927242"> </a> </p><p><div> <table border="3"><caption><B></B></caption><tr><td><a name="925652"> </a><code>irOpenOptSpeed115200</code></td><td><a name="925654"> </a>Set maximum negotiated baud rate</td></tr><tr><td><a name="925656"> </a><code>irOpenOptSpeed57600</code></td><td><a name="925658"> </a>Set 57600 bps (default if no flags given)</td></tr><tr><td><a name="925660"> </a><code>irOpenOptSpeed9600</code></td><td><a name="925662"> </a>Set 9600 bps</td></tr></table><table><tr><td></table></div></p></dl><a name="925663"> </a><h4>Compatibility </h4><dl><a name="925667"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="925670"> </a><br> <br> <br><h3> IrSetConTypeLMP</h3><dl><dl><a name="925671"> </a><h4>Purpose </h4><dl><a name="925672"> </a><p></p><dt>Sets the type of the connection to IrLMP. This function must be called after the <code>IrConnect</code> structure is bound to the stack.</dl><a name="925673"> </a><h4>Prototype </h4><dl><a name="925674"> </a><dt><code>void IrSetConTypeLMP (IrConnect*&nbsp;con)</code></dl></dl><dl><a name="925675"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925679"> </a><CODE>--&gt; <code>con</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to <code><a href="IRLib.html#924937"></code>IrConnect<code></a></code> structure.<br></TD></TR></TABLE></dl><dl><a name="925680"> </a><h4>Result </h4><dl><a name="925681"> </a><p></p><dt>Returns nothing.</dl></dl><dl><a name="925682"> </a><h4>Compatibility </h4><dl><a name="925686"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="925689"> </a><br> <br> <br><h3> IrSetConTypeTTP</h3><dl><dl><a name="925690"> </a><h4>Purpose </h4><dl><a name="925691"> </a><p></p><dt>Sets the type of the connection to Tiny TP. This function must be called after the <code>IrConnect</code> structure is bound to the stack.</dl><a name="925692"> </a><h4>Prototype </h4><dl><a name="925693"> </a><dt><code>void IrSetConTypeTTP (IrConnect*&nbsp;con)</code></dl></dl><dl><a name="925694"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925698"> </a><CODE>--&gt; <code>con</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to <code><a href="IRLib.html#924937"></code>IrConnect<code></a></code> structure.<br></TD></TR></TABLE></dl><dl><a name="925699"> </a><h4>Result </h4><dl><a name="925700"> </a><p></p><dt>Returns nothing.</dl></dl><dl><a name="925701"> </a><h4>Compatibility </h4><dl><a name="925705"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="925708"> </a><br> <br> <br><h3> IrSetDeviceInfo</h3><dl><dl><a name="925709"> </a><h4>Purpose </h4><dl><a name="925710"> </a><p></p><dt>Sets the XID info string used during discovery to the given string and length.</dl><a name="925711"> </a><h4>Prototype </h4><dl><a name="925712"> </a><dt><code>IrStatus IrSetDeviceInfo (UInt16&nbsp;refNum, UInt8&nbsp;*info, UInt8&nbsp;len)</code></dl></dl><dl><a name="925713"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925714"> </a><CODE>--&gt; <code>refnum</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>IR library refNum.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925715"> </a><CODE>--&gt; <code>info</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to array of bytes.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925716"> </a><CODE>--&gt; <code>len</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Number of bytes pointed to by <code>info</code>.<br></TD></TR></TABLE></dl><dl><a name="925717"> </a><h4>Result </h4><dl><a name="925718"> </a><p></p><dt><code>IR_STATUS_SUCCESS</code> means the operation is successful.<a name="925719"> </a><p></p><dt><code>IR_STATUS_FAILED</code> means the operation failed because <code>info</code> is too big.</dl></dl><dl><a name="925720"> </a><h4>Comments </h4><dl><a name="925721"> </a><p></p><dt>The XID info string contains hints and the nickname of the device. The size cannot exceed <code>IR_MAX_DEVICE_INFO</code> bytes.</dl><a name="925722"> </a><h4>Compatibility </h4><dl><a name="925726"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="925729"> </a><br> <br> <br><h3> IrTestReq</h3><dl><dl><a name="925730"> </a><h4>Purpose </h4><dl><a name="925731"> </a><p></p><dt>Requests a TEST command frame be sent in the NDM (Normal disconnect Mode) state.</dl><a name="925732"> </a><h4>Prototype </h4><dl><a name="925733"> </a><dt><code>IrStatus IrTestReq (UInt16&nbsp;refNum, IrDeviceAddr&nbsp;devAddr, IrConnect*&nbsp;con, IrPacket*&nbsp;packet) </code></dl></dl><dl><a name="925734"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925735"> </a><CODE>--&gt; <code>refnum</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>IR library refNum.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925736"> </a><CODE>--&gt; <code>devAddr</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Device address of device where TEST will be sent. This address is not checked so it can be the broadcast address or 0.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925740"> </a><CODE>--&gt; <code>con</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to <code><a href="IRLib.html#924937"></code>IrConnect<code></a></code> structure specifying the callback function to call to report the result.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925744"> </a><CODE>--&gt; <code>packet</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to an <code><a href="IRLib.html#925009"></code>IrPacket<code></a></code> structure that contains the data to send in the TEST command packet. The maximum size data that can be sent is <code>IR_MAX_TEST_PACKET</code>. Even if no data is to be sent, a valid packet must be passed.<br></TD></TR></TABLE></dl><dl><a name="925745"> </a><h4>Result </h4><dl><a name="925746"> </a><p></p><dt><code>IR_STATUS_PENDING</code> means the operation has been started successfully and the result will be returned via the callback function with the event <code>LEVENT_TEST_CNF</code>. This is also the indication returning the packet.<a name="925747"> </a><p></p><dt><code>IR_STATUS_FAILED</code> means the operation failed because of one of the following reasons. Note that the packet is available immediately.<ul type="SQUARE"><a name="925748"> </a><br><li><code>IrConnect</code> structure is not bound to the stack<br><a name="925749"> </a><br><li>Packet size exceeds maximum allowed<br></ul><a name="925750"> </a><p></p><dt><code>IR_STATUS_MEDIA_BUSY</code> means the operation failed because the media is busy or the stack is not in the NDM state (the packet is available immediately).</dl></dl><dl><a name="925751"> </a><h4>Comments </h4><dl><a name="925752"> </a><p></p><dt>The result is signaled via the callback specified in the <code>IrConnect</code> structure. The callback event is <code>LEVENT_TEST_CNF</code> and the status field indicates the result of the operation. <code>IR_STATUS_SUCCESS</code> indicates success and <code>IR_STATUS_FAILED</code> indicates no response was received. A packet must be passed containing the data to send in the TEST frame. The packet is returned when the <code>LEVENT_TEST_CNF</code> event is given. </dl><a name="925753"> </a><h4>Compatibility </h4><dl><a name="925757"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="925760"> </a><br> <br> <br><h3> IrUnbind</h3><dl><dl><a name="925761"> </a><h4>Purpose </h4><dl><a name="925762"> </a><p></p><dt>Unbinds the <code>IrConnect</code> structure from the protocol stack, freeing it's LSAP selector.</dl><a name="925763"> </a><h4>Prototype </h4><dl><a name="925764"> </a><dt><code>IrStatus IrUnbind (UInt16&nbsp;refNum, IrConnect*&nbsp;con)</code></dl></dl><dl><a name="925765"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925766"> </a><CODE>--&gt; <code>refnum</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>IR library refNum.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925770"> </a><CODE>--&gt; <code>con</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to <code><a href="IRLib.html#924937"></code>IrConnect<code></a></code> structure to unbind.<br></TD></TR></TABLE></dl><dl><a name="925771"> </a><h4>Result </h4><dl><a name="925772"> </a><p></p><dt><code>IR_STATUS_SUCCESS</code> means the operation completed successfully.<a name="925773"> </a><p></p><dt><code>IR_STATUS_FAILED</code> means the operation failed for one of the following reasons:<ul type="SQUARE"><a name="925774"> </a><br><li>the <code>IrConnect</code> structure was not bound<br><a name="925775"> </a><br><li>the <code>lLsap</code> field contained an invalid number<br></ul></dl></dl><dl><a name="925776"> </a><h4>Compatibility </h4><dl><a name="925780"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="925782"> </a><h2> IAS Functions</h2><dl><a name="925783"> </a><p></p><dt>This section describes functions and macros related to IAS databases:<ul type="SQUARE"><a name="925787"> </a><br><li><code><a href="IRLib.html#925842"></code>IrIAS_Add<code></a></code> <br><a name="925791"> </a><br><li><code><a href="IRLib.html#925869"></code>IrIAS_GetInteger<code></a></code> <br><a name="925795"> </a><br><li><code><a href="IRLib.html#925891"></code>IrIAS_GetIntLsap<code></a></code> <br><a name="925799"> </a><br><li><code><a href="IRLib.html#925913"></code>IrIAS_GetObjectID<code></a></code> <br><a name="925803"> </a><br><li><code><a href="IRLib.html#925932"></code>IrIAS_GetOctetString<code></a></code> <br><a name="925807"> </a><br><li><code><a href="IRLib.html#925954"></code>IrIAS_GetOctetStringLen<code></a></code> <br><a name="925811"> </a><br><li><code><a href="IRLib.html#925976"></code>IrIAS_GetType<code></a></code> <br><a name="925815"> </a><br><li><code><a href="IRLib.html#925995"></code>IrIAS_GetUserString<code></a></code> <br><a name="925819"> </a><br><li><code><a href="IRLib.html#926017"></code>IrIAS_GetUserStringCharSet<code></a></code> <br><a name="925823"> </a><br><li><code><a href="IRLib.html#926039"></code>IrIAS_GetUserStringLen<code></a></code> <br><a name="925827"> </a><br><li><code><a href="IRLib.html#926061"></code>IrIAS_Next<code></a></code> <br><a name="925831"> </a><br><li><code><a href="IRLib.html#926083"></code>IrIAS_Query<code></a></code> <br><a name="925835"> </a><br><li><code><a href="IRLib.html#926118"></code>IrIAS_SetDeviceName<code></a></code> <br><a name="925839"> </a><br><li><code><a href="IRLib.html#926137"></code>IrIAS_StartResult<code></a></code> <br></ul></dl><a name="925842"> </a><br> <br> <br><h3> IrIAS_Add</h3><dl><dl><a name="925843"> </a><h4>Purpose </h4><dl><a name="925844"> </a><p></p><dt>Adds an IAS object to the IAS Database.</dl><a name="925845"> </a><h4>Prototype </h4><dl><a name="925846"> </a><dt><code>IrStatus IrIAS_Add (UInt16&nbsp;refNum, IrIasObject*&nbsp;obj)</code></dl></dl><dl><a name="925847"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925848"> </a><CODE>--&gt; <code>refnum</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>IR library refNum.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925852"> </a><CODE>--&gt; <code>obj</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to an <code><a href="IRLib.html#925061"></code>IrIASObject<code></a></code> structure.<br></TD></TR></TABLE></dl><dl><a name="925853"> </a><h4>Result </h4><dl><a name="925854"> </a><p></p><dt><code>IR_STATUS_SUCCESS</code> means the operation is successful.<a name="925855"> </a><p></p><dt>IR_STATUS_FAILED means the operation failed for one of the following reasons:<ul type="SQUARE"><a name="925856"> </a><br><li>No space in the database.<br><a name="925857"> </a><br><li>An entry with the same class name already exists.<br><a name="925858"> </a><br><li>The attributes of the object violate the IrDA Lite rules (attribute name exceeds <code>IR_MAX_IAS_NAME</code>, or attribute value exceeds <code>IR_MAX_IAS_ATTR_SIZE</code>).<br><a name="925859"> </a><br><li>The class name exceeds <code>IR_MAX_IAS_NAME</code>.<br></ul></dl></dl><dl><a name="925860"> </a><h4>Comments </h4><dl><a name="925861"> </a><p></p><dt>The object is not copied, so the memory for the object must exist for as long as the object is in the database. The IAS database is designed to allow only objects with unique class names, and it checks for this. Class names and attributes names must not exceed <code>IR_MAX_IAS_NAME</code>. Also, attribute values must not exceed <code>IR_MAX_IAS_ATTR_SIZE</code>. </dl><a name="925862"> </a><h4>Compatibility </h4><dl><a name="925866"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="925869"> </a><br> <br> <br><h3> IrIAS_GetInteger</h3><dl><dl><a name="925870"> </a><h4>Purpose </h4><dl><a name="925871"> </a><p></p><dt>Macro that returns an integer value, assuming that the current result item is of type <code>IAS_ATTRIB_INTEGER</code>. (Call <code><a href="IRLib.html#925976"></code>IrIAS_GetType<code></a></code> to determine the type of the current result item.)</dl><a name="925875"> </a><h4>Prototype </h4><dl><a name="925876"> </a><dt><code>IrIAS_GetInteger (t)</code></dl></dl><dl><a name="925877"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925881"> </a><CODE>--&gt; <code>t</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to an <code><a href="IRLib.html#925095"></code>IrIasQuery<code></a></code> structure.<br></TD></TR></TABLE></dl><dl><a name="925882"> </a><h4>Result </h4><dl><a name="925883"> </a><p></p><dt>Integer value returned as a <code>UInt32</code>.</dl></dl><dl><a name="925884"> </a><h4>Compatibility </h4><dl><a name="925888"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="925891"> </a><br> <br> <br><h3> IrIAS_GetIntLsap</h3><dl><dl><a name="925892"> </a><h4>Purpose </h4><dl><a name="925893"> </a><p></p><dt>Macro that returns an integer value that represents an LSAP, assuming that the current result item is of type <code>IAS_ATTRIB_INTEGER</code>. (Call <code><a href="IRLib.html#925976"></code>IrIAS_GetType<code></a></code> to determine the type of the current result item.) Usually integer values returned in a query are LSAP selectors.</dl><a name="925897"> </a><h4>Prototype </h4><dl><a name="925898"> </a><dt><code>IrIAS_GetIntLsap (t)</code></dl></dl><dl><a name="925899"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925903"> </a><CODE>--&gt; <code>t</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to an <code><a href="IRLib.html#925095"></code>IrIasQuery<code></a></code> structure.<br></TD></TR></TABLE></dl><dl><a name="925904"> </a><h4>Result </h4><dl><a name="925905"> </a><p></p><dt>Integer value returned as a <code>UInt8</code>.</dl></dl><dl><a name="925906"> </a><h4>Compatibility </h4><dl><a name="925910"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="925913"> </a><br> <br> <br><h3> IrIAS_GetObjectID</h3><dl><dl><a name="925914"> </a><h4>Purpose </h4><dl><a name="925915"> </a><p></p><dt>Macro that returns the unique object ID of the current result item.</dl><a name="925916"> </a><h4>Prototype </h4><dl><a name="925917"> </a><dt><code>IrIAS_GetObjectID (t)</code></dl></dl><dl><a name="925918"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925922"> </a><CODE>--&gt; <code>t</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to an <code><a href="IRLib.html#925095"></code>IrIasQuery<code></a></code> structure.<br></TD></TR></TABLE></dl><dl><a name="925923"> </a><h4>Result </h4><dl><a name="925924"> </a><p></p><dt>Returns the object ID as a <code>UInt16</code> type.</dl></dl><dl><a name="925925"> </a><h4>Compatibility </h4><dl><a name="925929"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="925932"> </a><br> <br> <br><h3> IrIAS_GetOctetString</h3><dl><dl><a name="925933"> </a><h4>Purpose </h4><dl><a name="925934"> </a><p></p><dt>Macro that returns a pointer to an octet string, assuming that the current result item is of type IAS_ATTRIB_OCTET_STRING. (Call <code><a href="IRLib.html#925976"></code>IrIAS_GetType<code></a></code> to determine the type of the current result item.)</dl><a name="925938"> </a><h4>Prototype </h4><dl><a name="925939"> </a><dt><code>IrIAS_GetOctetString (t)</code></dl></dl><dl><a name="925940"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925944"> </a><CODE>--&gt; <code>t</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to an <code><a href="IRLib.html#925095"></code>IrIasQuery<code></a></code> structure.<br></TD></TR></TABLE></dl><dl><a name="925945"> </a><h4>Result </h4><dl><a name="925946"> </a><p></p><dt>Pointer to octet string of type <code>UInt8</code>.</dl></dl><dl><a name="925947"> </a><h4>Compatibility </h4><dl><a name="925951"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="925954"> </a><br> <br> <br><h3> IrIAS_GetOctetStringLen</h3><dl><dl><a name="925955"> </a><h4>Purpose </h4><dl><a name="925956"> </a><p></p><dt>Macro that returns the length of an octet string, assuming that the current result item is of type <code>IAS_ATTRIB_OCTET_STRING</code>. (Call <code><a href="IRLib.html#925976"></code>IrIAS_GetType<code></a></code> to determine the type of the current result item.)</dl><a name="925960"> </a><h4>Prototype </h4><dl><a name="925961"> </a><dt><code>IrIAS_GetOctetStringLen (t)</code></dl></dl><dl><a name="925962"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925966"> </a><CODE>--&gt; <code>t</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to an <code><a href="IRLib.html#925095"></code>IrIasQuery<code></a></code> structure.<br></TD></TR></TABLE></dl><dl><a name="925967"> </a><h4>Result </h4><dl><a name="925968"> </a><p></p><dt>Length of octet string returned as a <code>UInt16</code>.</dl></dl><dl><a name="925969"> </a><h4>Compatibility </h4><dl><a name="925973"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="925976"> </a><br> <br> <br><h3> IrIAS_GetType</h3><dl><dl><a name="925977"> </a><h4>Purpose </h4><dl><a name="925978"> </a><p></p><dt>Macro that returns the type of the current result item.</dl><a name="925979"> </a><h4>Prototype </h4><dl><a name="925980"> </a><dt><code>IrIAS_GetType (t)</code></dl></dl><dl><a name="925981"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="925985"> </a><CODE>--&gt; <code>t</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to an <code><a href="IRLib.html#925095"></code>IrIasQuery<code></a></code> structure.<br></TD></TR></TABLE></dl><dl><a name="925986"> </a><h4>Result </h4><dl><a name="925987"> </a><p></p><dt>Type of result item, such as <code>IAS_ATTRIB_INTEGER</code>, <code>IAS_ATTRIB_OCTET_STRING</code> or <code>IAS_ATTRIB_USER_STRING</code>. The return value is of type <code>UInt8</code>.</dl></dl><dl><a name="925988"> </a><h4>Compatibility </h4><dl><a name="925992"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="925995"> </a><br> <br> <br><h3> IrIAS_GetUserString</h3><dl><dl><a name="925996"> </a><h4>Purpose </h4><dl><a name="925997"> </a><p></p><dt>Macro that returns a pointer to a user string, assuming that the current result item is of type <code>IAS_ATTRIB_USER_STRING</code>. (Call <code><a href="IRLib.html#925976"></code>IrIAS_GetType<code></a></code> to determine the type of the current result item.)</dl><a name="926001"> </a><h4>Prototype </h4><dl><a name="926002"> </a><dt><code>IrIAS_GetUserString(t)</code></dl></dl><dl><a name="926003"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926007"> </a><CODE>--&gt; <code>t</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to an <code><a href="IRLib.html#925095"></code>IrIasQuery<code></a></code> structure.<br></TD></TR></TABLE></dl><dl><a name="926008"> </a><h4>Result </h4><dl><a name="926009"> </a><p></p><dt>Pointer to result string of type <code>UInt8</code>.</dl></dl><dl><a name="926010"> </a><h4>Compatibility </h4><dl><a name="926014"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="926017"> </a><br> <br> <br><h3> IrIAS_GetUserStringCharSet</h3><dl><dl><a name="926018"> </a><h4>Purpose </h4><dl><a name="926019"> </a><p></p><dt>Macro that returns the character set of the user string, assuming that the current result item is of type <code>IAS_ATTRIB_USER_STRING</code>. (Call <code><a href="IRLib.html#925976"></code>IrIAS_GetType<code></a></code> to determine the type of the current result item.)</dl><a name="926023"> </a><h4>Prototype </h4><dl><a name="926024"> </a><dt><code>IrIAS_GetUserStringCharSet(t)</code></dl></dl><dl><a name="926025"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926029"> </a><CODE>--&gt; <code>t</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to an <code><a href="IRLib.html#925095"></code>IrIasQuery<code></a></code> structure.<br></TD></TR></TABLE></dl><dl><a name="926030"> </a><h4>Result </h4><dl><a name="926031"> </a><p></p><dt>Character set returned as an <code>IrCharSet</code> value.</dl></dl><dl><a name="926032"> </a><h4>Compatibility </h4><dl><a name="926036"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="926039"> </a><br> <br> <br><h3> IrIAS_GetUserStringLen</h3><dl><dl><a name="926040"> </a><h4>Purpose </h4><dl><a name="926041"> </a><p></p><dt>Macro that returns the length of a user string, assuming that the current result item is of type <code>IAS_ATTRIB_USER_STRING</code>. (Call <code><a href="IRLib.html#925976"></code>IrIAS_GetType<code></a></code> to determine the type of the current result item.)</dl><a name="926045"> </a><h4>Prototype </h4><dl><a name="926046"> </a><dt><code>IrIAS_GetUserStringLen (t)</code></dl></dl><dl><a name="926047"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926051"> </a><CODE>--&gt; <code>t</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to an <code><a href="IRLib.html#925095"></code>IrIasQuery<code></a></code> structure.<br></TD></TR></TABLE></dl><dl><a name="926052"> </a><h4>Result </h4><dl><a name="926053"> </a><p></p><dt>Length of user string returned as a <code>UInt8</code> value.</dl></dl><dl><a name="926054"> </a><h4>Compatibility </h4><dl><a name="926058"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="926061"> </a><br> <br> <br><h3> IrIAS_Next</h3><dl><dl><a name="926062"> </a><h4>Purpose </h4><dl><a name="926063"> </a><p></p><dt>Moves the internal pointer to the next result item.</dl><a name="926064"> </a><h4>Prototype </h4><dl><a name="926065"> </a><dt><code>UInt8* IrIAS_Next (UInt16&nbsp;refNum, IrIasQuery*&nbsp;token)</code></dl></dl><dl><a name="926066"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926067"> </a><CODE>--&gt; <code>refnum</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>IR library refNum.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926071"> </a><CODE>--&gt; <code>token</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to an <code><a href="IRLib.html#925095"></code>IrIasQuery<code></a></code> structure.<br></TD></TR></TABLE></dl><dl><a name="926072"> </a><h4>Result </h4><dl><a name="926073"> </a><p></p><dt>Pointer to the next result item, or 0 if there are no more items.</dl></dl><dl><a name="926074"> </a><h4>Comments </h4><dl><a name="926075"> </a><p></p><dt>This function returns a pointer to the start of the next result item. If the pointer is 0, then there are no more result items.</dl><a name="926076"> </a><h4>Compatibility </h4><dl><a name="926080"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="926083"> </a><br> <br> <br><h3> IrIAS_Query</h3><dl><dl><a name="926084"> </a><h4>Purpose </h4><dl><a name="926085"> </a><p></p><dt>Makes an IAS query of another device's IAS database.</dl><a name="926086"> </a><h4>Prototype </h4><dl><a name="926087"> </a><dt><code>IrStatus IrIAS_Query (UInt16&nbsp;refNum, IrIasQuery*&nbsp;token)</code></dl></dl><dl><a name="926088"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926089"> </a><CODE>--&gt; <code>refnum</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>IR library refNum.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926093"> </a><CODE>--&gt; <code>token</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to an <code><a href="IRLib.html#925095"></code>IrIasQuery<code></a></code> structure initialized as described in the Comments section.<br></TD></TR></TABLE></dl><dl><a name="926094"> </a><h4>Result </h4><dl><a name="926095"> </a><p></p><dt><code>IR_STATUS_SUCCESS</code> means the operation is started successfully and the result will be signaled via the callback function.<a name="926096"> </a><p></p><dt>IR_STATUS_FAILED means the operation failed for one of the following reasons:<ul type="SQUARE"><a name="926097"> </a><br><li>The query exceeds <code>IR_MAX_QUERY_LEN</code>.<br><a name="926098"> </a><br><li>The <code>result</code> field of <code>token</code> is 0.<br><a name="926099"> </a><br><li>The <code>resultBufSize</code> field of <code>token</code> is 0.<br><a name="926100"> </a><br><li>The <code>callback</code> field of <code>token</code> is 0.<br><a name="926101"> </a><br><li>A query is already in progress.<br></ul><a name="926102"> </a><p></p><dt><code>IR_STATUS_NO_IRLAP</code> means the operation failed because there is no IrLAP connection.</dl></dl><dl><a name="926103"> </a><h4>Comments </h4><dl><a name="926104"> </a><p></p><dt>An IrLAP connection must exist to the other device. The IAS query token must be initialized as described below. The result is signaled by calling the callback function whose pointer exists in the <code>IrIasQuery</code> structure. Only one query can be made at a time. <a name="926105"> </a><p></p><dt>The <code>IrIasQuery</code> structure passed in the <code>token</code> parameter must be initialized as follows:<ul type="SQUARE"><a name="926106"> </a><br><li>pointer to a callback function in which the result will signaled.<br><a name="926107"> </a><br><li><code>result</code> points to a buffer large enough to hold the result of the query.<br><a name="926108"> </a><br><li><code>resultBufSize</code> is set to the size of the result buffer.<br><a name="926109"> </a><br><li><code>queryBuf</code> must point to a valid query.<br><a name="926110"> </a><br><li><code>queryLen</code> is set to the number of bytes in <code>queryBuf</code>. The length must not exceed <code>IR_MAX_QUERY_LEN</code>.<br></ul></dl><a name="926111"> </a><h4>Compatibility </h4><dl><a name="926115"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="926118"> </a><br> <br> <br><h3> IrIAS_SetDeviceName</h3><dl><dl><a name="926119"> </a><h4>Purpose </h4><dl><a name="926120"> </a><p></p><dt>Sets the <code>value</code> field of the device name attribute of the "Device" object in the IAS database.</dl><a name="926121"> </a><h4>Prototype </h4><dl><a name="926122"> </a><dt><code>IrStatus IrIAS_SetDeviceName (UInt16&nbsp;refNum, UInt8&nbsp;*name, UInt8&nbsp;len)</code></dl></dl><dl><a name="926123"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926124"> </a><CODE>--&gt; <code>refnum</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>IR library refNum.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926125"> </a><CODE>--&gt; <code>name</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to an IAS <code>value</code> field for the device name attribute of the device object. It includes the attribute type, character set and device name. This <code>value</code> field should be a constant and the pointer must remain valid until <code>IrIAS_SetDeviceName</code> is called with another pointer.<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926126"> </a><CODE>--&gt; <code>len</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Total length of the <code>value</code> field. Maximum size allowed is <code>IR_MAX_IAS_ATTR_SIZE</code>.<br></TD></TR></TABLE></dl><dl><a name="926127"> </a><h4>Result </h4><dl><a name="926128"> </a><p></p><dt><code>IR_STATUS_SUCCESS</code> means the operation is successful.<a name="926129"> </a><p></p><dt><code>IR_STATUS_FAILED</code> means <code>len</code> is too big, or the <code>value</code> field is not a valid user string.</dl></dl><dl><a name="926130"> </a><h4>Compatibility </h4><dl><a name="926134"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="926137"> </a><br> <br> <br><h3> IrIAS_StartResult</h3><dl><dl><a name="926138"> </a><h4>Purpose </h4><dl><a name="926139"> </a><p></p><dt>Macro that puts the internal pointer to the start of the result buffer.</dl><a name="926140"> </a><h4>Prototype </h4><dl><a name="926141"> </a><dt><code>IrIAS_StartResult(t)</code></dl></dl><dl><a name="926142"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926146"> </a><CODE>--&gt; <code>t</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>Pointer to an <code><a href="IRLib.html#925095"></code>IrIasQuery<code></a></code> structure.<br></TD></TR></TABLE></dl><dl><a name="926147"> </a><h4>Result </h4><dl><a name="926148"> </a><p></p><dt>Returns nothing.</dl></dl><dl><a name="926149"> </a><h4>Compatibility </h4><dl><a name="926153"> </a><p></p><dt>Implemented only if <a href="CompatibilityApdx.html#483537">3.0 New Feature Set</a> is present.</dl></dl></dl><a name="926155"> </a><h2> Application-Defined Functions</h2><dl><a name="926156"> </a><p></p><dt>The functions in this section are supplied by you and can be named anything.</dl><a name="926158"> </a><br> <br> <br><h3> IrIasQueryCallBack</h3><dl><dl><a name="926159"> </a><h4>Purpose </h4><dl><a name="926160"> </a><p></p><dt>The result of IAS queries is signaled by calling this callback function that is pointed to by the <code>callBack</code> field of the <code><a href="IRLib.html#925095"></code>IrIasQuery<code></a></code> structure.</dl><a name="926164"> </a><h4>Prototype </h4><dl><a name="926165"> </a><dt><code>void IrIasQueryCallBack (IrStatus status)</code></dl></dl><dl><a name="926166"> </a><h4>Parameters </h4><TABLE WIDTH=95%><TR><TD WIDTH=5% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=30% VALIGN=TOP ALIGN=LEFT><a name="926167"> </a><CODE><code>--&gt; status</code></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT>The status of the query operation. The following values can be passed:<br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=35% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=25% VALIGN=TOP ALIGN=LEFT><a name="926168"> </a><CODE></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT><br></TD></TR></TABLE><TABLE WIDTH=95%><TR><TD WIDTH=35% VALIGN=TOP ALIGN=RIGHT>&nbsp</TD><TD WIDTH=25% VALIGN=TOP ALIGN=LEFT><a name="926169"> </a><CODE></CODE><br></TD><TD WIDTH=* VALIGN=TOP ALIGN=LEFT><br></TD></TR></TABLE></dl><dl><a name="926170"> </a><h4>Result </h4><dl><a name="926171"> </a><p></p><dt>Returns nothing<dl><a name="933670"> </a><p></p><dt>.</dl></dl></dl></dl><hr><br><center><B>Palm OS SDK Reference</B></center><br><TABLE WIDTH="100%">  <TR>    <TD WIDTH=10%>&nbsp</TD>    <TD WIDTH=20%><a href="ExchangeManager.html"><IMG SRC="images/prev.html" BORDER=0 ALT="Previous Page"></TD>    <TD WIDTH=20%><a href="ReferenceTOC.html"><IMG SRC="images/content.gif" BORDER=0 ALT="Table of Contents"></TD>    <TD WIDTH=20%><a href="ReferenceIX.html"><IMG SRC="images/index.gif" BORDER=0 ALT="Index"></TD>    <TD WIDTH=20%><a href="ModemManager.html"><IMG SRC="images/next.html" BORDER=0 ALT="Next Page"></TD>    <TD WIDTH=10%>&nbsp</TD>  </TR></TABLE><br><small><em>This is page 54 of 85 in this book</em></small><hr><br><address><a href="http://www.palmos.com/dev/">Palm Computing Platform Development Zone</a></address><i>Copyright &#169; 2000, Palm, Inc.   All rightsreserved.</i><!-- This file was created with Quadralay WebWorks Publisher 5.0.2 --><!-- --><!-- For more information on how this document, and how the rest of --><!-- this server was created, email devsupp@palm.com --><!-- --><!-- Last updated: 03/27/00 21:28:57 --></body>
<!-- Mirrored from users.fuw.edu.pl/~michalj/palmos/IRLib.html by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 17 Feb 2015 19:10:02 GMT -->
</html>